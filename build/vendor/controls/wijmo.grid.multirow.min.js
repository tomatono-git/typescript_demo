/*
    *
    * Wijmo Library 5.20172.359
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),wijmo;(function(n){var t;(function(n){var t;(function(t){'use strict';var i=function(n){function t(t,i,r){var u=n.call(this,t)||this;return u._idxData=i,u._idxRecord=r,u}return __extends(t,n),Object.defineProperty(t.prototype,"recordIndex",{get:function(){return this._idxRecord},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataIndex",{get:function(){return this._idxData},enumerable:!0,configurable:!0}),t}(n.Row);t._MultiRow=i})(t=n.multirow||(n.multirow={}))})(t=n.grid||(n.grid={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(t){function i(i){var r=t.call(this)||this;return r._row=r._col=0,r._rowspan=r._colspan=1,i&&n.copy(r,i),r}return __extends(i,t),Object.defineProperty(i.prototype,"colspan",{get:function(){return this._colspan},set:function(t){this._colspan=n.asInt(t,!1,!0)},enumerable:!0,configurable:!0}),i}(t.Column);i._Cell=r})(i=t.multirow||(t.multirow={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(r){function u(t,i){var u=r.call(this)||this,f,e;if(u._colstart=0,u._g=t,i&&n.copy(u,i),!u._cells)throw'Cell group with no cells?';var s=0,o=0,h=0;for(f=0;f<u._cells.length;f++)e=u._cells[f],o+e.colspan>u._colspan&&(s++,o=0),e._row=s,e._col=o,o+=e.colspan,h+=e.colspan;for(u._rowspan=s+1,u._colspan>h&&(u._colspan=h),f=0;f<u._cells.length;f++)e=u._cells[f],(f==u._cells.length-1||u._cells[f+1]._row>e._row)&&(o=e._col,e._colspan=u._colspan-o);return u}return __extends(u,r),u.prototype._copy=function(t,r){var u,f;if(t=='cells'){if(this._cells=[],n.isArray(r))for(u=0;u<r.length;u++)f=new i._Cell(r[u]),!r[u].header&&f.binding&&(r.header=n.toHeaderCase(f.binding)),this._cells.push(f),this._colspan=Math.max(this._colspan,f.colspan);return!0}return!1},Object.defineProperty(u.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),u.prototype.closeGroup=function(n){var r,i,u,f,e,o;if(n>this._rowspan){for(r=0;r<this._cells.length;r++)i=this._cells[r],i._row==this._rowspan-1&&(i._rowspan=n-i._row);this._rowspan=n}for(this._cols=new t.ColumnCollection(this._g,this._g.columns.defaultSize),this._rng=new Array(n*this._colspan),r=0;r<this._cells.length;r++)for(i=this._cells[r],u=0;u<i._rowspan;u++)for(f=0;f<i._colspan;f++)e=(i._row+u)*this._colspan+i._col+f,this._cols.setAt(e,i),o=new t.CellRange(0-u,0-f,0-u+i._rowspan-1,0-f+i._colspan-1),o.isSingleCell||(this._rng[e]=o);this._rng[-1]=new t.CellRange(0,this._colstart,0,this._colstart+this._colspan-1)},u.prototype.getColumnWidth=function(n){for(var i,t=0;t<this._cells.length;t++)if(i=this._cells[t],i._col==n&&i.colspan==1)return i.width;return null},u.prototype.getMergedRange=function(n,i,r){if(i<0)return this._rng[-1];var f=n.rows[i],e=f.recordIndex!=null?f.recordIndex:i%this._rowspan,o=r-this._colstart,u=this._rng[e*this._colspan+o];return n.cellType==t.CellType.ColumnHeader&&i++,u?new t.CellRange(i+u.row,r+u.col,i+u.row2,r+u.col2):null},u.prototype.getBindingColumn=function(n,t,i){if(t<0)return this;var r=n.rows[t],u=r&&r.recordIndex!=null?r.recordIndex:t%this._rowspan,f=i-this._colstart;return this._cols[u*this._colspan+f]},u.prototype.getColumn=function(n){return this._cols.getColumn(n)},u}(i._Cell);i._CellGroup=r})(i=t.multirow||(t.multirow={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(r){function u(){return r!==null&&r.apply(this,arguments)||this}return __extends(u,r),u.prototype.getMergedRange=function(u,f,e,o){var l,c,s,h;o===void 0&&(o=!0);l=u.grid;switch(u.cellType){case t.CellType.Cell:case t.CellType.RowHeader:if(u.rows[f]instanceof t.GroupRow)return r.prototype.getMergedRange.call(this,u,f,e,o)}switch(u.cellType){case t.CellType.Cell:case t.CellType.ColumnHeader:return c=l._cellGroupsByColumn[e],n.assert(c instanceof i._CellGroup,'Failed to get the group!'),s=u.cellType==t.CellType.ColumnHeader?c.getMergedRange(u,f-1,e):c.getMergedRange(u,f,e),s&&u.columns.frozen&&(h=u.columns.frozen,s.col<h&&s.col2>=h&&(e<h?s.col2=h-1:s.col=h)),s&&u.rows.frozen&&u.cellType==t.CellType.Cell&&(h=u.rows.frozen,s.row<h&&s.row2>=h&&(f<h?s.row2=h-1:s.row=h)),s;case t.CellType.RowHeader:var v=l._rowsPerItem,y=u.rows[f],a=f-y.recordIndex,p=Math.min(a+v-1,u.rows.length-1);return new t.CellRange(a,0,p,u.columns.length-1);case t.CellType.TopLeft:return new t.CellRange(0,0,u.rows.length-1,u.columns.length-1)}return null},u}(t.MergeManager);i._MergeManager=r})(i=t.multirow||(t.multirow={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(t){'use strict';var r=function(n){function t(t){var r=this,i=t._addHdl;return i._detach(),n.call(this,t)||this}return __extends(t,n),t.prototype.updateNewRowTemplate=function(){for(var o,f=this._g.editableCollectionView,r=this._g,t=r.rows,e=f&&f.canAddNew&&r.allowAddNew&&!r.isReadOnly,u=!0,n=t.length-r.rowsPerItem;n<t.length;n++)if(!(t[n]instanceof i)){u=!1;break}if(e&&!u)for(n=0;n<r.rowsPerItem;n++)o=new i(n),t.push(o);if(!e&&u)for(n=0;n<t.length;n++)t[n]instanceof i&&(t.removeAt(n),n--)},t}(n.grid._AddNewHandler),i;t._AddNewHandler=r;i=function(n){function t(t){var i=n.call(this)||this;return i._idxRecord=t,i}return __extends(t,n),Object.defineProperty(t.prototype,"recordIndex",{get:function(){return this._idxRecord},enumerable:!0,configurable:!0}),t}(n.grid._NewRowTemplate)})(i=t.multirow||(t.multirow={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(r){function u(u,f){var e=r.call(this,u)||this,h,o,s;return e._rowsPerItem=1,e._cellBindingGroups=[],e._centerVert=!0,e._collapsedHeaders=!1,n.addClass(e.hostElement,'wj-multirow'),h=e.columnHeaders.hostElement.parentElement,o=n.createElement('<div class="wj-hdr-collapse"><span></span></div>'),o.style.display='none',h.appendChild(o),e._btnCollapse=o,e._updateButtonGlyph(),e.addEventListener(o,'mousedown',function(n){e.collapsedHeaders=!e.collapsedHeaders;n.preventDefault()},!0),e.autoGenerateColumns=!1,e.mergeManager=new i._MergeManager(e),s=e.hostElement,e.removeEventListener(s,'dragover'),e.removeEventListener(s,'dragleave'),e.removeEventListener(s,'dragdrop'),e._addHdl=new i._AddNewHandler(e),e.formatItem.addHandler(e._formatItem,e),e.addEventListener(e.rowHeaders.hostElement,'click',function(n){var u;if(!n.defaultPrevented&&e.selectionMode!=t.SelectionMode.None&&(u=e.hitTest(n),u.panel==e.rowHeaders&&u.row>-1)){var r=e.selection,i=e.rows[r.topRow],f=e.selectionMode!=t.SelectionMode.Row?e.rows[r.bottomRow]:i;if(i&&i.recordIndex!=null){var o=i.index-i.recordIndex,s=f.index-f.recordIndex+e.rowsPerItem-1,h=e.columns.length-1,c=r.row!=r.topRow?new t.CellRange(s,0,o,h):new t.CellRange(o,0,s,h);e.select(c);n.preventDefault()}}},!0),e.initialize(f),e}return __extends(u,r),Object.defineProperty(u.prototype,"layoutDefinition",{get:function(){return this._layoutDef},set:function(t){var i,r;for(this._layoutDef=n.asArray(t),this._rowsPerItem=1,this._cellBindingGroups=this._parseCellGroups(this._layoutDef),i=0;i<this._cellBindingGroups.length;i++)r=this._cellBindingGroups[i],this._rowsPerItem=Math.max(this._rowsPerItem,r._rowspan);this._bindGrid(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rowsPerItem",{get:function(){return this._rowsPerItem},enumerable:!0,configurable:!0}),u.prototype.getBindingColumn=function(n,t,i){return this._getBindingColumn(n,t,n.columns[i])},u.prototype.getColumn=function(n){for(var r,i=this._cellBindingGroups,t=0;t<i.length;t++)if(r=i[t].getColumn(n),i[t].getBindingColumn,r)return r;return null},Object.defineProperty(u.prototype,"centerHeadersVertically",{get:function(){return this._centerVert},set:function(t){t!=this._centerVert&&(this._centerVert=n.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"collapsedHeaders",{get:function(){return this._collapsedHeaders},set:function(t){t!=this._collapsedHeaders&&(this._collapsedHeaders=n.asBoolean(t,!0),this._updateCollapsedHeaders(),this._updateButtonGlyph())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"showHeaderCollapseButton",{get:function(){return this._btnCollapse.style.display==''},set:function(t){t!=this.showHeaderCollapseButton&&(this._btnCollapse.style.display=n.asBoolean(t)?'':'none')},enumerable:!0,configurable:!0}),u.prototype._addBoundRow=function(n,t){for(var u=n[t],r=0;r<this._rowsPerItem;r++)this.rows.push(new i._MultiRow(u,t,r))},u.prototype._addNode=function(n,t){this._addBoundRow(n,t)},u.prototype._bindColumns=function(){for(var u=this.columnHeaders.rows,c=this._rowsPerItem+1,l,f,o,e,s,r,h,i;u.length>c;)u.removeAt(u.length-1);while(u.length<c)u.push(new t.Row);if(this._updateCollapsedHeaders(),this.columns.clear(),this._cellGroupsByColumn={},l=null,f=this.collectionView,f&&f.sourceCollection&&f.sourceCollection.length&&(l=f.sourceCollection[0]),this._cellBindingGroups)for(o=0;o<this._cellBindingGroups.length;o++)for(e=this._cellBindingGroups[o],s=0;s<e._colspan;s++){for(this._cellGroupsByColumn[this.columns.length]=e,r=new t.Column,h=0;h<e.cells.length;h++)if(i=e.cells[h],i._col==s){i.width&&(r.width=i.width);i.binding&&(r.binding=i.binding);i.format&&(r.format=i.format);i.aggregate!=n.Aggregate.None&&(r.aggregate=i.aggregate);break}this.columns.push(r)}},u.prototype._updateCollapsedHeaders=function(){var t=this.columnHeaders.rows,i=this.collapsedHeaders,n;for(t[0].visible=i!=!1,n=1;n<t.length;n++)t[n].visible=i!=!0},u.prototype._updateColumnTypes=function(){var f,o,i,e,u,t;if(r.prototype._updateColumnTypes.call(this),f=this.collectionView,n.hasItems(f))for(o=f.items[0],i=0;i<this._cellBindingGroups.length;i++)for(e=this._cellBindingGroups[i],u=0;u<e._cols.length;u++)t=e._cols[u],t.dataType==null&&t._binding&&(t.dataType=n.getType(t._binding.getValue(o)))},u.prototype._getBindingColumn=function(n,t,i){if(n==this.cells||n==this.columnHeaders){var r=this._cellGroupsByColumn[i.index];n==this.columnHeaders&&t--;i=r.getBindingColumn(n,t,i.index)}return i},u.prototype._cvCollectionChanged=function(r,u){var f,e;if(this.autoGenerateColumns&&this.columns.length==0)this._bindGrid(!0);else switch(u.action){case n.collections.NotifyCollectionChangedAction.Change:this.invalidate();break;case n.collections.NotifyCollectionChangedAction.Add:if(u.index==this.collectionView.items.length-1){for(f=this.rows.length;f>0&&this.rows[f-1]instanceof t._NewRowTemplate;)f--;for(e=0;e<this._rowsPerItem;e++)this.rows.insert(f+e,new i._MultiRow(u.item,u.index,e));return}n.assert(!1,'added item should be the last one.');break;default:this._bindGrid(!1)}},u.prototype._parseCellGroups=function(n){var u=[],f=1,e,r,t;if(n){for(t=0,e=0;t<n.length;t++)r=new i._CellGroup(this,n[t]),r._colstart=e,e+=r._colspan,f=Math.max(f,r._rowspan),u.push(r);for(t=0;t<u.length;t++)u[t].closeGroup(f)}return u},u.prototype._formatItem=function(r,u){var c=this._rowsPerItem,f=u.panel.cellType,o=u.panel.rows[u.range.row],l=u.panel.rows[u.range.row2],e,a,s,h;f==t.CellType.ColumnHeader&&n.toggleClass(u.cell,'wj-group-header',u.range.row==0);(f==t.CellType.Cell||f==t.CellType.ColumnHeader)&&(e=this._cellGroupsByColumn[u.col],n.assert(e instanceof i._CellGroup,'Failed to get the group!'),n.toggleClass(u.cell,'wj-group-start',e._colstart==u.range.col),n.toggleClass(u.cell,'wj-group-end',e._colstart+e._colspan-1==u.range.col2));c>1&&(f==t.CellType.Cell||f==t.CellType.RowHeader)&&(n.toggleClass(u.cell,'wj-record-start',o instanceof i._MultiRow?o.recordIndex==0:!1),n.toggleClass(u.cell,'wj-record-end',l instanceof i._MultiRow?l.recordIndex==c-1:!1));this.showAlternatingRows&&n.toggleClass(u.cell,'wj-alt',o instanceof i._MultiRow?o.dataIndex%2!=0:!1);this._centerVert&&(u.cell.hasChildNodes&&u.range.rowSpan>1?(a=n.createElement('<div style="display:table-cell;vertical-align:middle"></div>'),s=document.createRange(),s.selectNodeContents(u.cell),s.surroundContents(a),n.setCss(u.cell,{display:'table',tableLayout:'fixed',paddingTop:0,paddingBottom:0})):(h=u.cell.querySelector('input')?'0px':'',n.setCss(u.cell,{display:'',tableLayout:'',paddingTop:h,paddingBottom:h})))},u.prototype._updateButtonGlyph=function(){var n=this._btnCollapse.querySelector('span');n instanceof HTMLElement&&(n.className=this.collapsedHeaders?'wj-glyph-left':'wj-glyph-down-left')},u}(t.FlexGrid);i.MultiRow=r})(i=t.multirow||(t.multirow={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}))