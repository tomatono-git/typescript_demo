/*
    *
    * Wijmo Library 5.20172.359
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),wijmo;(function(n){var t;(function(t){var i=function(i){function r(u,f){var e=i.call(this,u)||this,s,o;return e._itmPath=new t._BindingArray('items'),e._dspPath=new t._BindingArray('header'),e._imgPath=new t._BindingArray,e._html=!1,e._animated=!0,e._xpndOnClick=!0,e._autoColl=!0,e._showChk=!1,e._srch='',e._isReadOnly=!0,e.itemsSourceChanged=new n.Event,e.loadingItems=new n.Event,e.loadedItems=new n.Event,e.itemClicked=new n.Event,e.selectedItemChanged=new n.Event,e.checkedItemsChanged=new n.Event,e.isCollapsedChanging=new n.Event,e.isCollapsedChanged=new n.Event,e.isCheckedChanging=new n.Event,e.isCheckedChanged=new n.Event,e.formatItem=new n.Event,e.dragStart=new n.Event,e.dragOver=new n.Event,e.drop=new n.Event,e.dragEnd=new n.Event,e.nodeEditStarting=new n.Event,e.nodeEditStarted=new n.Event,e.nodeEditEnding=new n.Event,e.nodeEditEnded=new n.Event,s=e.getTemplate(),e.applyTemplate('wj-control wj-content wj-treeview',s,{_root:'root'}),e.hostElement.setAttribute('role','tree'),n.addClass(e._root,r._CNDL),e._root.setAttribute('role','group'),o=e.hostElement,e.addEventListener(o,'mousedown',e._mousedown.bind(e)),e.addEventListener(o,'click',e._click.bind(e)),e.addEventListener(o,'keydown',e._keydown.bind(e)),e.addEventListener(o,'keypress',e._keypress.bind(e)),e.addEventListener(o,'wheel',function(n){o.scrollHeight>o.offsetHeight&&(n.deltaY<0&&o.scrollTop==0||n.deltaY>0&&o.scrollTop+o.offsetHeight>=o.scrollHeight)&&(n.preventDefault(),n.stopPropagation())}),e.addEventListener(o,'blur',function(){e._edtNode&&!n.contains(e._edtNode.element,n.getActiveElement())&&e.finishEditing()},!0),e.initialize(f),e.refresh(),e}return __extends(r,i),Object.defineProperty(r.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._items=n.asArray(t),this.onItemsSourceChanged(),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"childItemsPath",{get:function(){return this._itmPath.path},set:function(n){n!=this.childItemsPath&&(this._itmPath.path=n,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayMemberPath",{get:function(){return this._dspPath.path},set:function(n){n!=this.displayMemberPath&&(this._dspPath.path=n,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageMemberPath",{get:function(){return this._imgPath.path},set:function(n){n!=this.imageMemberPath&&(this._imgPath.path=n,this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){t!=this._html&&(this._html=n.asBoolean(t),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showCheckboxes",{get:function(){return this._showChk},set:function(t){t!=this._showChk&&(this._showChk=n.asBoolean(t),this._reload())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoCollapse",{get:function(){return this._autoColl},set:function(t){this._autoColl=n.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){t!=this._animated&&(this._animated=n.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return this._isReadOnly},set:function(t){this._isReadOnly=n.asBoolean(t)},enumerable:!0,configurable:!0}),r.prototype.startEditing=function(i){var u,f,e,o;if(this.isReadOnly||(i||(i=this.selectedNode),!i||i.isDisabled)||!this.finishEditing()||(u=i.element.querySelector('.'+r._CNDT),!u)||(f=new t.TreeNodeEventArgs(i),!this.onNodeEditStarting(f)))return!1;u.tabIndex=0;u.focus();u.contentEditable='true';u.style.cursor='auto';e=document.createRange();e.selectNodeContents(u);o=getSelection();o.removeAllRanges();o.addRange(e);u.focus();n.setAttribute(u,'autocomplete','off');n.setAttribute(u,'autocorrect','off');this._edtNode=i;this.onNodeEditStarted(f);return!0},r.prototype.finishEditing=function(n){var u=this._edtNode,i,o,f,e,s,h;if(u){if((i=u.element.querySelector('.'+r._CNDT),!i)||(o=new t.TreeNodeEventArgs(u),!this.onNodeEditEnding(o)))return!1;f=u.dataItem;e=u.level;this.isContentHtml?n?i.innerHTML=this._dspPath.getValue(f,e):this._dspPath.setValue(f,e,i.innerHTML):n?i.textContent=this._dspPath.getValue(f,e):this._dspPath.setValue(f,e,i.textContent);s=document.createRange();s.selectNodeContents(i);h=getSelection();h.removeAllRanges();i.contentEditable='false';i.style.cursor='';this._edtNode=null;this.onNodeEditEnded(o)}return!0},Object.defineProperty(r.prototype,"allowDragging",{get:function(){return this._dd!=null},set:function(i){var f,u,e;if(i!=this.allowDragging)for(n.asBoolean(i)?this._dd=new t._TreeDragDropManager(this):(this._dd.dispose(),this._dd=null),f=this.hostElement.querySelectorAll('.'+r._CND),u=0;u<f.length;u++)e=f[u],n.setAttribute(e,'draggable',this._dd?!0:null)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"expandOnClick",{get:function(){return this._xpndOnClick},set:function(t){this._xpndOnClick=n.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedItem",{get:function(){return this._selNode?this._selNode.dataItem:null},set:function(n){n!=this.selectedItem&&(this.selectedNode=n?this.getNode(n):null)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedNode",{get:function(){return this._selNode},set:function(t){t!=this.selectedNode&&(this._prevSel=this._selNode,t?t.select():this._selNode&&(n.removeClass(this._selNode.element,r._CSEL),this._selNode=null,this.onSelectedItemChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedPath",{get:function(){for(var i,t=[],n=this.selectedNode;n;n=n.parentNode)i=this._dspPath.getValue(n.dataItem,n.level),t.splice(0,0,i);return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"checkedItems",{get:function(){var t,u;if(this._chkItems==null){var n=r,f='.'+n._CND+'.'+n._CEMP+' > input:checked.'+n._CNDC,i=this._root.querySelectorAll(f);for(this._chkItems=[],t=0;t<i.length;t++)u=i[t].parentElement[n._DATAITEM_KEY],this._chkItems.push(u)}return this._chkItems},set:function(n){var i,u,f;if(this.showCheckboxes){var e=r,h='.'+e._CND+'.'+e._CEMP,o=this._root.querySelectorAll(h),s=!1;for(i=0;i<o.length;i++)u=new t.TreeNode(this,o[i]),f=n.indexOf(u.dataItem)>-1,u.isChecked!=f&&(u.isChecked=f,s=!0);s&&this.onCheckedItemsChanged()}},enumerable:!0,configurable:!0}),r.prototype.checkAllItems=function(n){var i,u;if(this.showCheckboxes){var f=r,s='.'+f._CND+'.'+f._CEMP,e=this._root.querySelectorAll(s),o=!1;for(i=0;i<e.length;i++)u=new t.TreeNode(this,e[i]),u.isChecked!=n&&(u.isChecked=n,o=!0);o&&this.onCheckedItemsChanged()}},Object.defineProperty(r.prototype,"totalItemCount",{get:function(){var n=this.hostElement.querySelectorAll('.'+r._CND);return n.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lazyLoadFunction",{get:function(){return this._lazyLoad},set:function(t){t!=this._lazyLoad&&(this._lazyLoad=n.asFunction(t),this._reload())},enumerable:!0,configurable:!0}),r.prototype.getFirstNode=function(n,i){var f=this.hostElement.querySelector('.'+r._CND),u=f?new t.TreeNode(this,f):null;return n&&u&&!u.element.offsetHeight&&(u=u.next(n,i)),i&&u&&u.isDisabled&&(u=u.next(n,i)),u},r.prototype.getLastNode=function(n,i){var f=this.hostElement.querySelectorAll('.'+r._CND+':last-child'),u=f.length?new t.TreeNode(this,f[f.length-1]):null;return n&&u&&!u.element.offsetHeight&&(u=u.previous(n,i)),i&&u&&u.isDisabled&&(u=u.previous(n,i)),u},Object.defineProperty(r.prototype,"nodes",{get:function(){return t.TreeNode._getChildNodes(this,this._root)},enumerable:!0,configurable:!0}),r.prototype.getNode=function(n){var u,i,f;for(this._isDirty&&this._loadTree(),u=this.hostElement.querySelectorAll('.'+r._CND),i=0;i<u.length;i++)if(f=u[i],f[r._DATAITEM_KEY]==n)return new t.TreeNode(this,f);return null},r.prototype.collapseToLevel=function(n){var t=this._animated,i=this._autoColl;this._animated=this._autoColl=!1;this._collapseToLevel(this.nodes,n,0);this._animated=t;this._autoColl=i},r.prototype.loadTree=function(){this._loadTree()},r.prototype.onItemsSourceChanged=function(n){this.itemsSourceChanged.raise(this,n)},r.prototype.onLoadingItems=function(n){this.loadingItems.raise(this,n)},r.prototype.onLoadedItems=function(n){this.loadedItems.raise(this,n)},r.prototype.onItemClicked=function(n){this.itemClicked.raise(this,n)},r.prototype.onSelectedItemChanged=function(n){this.selectedItemChanged.raise(this,n)},r.prototype.onCheckedItemsChanged=function(n){this._chkItems=null;this.checkedItemsChanged.raise(this,n)},r.prototype.onIsCollapsedChanging=function(n){return this.isCollapsedChanging.raise(this,n),!n.cancel},r.prototype.onIsCollapsedChanged=function(n){this.isCollapsedChanged.raise(this,n)},r.prototype.onIsCheckedChanging=function(n){return this.isCheckedChanging.raise(this,n),!n.cancel},r.prototype.onIsCheckedChanged=function(n){this.isCheckedChanged.raise(this,n)},r.prototype.onFormatItem=function(n){this.formatItem.raise(this,n)},r.prototype.onDragStart=function(n){return this.dragStart.raise(this,n),!n.cancel},r.prototype.onDragOver=function(n){return this.dragOver.raise(this,n),!n.cancel},r.prototype.onDrop=function(n){return this.drop.raise(this,n),!n.cancel},r.prototype.onDragEnd=function(n){this.dragEnd.raise(this,n)},r.prototype.onNodeEditStarting=function(n){return this.nodeEditStarting.raise(this,n),!n.cancel},r.prototype.onNodeEditStarted=function(n){this.nodeEditStarted.raise(this,n)},r.prototype.onNodeEditEnding=function(n){return this.nodeEditEnding.raise(this,n),!n.cancel},r.prototype.onNodeEditEnded=function(n){this.nodeEditEnded.raise(this,n)},r.prototype.refresh=function(){i.prototype.refresh.call(this);!this.isUpdating&&this._isDirty&&this._loadTree()},r.prototype._reload=function(){this._isDirty=!0;this.invalidate()},r.prototype._mousedown=function(i){if(!i.defaultPrevented){var f=n.closest(i.target,'input.'+r._CNDC),e=n.closestClass(i.target,r._CND),u=e?new t.TreeNode(this,e):null;u&&!u.isDisabled&&(this.selectedNode=u);this._dnIndet=f&&f.indeterminate}},r.prototype._click=function(i){var c=this,f,u,e;if(!i.defaultPrevented&&(f=n.closestClass(i.target,r._CND),f)){if(u=new t.TreeNode(this,f),e=n.closest(i.target,'input.'+r._CNDC),u.isDisabled)return;if(!e&&u.equals(this._edtNode))return;if(f.focus(),e&&(i.preventDefault(),i.stopPropagation(),setTimeout(function(){e.indeterminate=!1;u.isChecked=!u.isChecked;c.onCheckedItemsChanged()})),!e){var l=i.target,a=i.ctrlKey||i.metaKey,s=a&&!u.hasPendingChildren,h=f.getBoundingClientRect(),v=this.rightToLeft?h.right-i.clientX:i.clientX-h.left,o=!1;v<=l.offsetHeight?(s?this.collapseToLevel(u.isCollapsed?u.level+1:u.level):u.isCollapsed=!u.isCollapsed,o=!0):this.expandOnClick&&u.isCollapsed&&(s?this.collapseToLevel(u.level):u.isCollapsed=!1,o=!0);o&&s&&this.selectedNode&&this.selectedNode.ensureVisible();o||this.isReadOnly||this.selectedNode&&this.selectedNode.equals(this._prevSel)&&this.startEditing()}this.selectedItem&&this.onItemClicked()}},r.prototype._keydown=function(t){var f;if(!t.defaultPrevented){var i=this._selNode,r=void 0,u=t.keyCode,e=!0;if(i&&!i.isDisabled){switch(u){case n.Key.F2:this.startEditing();t.preventDefault();break;case n.Key.Escape:this.finishEditing(!0);t.preventDefault();break;case n.Key.Up:case n.Key.Down:this.finishEditing();break;case n.Key.Enter:this._edtNode?(this.finishEditing(),u=n.Key.Down):(this.startEditing(),t.preventDefault())}if(this._edtNode)return;if(this.rightToLeft)switch(u){case n.Key.Left:u=n.Key.Right;break;case n.Key.Right:u=n.Key.Left}switch(u){case n.Key.Left:!i.isCollapsed&&i.hasChildren?i.setCollapsed(!0):(i=i.parentNode,i&&i.select());break;case n.Key.Right:i.setCollapsed(!1);break;case n.Key.Up:r=i.previous(!0,!0);break;case n.Key.Down:r=i.next(!0,!0);break;case n.Key.Home:r=this.getFirstNode(!0,!0);break;case n.Key.End:r=this.getLastNode(!0,!0);break;case n.Key.Space:this.selectedItem&&(f=i.checkBox,f&&(i.isChecked=!f.checked,this.onCheckedItemsChanged()));break;case n.Key.Enter:this.selectedItem&&this.onItemClicked();break;default:e=!1}e&&(t.preventDefault(),r&&r.select())}}},r.prototype._keypress=function(t){var o=this,u,f,e,i;if(!t.defaultPrevented){if(t.target instanceof HTMLInputElement)return;if(this._edtNode)return;if(t.charCode>32&&this.startEditing(this.selectedNode)){u=n.getActiveElement();n.contains(this._edtNode.element,u)&&(u.textContent=String.fromCharCode(t.charCode),t.preventDefault(),f=document.createRange(),f.selectNodeContents(u),f.collapse(!1),e=getSelection(),e.removeAllRanges(),e.addRange(f));return}(t.charCode>32||t.charCode==32&&this._srch)&&(t.preventDefault(),this._srch+=String.fromCharCode(t.charCode).toLowerCase(),this._toSrch&&clearTimeout(this._toSrch),this._toSrch=setTimeout(function(){o._toSrch=null;o._srch=''},r._AS_DLY),i=this._findNext(),i==null&&this._srch.length>1&&(this._srch=this._srch[this._srch.length-1],i=this._findNext()),i!=null&&(this.selectedItem=i))}},r.prototype._findNext=function(){var f,t;if(this.hostElement&&this.selectedItem){var u=this.getNode(this.selectedItem),n=u,i=!1,r=!1;for(this._srch.length==1&&(r=!0);n;){if(!n.isDisabled&&!r&&(f=n.element.textContent.trim().toLowerCase(),f.indexOf(this._srch)==0))return n.dataItem;if(t=n.next(!0,!0),t==u&&i)break;t||i||(t=this.getFirstNode(!0,!0),i=!0);n=t;r=!1}}return null},r.prototype._loadTree=function(){var t=this._root,i,r,n;if(t){if(this._isDirty=!1,i=this.containsFocus(),r=this.selectedItem,this.selectedItem=null,this._chkItems=null,this._ldLvl=-1,this.onLoadingItems(),t.innerHTML='',this._items)for(n=0;n<this._items.length;n++)this._addItem(t,0,this._items[n]);i&&!this.containsFocus()&&this.focus();this.selectedItem=r;this.onLoadedItems();this._ldLvl=-1}},r.prototype._addItem=function(i,u,f){var y=this._dspPath.getValue(f,u),p=this._imgPath.getValue(f,u),o=n.asArray(this._itmPath.getValue(f,u),!0),e=document.createElement('div'),s,v,h,l,c,a;if(n.addClass(e,r._CND),e.tabIndex=0,e.setAttribute('role','treeitem'),s=document.createElement('span'),this.isContentHtml?s.innerHTML=y:s.textContent=y,n.addClass(s,r._CNDT),e.appendChild(s),p&&(v=document.createElement('img'),v.src=p,e.insertBefore(v,e.firstChild)),this._showChk&&!this._lazyLoad&&(h=document.createElement('input'),h.type='checkbox',h.tabIndex=-1,n.addClass(h,r._CNDC),e.insertBefore(h,e.firstChild)),this._dd&&e.setAttribute('draggable','true'),i.appendChild(e),e[r._DATAITEM_KEY]=f,o&&o.length==0&&!this.lazyLoadFunction&&(o=null),o){if(l=!0,u>this._ldLvl?(this._ldLvl=u,o.length==0&&(n.addClass(e,r._CCLD),l=!1)):(n.addClass(e,r._CCLD),l=!1,u<this._ldLvl&&(this._ldLvl=1e4)),o.length>0){for(c=document.createElement('div'),n.addClass(c,r._CNDL),a=0;a<o.length;a++)this._addItem(c,u+1,o[a]);i.appendChild(c);e.setAttribute('aria-expanded',l.toString());c.setAttribute('role','group')}}else n.addClass(e,r._CEMP);if(this.formatItem.hasHandlers)this.onFormatItem(new t.FormatNodeEventArgs(f,e,u))},r.prototype._collapseToLevel=function(n,t,i){for(var r,u=0;u<n.length;u++)(r=n[u],r.hasPendingChildren)||(r.isCollapsed=i>=t,r.hasChildren&&this._collapseToLevel(r.nodes,t,i+1))},r.prototype._lazyLoadNode=function(t){var i=this.hostElement;n.hasClass(i,r._CLDG)||(n.addClass(i,r._CLDG),n.addClass(t.element,r._CLDG),this.lazyLoadFunction(t,this._lazyLoadCallback.bind(t)))},r.prototype._lazyLoadCallback=function(n){var t=this,i=t.treeView;i._lazyLoadNodeDone(t,n)},r.prototype._lazyLoadNodeDone=function(t,i){var f=r,e,h,o;n.removeClass(t.element,f._CLDG);n.removeClass(this.hostElement,f._CLDG);var c=t.dataItem,s=t.level,u=n.asArray(i,!0);if(u==null||u.length==0)this._itmPath.setValue(c,s,null),n.addClass(t.element,f._CEMP);else if(u.length){for(this._itmPath.setValue(c,s,u),e=document.createElement('div'),h=t.element,n.addClass(e,f._CNDL),h.parentElement.insertBefore(e,h.nextSibling),o=0;o<u.length;o++)this._addItem(e,s+1,u[o]);t.isCollapsed=!1}},r}(n.Control);i._DATAITEM_KEY='wj-Data-Item';i._AS_DLY=600;i._AN_DLY=200;i._CND='wj-node';i._CNDL='wj-nodelist';i._CEMP='wj-state-empty';i._CNDT='wj-node-text';i._CNDC='wj-node-check';i._CSEL='wj-state-selected';i._CCLD='wj-state-collapsed';i._CCLG='wj-state-collapsing';i._CLDG='wj-state-loading';i.controlTemplate='<div wj-part="root"></div>';t.TreeView=i})(t=n.nav||(n.nav={}))})(wijmo||(wijmo={})),function(n){var t;(function(t){var i=function(){function i(t,r){n.hasClass(r,'wj-treeview')?(t=n.Control.getControl(r),r=null):i._assertNode(r);this._t=t;this._e=r}return Object.defineProperty(i.prototype,"dataItem",{get:function(){return this._e[t.TreeView._DATAITEM_KEY]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"treeView",{get:function(){return this._t},enumerable:!0,configurable:!0}),i.prototype.ensureVisible=function(){for(var n=this.parentNode;n;n=n.parentNode)n.isCollapsed=!1;var r=this.treeView.hostElement,t=this.element.getBoundingClientRect(),i=r.getBoundingClientRect();t.bottom>i.bottom?r.scrollTop+=t.bottom-i.bottom:t.top<i.top&&(r.scrollTop-=i.top-t.top)},i.prototype.equals=function(n){return n!=null&&n.element==this.element},i.prototype.select=function(){var i=this._t,r=i._selNode;this.equals(r)||(r&&n.removeClass(r.element,t.TreeView._CSEL),i._selNode=this,n.addClass(this.element,t.TreeView._CSEL),this.ensureVisible(),i.containsFocus()&&this.element.focus(),i.onSelectedItemChanged())},Object.defineProperty(i.prototype,"index",{get:function(){for(var t=0,n=this._pse(this.element);n;n=this._pse(n))i._isNode(n)&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parentNode",{get:function(){var n=null,t;return this._e&&(t=this._e.parentElement,i._assertNodeList(t),n=this._pse(t)),n?new i(this._t,n):null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){for(var t=-1,n=this;n;n=n.parentNode)t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return i._isNode(this._e)&&!i._isEmpty(this._e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasPendingChildren",{get:function(){return this.isCollapsed&&this.hasChildren&&!i._isNodeList(this.element.nextElementSibling)&&n.isFunction(this._t.lazyLoadFunction)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nodes",{get:function(){return this.hasChildren?i._getChildNodes(this._t,this._e.nextSibling):null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkBox",{get:function(){return this._e.querySelector('input.'+t.TreeView._CNDC)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCollapsed",{get:function(){return this.hasChildren&&n.hasClass(this._e,t.TreeView._CCLD)},set:function(i){if(i!=this.isCollapsed){var r=this.treeView,u=new t.TreeNodeEventArgs(this);if(r.onIsCollapsedChanging(u)){this.setCollapsed(n.asBoolean(i),r.isAnimated,r.autoCollapse);r.onIsCollapsedChanged(u)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isChecked",{get:function(){var n=this.checkBox;return n&&!n.indeterminate?n.checked:null},set:function(i){if(i!=this.isChecked){var r=this.treeView,u=new t.TreeNodeEventArgs(this);if(r.onIsCheckedChanging(u)){this.setChecked(n.asBoolean(i),!0);r.onIsCheckedChanged(u)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisabled",{get:function(){return this._e&&this._e.getAttribute('disabled')!=null},set:function(t){t=n.asBoolean(t,!0);t!=this.isDisabled&&n.enable(this._e,!t)},enumerable:!0,configurable:!0}),i.prototype.previous=function(n,t){var r=this._pse(this._e),u;if(!r&&i._isNodeList(this._e.parentElement)&&(r=this._pse(this._e.parentElement)),i._isNodeList(r)){while(i._isNodeList(r)&&r.childElementCount)r=r.lastChild;i._isNodeList(r)&&(r=this._pse(r))}return u=i._isNode(r)?new i(this._t,r):null,n&&u&&!u.element.offsetHeight&&(u=u.previous(n,t)),t&&u&&u.isDisabled&&(u=u.previous(n,t)),u},i.prototype.next=function(n,t){var r=this._e.nextSibling,f,u;if(i._isNodeList(r)&&(r=r.childElementCount?r.firstChild:r.nextSibling),!r)for(f=this._e.parentElement;!r&&i._isNodeList(f);f=f.parentElement)r=f.nextSibling;return u=i._isNode(r)?new i(this._t,r):null,n&&u&&!u.element.offsetHeight&&(u=u.next(n,t)),t&&u&&u.isDisabled&&(u=u.next(n,t)),u},i.prototype.previousSibling=function(){var n=this._pse(this.element);return i._isNodeList(n)&&(n=this._pse(n)),n?new i(this.treeView,n):null},i.prototype.nextSibling=function(){var n=this.element.nextSibling;return i._isNodeList(n)&&(n=n.nextSibling),n?new i(this.treeView,n):null},i.prototype.setCollapsed=function(r,u,f){var e=this._e,l=this._e.nextElementSibling,a=i._isNodeList(l),v,o,h,c,s;if(a?e.setAttribute('aria-expanded',(!r).toString()):e.removeAttribute('aria-expanded'),r!=this.isCollapsed){if(!r&&!a&&n.isFunction(this._t.lazyLoadFunction)){this._t._lazyLoadNode(this);return}if(u==null&&(u=this.treeView.isAnimated),f==null&&(f=this.treeView.autoCollapse),u?a&&(v=l.offsetHeight,o=l.style,r?(n.toggleClass(e,t.TreeView._CCLG,!0),n.animate(function(i){i<1?(i=1-i,o.height=(i*v).toFixed(0)+'px'):(o.height=o.opacity='',n.toggleClass(e,t.TreeView._CCLD,!0),n.toggleClass(e,t.TreeView._CCLG,!1))},t.TreeView._AN_DLY)):(n.toggleClass(e,t.TreeView._CCLD,!1),o.height=o.opacity='0',n.animate(function(n){o.height=n>=1?o.opacity='':(n*v).toFixed(0)+'px'},t.TreeView._AN_DLY))):n.toggleClass(e,t.TreeView._CCLD,r),!r&&f&&(h=e.parentElement,i._isNodeList(h)))for(c=0;c<h.children.length;c++)s=h.children[c],s!=e&&i._isNode(s)&&(n.toggleClass(s,t.TreeView._CCLD,!0),s.setAttribute('aria-expanded','false'))}},i.prototype.setChecked=function(n,t){var f=this.checkBox,r,i,e,u;if(f.checked=n,f.indeterminate=!1,this.hasChildren)for(r=this.nodes,i=0;i<r.length;i++)e=r[i],e.setChecked(n,!1);t&&(u=this.parentNode,u&&u._updateCheckedState())},i.prototype.move=function(n,t){var i,r,u,e,f,o;return this._contains(n)?!1:(i=this.parentNode,r=this._getArray(),this._moveElements(n,t),u=this.parentNode,e=this._getArray(),i&&i._updateState(),u&&u._updateState(),f=this.dataItem,o=r.indexOf(f),r.splice(o,1),e.splice(this.index,0,f),n.treeView&&(this._t=n.treeView),!0)},i.prototype._pse=function(n){return n.previousElementSibling},i.prototype._contains=function(n){for(;n;n=n.parentNode)if(n.element==this.element)return!0;return!1},i.prototype._getArray=function(){var r=this._t,t=this.parentNode,n=r.itemsSource,i;return t&&(i=r._itmPath,n=i.getValue(t.dataItem,this.level),n||(n=[],i.setValue(t.dataItem,this.level,n))),n},i.prototype._moveElements=function(r,u){var o=r.element,f=o?o.parentElement:r.treeView._root,h=t.DropPosition,s,e;i._assertNodeList(f);s=document.createDocumentFragment();e=this.hasChildren&&!this.hasPendingChildren?this.element.nextSibling:null;s.appendChild(this.element);e&&(i._assertNodeList(e),s.appendChild(e));switch(u){case h.Before:f.insertBefore(s,o);break;case h.After:r=r.nextSibling();o=r?r.element:null;f.insertBefore(s,o);break;case h.Into:(!r.hasChildren||r.hasPendingChildren)&&(e=document.createElement('div'),n.addClass(e,t.TreeView._CNDL),f.insertBefore(e,o.nextSibling));f=r.element.nextSibling;i._assertNodeList(f);f.insertBefore(s,null)}},i.prototype._updateState=function(){this._updateEmptyState();this._updateCheckedState()},i.prototype._updateEmptyState=function(){var r=this.element.nextSibling,u=!1;i._isNodeList(r)&&(r.childElementCount?u=!0:r.parentElement.removeChild(r));n.toggleClass(this.element,t.TreeView._CEMP,!u)},i.prototype._updateCheckedState=function(){var n=this.checkBox,t=this.nodes,u=0,f=0,i,e,r;if(n&&t){for(i=0;i<t.length;i++){e=t[i];switch(e.isChecked){case!0:u++;break;case!1:f++}}u==t.length?(n.checked=!0,n.indeterminate=!1):f==t.length?(n.checked=!1,n.indeterminate=!1):(n.checked=!1,n.indeterminate=!0)}r=this.parentNode;r&&r._updateCheckedState()},i._getChildNodes=function(n,t){var u,f,r,e;if(i._assertNodeList(t),u=[],i._isNodeList(t))for(f=t.children,r=0;r<f.length;r++)e=f[r],i._isNode(e)&&u.push(new i(n,e));return u},i._isNode=function(i){return i&&n.hasClass(i,t.TreeView._CND)},i._isNodeList=function(i){return i&&n.hasClass(i,t.TreeView._CNDL)},i._isEmpty=function(r){return i._isNode(r)&&n.hasClass(r,t.TreeView._CEMP)},i._isCollapsed=function(r){return i._isNode(r)&&!i._isEmpty(r)&&n.hasClass(r,t.TreeView._CCLD)},i._assertNode=function(t){n.assert(i._isNode(t),'node expected')},i._assertNodeList=function(t){n.assert(i._isNodeList(t),'nodeList expected')},i}();t.TreeNode=i})(t=n.nav||(n.nav={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var f=function(t){function i(i,r,u){var f=t.call(this)||this;return f._data=i,f._e=n.asType(r,HTMLElement),f._level=u,f}return __extends(i,t),Object.defineProperty(i.prototype,"dataItem",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),i}(n.EventArgs),i,r,u;t.FormatNodeEventArgs=f;i=function(n){function t(t){var i=n.call(this)||this;return i._node=t,i}return __extends(t,n),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!0,configurable:!0}),t}(n.CancelEventArgs);t.TreeNodeEventArgs=i;r=function(i){function r(r,u,f){var e=i.call(this)||this;return e._src=n.asType(r,t.TreeNode),e._tgt=n.asType(u,t.TreeNode),e._pos=f,e}return __extends(r,i),Object.defineProperty(r.prototype,"dragSource",{get:function(){return this._src},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropTarget",{get:function(){return this._tgt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this._pos},set:function(t){this._pos=n.asEnum(t,u)},enumerable:!0,configurable:!0}),r}(n.CancelEventArgs);t.TreeNodeDragDropEventArgs=r,function(n){n[n.Before=0]="Before";n[n.After=1]="After";n[n.Into=2]="Into"}(u=t.DropPosition||(t.DropPosition={}))})(t=n.nav||(n.nav={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){var i=function(){function i(i){this._tree=n.asType(i,t.TreeView);this._dragstartBnd=this._dragstart.bind(this);this._dragoverBnd=this._dragover.bind(this);this._dropBnd=this._drop.bind(this);this._dragendBnd=this._dragend.bind(this);var r=this._tree,u=r.hostElement;r.addEventListener(u,'dragstart',this._dragstartBnd);r.addEventListener(u,'dragover',this._dragoverBnd);r.addEventListener(u,'dragleave',this._dragoverBnd);r.addEventListener(u,'drop',this._dropBnd);r.addEventListener(u,'dragend',this._dragendBnd);r.addEventListener(u,'keydown',this._keydown)}return i.prototype.dispose=function(){var n=this._tree,t=n.hostElement;n.removeEventListener(t,'dragstart',this._dragstartBnd);n.removeEventListener(t,'dragover',this._dragoverBnd);n.removeEventListener(t,'dragleave',this._dragoverBnd);n.removeEventListener(t,'drop',this._dropBnd);n.removeEventListener(t,'dragend',this._dragendBnd);n.removeEventListener(t,'keydown',this._keydown);this._showDragMarker()},i.prototype._dragstart=function(r){var o;if(!r.defaultPrevented){var f=this._tree,e=n.closestClass(r.target,t.TreeView._CND),u=i;u._drgSrc=t.TreeNode._isNode(e)?new t.TreeNode(f,e):null;u._drgSrc&&(o=new t.TreeNodeEventArgs(u._drgSrc),f.onDragStart(o)||(u._drgSrc=null));u._drgSrc&&r.dataTransfer?(n._startDrag(r.dataTransfer,'copyMove'),r.stopPropagation()):r.preventDefault()}},i.prototype._dragover=function(n){this._handleDragDrop(n,!1)},i.prototype._drop=function(n){this._handleDragDrop(n,!0)},i.prototype._dragend=function(){i._drgSrc=null;this._showDragMarker();this._tree.onDragEnd()},i.prototype._keydown=function(t){t.defaultPrevented||t.keyCode==n.Key.Escape&&this._dragendBnd(null)},i.prototype._handleDragDrop=function(r,u){var a=this._tree,l=i,o,c=t.DropPosition,h=c.Into,s,y,f,v,e,p,w,b,k;!r.defaultPrevented&&l._drgSrc&&(y=document.elementFromPoint(r.clientX,r.clientY),f=n.closestClass(y,t.TreeView._CND),f==null&&(v=n.Control.getControl(n.closest(y,'.wj-treeview')),v instanceof t.TreeView&&v.totalItemCount==0&&(f=v.hostElement)),f==l._drgSrc.element&&(f=null),f&&(s=f.getBoundingClientRect(),e=new t.TreeNode(a,f),p=e.hasPendingChildren?s.height/2:s.height/3,e.element==null?(s=n.Rect.fromBoundingRect(s),s.inflate(-12,-12),h=c.Before):r.clientY<s.top+p?h=c.Before:(r.clientY>s.bottom-p||e.hasPendingChildren)&&(h=c.After,!e.hasChildren||e.isCollapsed||e.hasPendingChildren||(h=c.Before,e=e.next(!0,!1),f=e.element,s=f.getBoundingClientRect())),l._drgSrc._contains(e)?f=null:(o=new t.TreeNodeDragDropEventArgs(l._drgSrc,e,h),o.cancel=l._drgSrc.treeView!=e.treeView,a.onDragOver(o)||(f=null))),f&&(h=o.position,h==c.Before?(w=o.dragSource.next(!0,!1),w&&w.element==f&&(f=null)):h==c.After&&(b=o.dragSource.previous(!0,!1),b&&b.element==f&&(f=null))),f&&!u?(r.dataTransfer.dropEffect='move',r.preventDefault(),r.stopPropagation(),this._showDragMarker(s,h)):this._showDragMarker(),f&&u&&a.onDrop(o)&&(a.hostElement.focus(),k=o.dragSource,k.move(o.dropTarget,o.position),k.select()))},i.prototype._showDragMarker=function(r,u){var f=this._tree,e=i._dMarker.parentElement;if(r){var o=f.hostElement.getBoundingClientRect(),h=u==t.DropPosition.After?r.bottom:r.top,s={top:Math.round(h-o.top+f.hostElement.scrollTop-2),width:'75%',height:u==t.DropPosition.Into?r.height:4,opacity:u==t.DropPosition.Into?'0.15':''};f.rightToLeft?s.right=Math.round(o.right-r.right):s.left=Math.round(r.left-o.left);n.setCss(i._dMarker,s);e!=f._root&&f._root.appendChild(i._dMarker)}else e&&e.removeChild(i._dMarker)},i}();i._dMarker=n.createElement('<div class="wj-marker">&nbsp;</div>');t._TreeDragDropManager=i})(t=n.nav||(n.nav={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){var i=function(){function t(n){this.path=n}return Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(t){if(this._path=t,n.isString(t))this._bindings=[new n.Binding(t)];else if(n.isArray(t)){this._bindings=[];for(var i=0;i<t.length;i++)this._bindings.push(new n.Binding(t[i]))}else t!=null&&n.assert(!1,'Path should be a string or an array of strings.');this._maxLevel=this._bindings?this._bindings.length-1:-1},enumerable:!0,configurable:!0}),t.prototype.getValue=function(n,t){var i=Math.min(t,this._maxLevel);return i>-1?this._bindings[i].getValue(n):null},t.prototype.setValue=function(n,t,i){var r=Math.min(t,this._maxLevel);r>-1&&this._bindings[r].setValue(n,i)},t}();t._BindingArray=i})(t=n.nav||(n.nav={}))}(wijmo||(wijmo={}))