/*
    *
    * Wijmo Library 5.20172.359
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
var __extends,wijmo;(function(n){var t;(function(t){'use strict';function l(t,i,r,u){var f,e=t?1:-1;return r instanceof n.Point?(f=r.x,u=r.y):(f=r,u=u||0),new n.Point(i.x+e*f,i.y+e*u)}function a(t){var r=s(h+t+c),i;return n.addClass(r,'wj-svg-btn'),i=document.createElement('a'),i.appendChild(r),n.addClass(i,'wj-btn'),i.tabIndex=0,i}function v(n,t){var r,i;n.landscape!==t&&(n.landscape=t,r=n.width,n.width=n.height,n.height=r,i=n.leftMargin,t?(n.leftMargin=n.bottomMargin,n.bottomMargin=n.rightMargin,n.rightMargin=n.topMargin,n.topMargin=i):(n.leftMargin=n.topMargin,n.topMargin=n.rightMargin,n.rightMargin=n.bottomMargin,n.bottomMargin=i))}function y(n){if(!n)return null;var i={};return i.height=n.height?new t._Unit(n.height):null,i.width=n.width?new t._Unit(n.width):null,i.bottomMargin=n.bottomMargin?new t._Unit(n.bottomMargin):null,i.leftMargin=n.leftMargin?new t._Unit(n.leftMargin):null,i.rightMargin=n.rightMargin?new t._Unit(n.rightMargin):null,i.topMargin=n.topMargin?new t._Unit(n.topMargin):null,i.landscape=n.landscape,i.paperSize=n.paperSize,i}function p(n){var i=[];for(var t in n)t&&t.length&&t[0]!="_"&&!isNaN(parseInt(t))&&i.push({text:n[t],value:t});return i}function w(t,i){var f,u,e,r;if(t&&t.children)for(f=t.children,u=f.length-1;u>-1;u--)e=f[u],(i==null||i(e))&&(r=t.querySelector('.wj-control'),r&&(r=n.Control.getControl(r))&&r.dispose(),t.removeChild(e))}function o(n){var t,i=document.createElement("div"),r=document.createDocumentFragment();for(i.innerHTML=n;t=i.firstChild;)r.appendChild(t);return r}function s(n){return o(n).firstChild}function b(n,t,i,r){for(var e=t.split(","),u,f=0;f<e.length;f++)u=e[f].trim(),n.addEventListener?n.addEventListener(u,i,r):n.attachEvent?n.attachEvent('on'+u,i):n['on'+u]=i}function k(n,t,i){for(var f=t.split(","),r,u=0;u<f.length;u++)r=f[u].trim(),n.removeEventListener?n.removeEventListener(r,i):n.detachEvent?n.detachEvent('on'+r,i):n['on'+r]=null}function d(t,i){if(i){n.addClass(t,r);return}n.removeClass(t,r)}function g(t,i){if(i){n.addClass(t,u);return}n.removeClass(t,u)}function nt(i,r){if(r){n.removeClass(i,t._hiddenCss);return}n.addClass(i,t._hiddenCss)}function tt(t){return n.hasClass(t,u)}function it(t){return n.hasClass(t,r)}function rt(n,t,i,r){var u,e;n&&(u=t[f],u||(u=t[f]={}),e=u[n],e||(e=u[n]=[]),e.push(i));t.addHandler(i,r)}function ut(n,t){var i,r;n&&(i=t[f],i)&&(r=i[n],r)&&r.forEach(function(n){return t.removeHandler(n)})}function ft(t){var i=t||n.culture.Viewer.errorOccured;return t.Message&&(i=t.Message,t.ExceptionMessage&&(i+='<br/>'+t.ExceptionMessage)),i}function et(i){for(var e,u=!0,r,f,o,s=0;s<i.children.length;s++){if(r=i.children[s],e=n.hasClass(r,'wj-separator'),f=n.hasClass(r,t._hiddenCss),!e&&!f){u=!1;continue}e&&(u?f||n.addClass(r,t._hiddenCss):(f&&n.removeClass(r,t._hiddenCss),o=r),u=!0)}u&&o&&n.addClass(o,'hidden')}function i(n){return t._Unit.convertValue(n,t._UnitType.Twip,t._UnitType.Dip)}function ot(n){return t._Unit.convertValue(n,t._UnitType.Dip,t._UnitType.Twip)}function st(n,t){return t?n.scrollWidth>n.clientWidth:n.scrollHeight>n.clientHeight}function ht(i,r,u,f,e){var s,o;if(f=f==null?1:f,s=i.querySelector('g'),s){if(o='scale('+f+')',e!=null)switch(e){case t._RotateAngle.Rotation90:o+=' rotate(90)';o+=' translate(0 '+-u+')';break;case t._RotateAngle.Rotation180:o+=' rotate(180)';o+=' translate('+-r+' '+-u+')';break;case t._RotateAngle.Rotation270:o+=' rotate(270)';o+=' translate('+-r+' 0)'}s.setAttribute('transform',o);n.isIE&&(i=s.parentNode,i.removeChild(s),i.appendChild(s))}return i}function ct(r,u,f,e){var o={x:i(r.x),y:i(r.y),width:i(r.width),height:i(r.height)},s,h;switch(f){case t._RotateAngle.NoRotate:s=o.y;h=o.x;break;case t._RotateAngle.Rotation90:s=o.x;h=u.height.valueInPixel-o.y-o.height;break;case t._RotateAngle.Rotation180:s=u.height.valueInPixel-o.y-o.height;h=u.width.valueInPixel-o.x-o.width;break;case t._RotateAngle.Rotation270:s=u.width.valueInPixel-o.x-o.width;h=o.y}return new n.Point(h*e,s*e)}function lt(n,i){return i===t._RotateAngle.NoRotate||i===t._RotateAngle.Rotation180?n:{width:n.height,height:n.width}}function at(n){return n?{pageIndex:n.pageIndex,pageBounds:{x:n.x,y:n.y,width:0,height:0}}:{pageIndex:0,pageBounds:{x:0,y:0,width:0,height:0}}}var h='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox = "0 0 24 24" xml: space = "preserve" >',c='</svg>',e,r,u,f;t.icons={paginated:'<rect x="16" y= "1" width="1" height="1" /><rect x="17" y= "2" width="1" height="1" /><rect x="18" y= "3" width="1" height="1" /><path d= "M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z" /><rect x="6" y= "8" width="10" height="1" /><rect x="6" y= "5" width="5" height="1" /><rect x="6" y= "11" width="10" height="1" /><rect x="6" y= "14" width="10" height="1" /><rect x="6" y= "17" width="10" height="1" /><rect x="6" y= "20" width="10" height="1" />',print:'<rect x="5" y= "1" width="14" height="4" /><polygon points= "22,8 22,7 19,7 19,6 5,6 5,7 2,7 2,8 1,8 1,11 1,20 2,20 2,21 5,21 5,11 19,11 19,21 22,21 22,20 23,20 23, 11 23, 8 "/><path d="M6,12v11h12V12H6z M16,21H8v-1h8V21z M16,18H8v-1h8V18z M16,15H8v-1h8V15z" />',exports:'<path d="M19.6,23"/><polyline points="5,19 5,2 13,2 13,7 14.3,7 15,7 18,7 18,9 20,9 20,7 20,6.4 20,5 20,4 19,4 19,5 15,5 15,2 15,1 16,1 16,0 15,0 5,0 3,0 3,2 3,19 3,21 5,21 "/><rect x="18" y="3" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="16" y="1" width="1" height="1"/><polygon points="17,16.6 20,14.1 17,11.6 17,13.6 13,13.6 13,14.6 17,14.6 "/><rect x="3" y="20.9" width="2" height="3.1"/><rect x="4.5" y="22" width="15.6" height="2"/><rect x="18" y="8.4" width="2" height="1.6"/><rect x="18" y="18" width="2.1" height="6"/>',portrait:'<path d="M19,0L19,0L5,0v0H3v24h0.1H5h14h1.7H21V0H19z M12.5,23h-1v-1h1V23z M19,21H5V2h14V21z"/>',landscape:'<path d="M24,19L24,19l0-14h0V3H0v0.1V5v14v1.7V21h24V19z M1,12.5v-1h1v1H1z M3,19V5h19v14H3z"/>',pageSetup:'<rect x="18" y="1" width="1" height="1"/><rect x="19" y="2" width="1" height="1"/><rect x="20" y="3" width="1" height="1"/><polygon points="22,5 22,4 21,4 21,5 20.4,5 20,5 17,5 17,2 17,1.3 17,1 18,1 18,0 17,0 17,0 7,0 6,0 5,0 5,5 7,5 7,2 15,2 15,7 16,7 17,7 20,7 20,22.1 7,22.1 7,19 5,19 5,24 5.9,24 7,24 20,24 21.1,24 22,24 22,5 "/><rect x="5" y="7" width="2" height="2"/><rect x="5" y="11" width="2" height="2"/><rect x="5" y="15" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/><rect x="1" y="11" width="2" height="2"/><polygon points="9,8 9,8 8,8 8,9 9,9 9,10 10,10 10,8 "/><polygon points="2,9 2,9 2,10 3,10 3,9 4,9 4,8 2,8 "/><polygon points="3,16 3,16 4,16 4,15 3,15 3,14 2,14 2,16 "/><polygon points="10,15 10,15 10,14 9,14 9,15 8,15 8,16 10,16 "/>',previousPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="5.6,10.7 12,4.4 18.4,10.7 18.4,15 13.5,10.1 13.5,19.6 10.4,19.6 10.4,10.1 5.6,15 " />',nextPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="18.4,13.3 12,19.6 5.6,13.3 5.6,9 10.5,13.9 10.5,4.4 13.6,4.4 13.6,13.9 18.4,9 " />',firstPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="6.5,13.1 12,7.8 17.5,13.1 17.5,17.5 13.5,13.5 13.5,19.6 10.4,19.6 10.4,13.5 6.5,17.5 " /><rect x="6.5" y= "4.4" width="10.9" height="2.2" />',lastPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="17.5,10.9 12,16.2 6.5,10.9 6.5,6.5 10.5,10.5 10.5,4.4 13.6,4.4 13.6,10.5 17.5,6.5 " /><rect x="6.5" y= "17.5" transform="matrix(-1 -8.987357e-011 8.987357e-011 -1 24 37.0909)" width="10.9" height="2.2" />',backwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="10.7,18.4 4.4,12 10.7,5.6 15,5.6 10.1,10.5 19.6,10.5 19.6,13.6 10.1,13.6 15,18.4 " />',forwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="13.3,5.6 19.6,12 13.3,18.4 9,18.4 13.9,13.5 4.4,13.5 4.4,10.4 13.9,10.4 9,5.6 " />',selectTool:'<polygon points="19.9,13.4 5.6,1.1 5.3,19.9 10.5,14.7 14.3,23.3 16.4,22.4 12.6,13.8 "/>',moveTool:'<polygon points="12.5,3 14.5,3 12,0 9.5,3 11.5,3 11.5,21 11.5,21 9.6,21 12,24 14.5,21 12.5,21 "/><polygon points="21,12.5 21,14.5 24,12 21,9.5 21,11.5 3,11.5 3,11.5 3,9.6 0,12 3,14.5 3,12.5 "/>',continuousView:'<polygon points="22,0 22,5 9,5 9,0 7,0 7,5 7,7 7,7 24,7 24,7 24,5 24,0 "/><polygon points="23,15 19,15 19,11 20,11 20,10 19,10 18,10 17,10 9,10 7.4,10 7,10 7,24 9,24 9,12 17,12 17,15 17,16.6 17,17 22,17 22,24 24,24 24,17 24,15.1 24,15 24,15 24,14 23,14 "/><rect x="22" y="13" width="1" height="1"/><polygon points="20.9,12 20.9,13 22,13 22,12 21,12 21,11 20,11 20,12 "/><polygon points="4.9,5.2 2.5,2.2 0,5.2 2,5.2 2,9.2 3,9.2 3,5.2 "/><polygon points="2.9,19.2 2.9,15.2 1.9,15.2 1.9,19.2 0,19.2 2.5,22.1 4.9,19.2 "/>',singleView:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/>',fitWholePage:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M18,22.1H5V2h8v5h1h1h3V22.1z"/><polygon points="17,13.5 15,11 15,13 13,13 13,14 15,14 15,16 "/><polygon points="6,13.5 8,16 8,14 10,14 10,13 8,13 8,11 "/><polygon points="11.5,7 9,9 11,9 11,11 12,11 12,9 14,9 "/><polygon points="11.5,20 14,18 12,18 12,16 11,16 11,18 9,18 "/>',fitPageWidth:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/><polygon points="14,15.5 17,13 14,10.6 14,12.6 13,12.6 13,13.6 14,13.6 "/><polyline points="6,13.1 9,15.6 9,13.6 10,13.6 10,12.6 9,12.6 9,10.6 6,13.1 "/>',zoomOut:'<circle opacity=".25" cx="12" cy="12" r="12"/><rect opacity=".75" x="5" y="10" width="14" height="3"/>',zoomIn:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon opacity=".75" points="19,10 13.5,10 13.5,4.5 10.5,4.5 10.5,10 5,10 5,13 10.5,13 10.5,18.5 13.5,18.5 13.5,13 19,13 " />',fullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="19.6,9.9 20,6 16.1,6.4 17.6,7.8 14.7,10.6 15.4,11.3 18.3,8.5"/><polygon points="4.4,16.2 4,20 7.9,19.7 6.5,18.3 9.3,15.5 8.6,14.8 5.8,17.6"/>',exitFullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="9.2,18.6 9.6,14.7 5.7,15.1 7.2,16.5 4.3,19.3 5,20 7.9,17.2"/><polygon points="14.8,7.5 14.4,11.3 18.3,11 16.9,9.6 19.7,6.8 19,6.1 16.2,8.9"/>',thumbnails:'<path d="M20,2h-5h-2v2v5v2v0h2v0h5v0h2v0V9V4V2H20z M20,9h-5V4h5V9z"/><path d="M20,13h-5h-2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H20z M20,20h-5v-5h5V20z"/><path d="M9,13H4H2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H9z M9,20H4v-5h5V20z"/><rect x="2" y="2" width="9" height="9"/>',outlines:'<path d="M22,0H2H0v2v20v2h2h20h2v-2V2V0H22z M2,2h12v20H2V2z M22,22h-6V2h6V22z"/><rect x="17.5" y="5" width="3" height="1" /><rect x="17.5" y="8" width="3" height="1"/><rect x="17.5" y="11" width="3" height="1"/>',search:'<circle stroke-width="2" fill="none" cx="9.5" cy="9.5" r="8.5"/><rect x="16.9" y="13.7" transform="matrix(-0.7193 0.6947 -0.6947 -0.7193 44.3315 18.4942)" width="3" height="9"/>',searchNext:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchPrevious:'<polygon points="12,11.4 20,19.5 20,12.6 12,4.5 4,12.6 4,19.5 "/>',hamburgerMenu:'<rect x="2" y="4.875" width="20" height="1.5"/><rect x="2" y="11.25" width="20" height="1.5"/><rect x="2" y="17.625" width="20" height="1.5"/>',viewMenu:'<path transform="scale(1.5)" d="M8,2.9c-4.4,0-8,2.2-8,5s3.6,5,8,5s8-2.2,8-5S12.4,2.9,8,2.9z M8,11.8c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4s4, 1.8,4,4C12, 10,10.2,11.8,8,11.8z"/><circle class="st0" cx="12" cy="11.85" r="3.45"/>',searchOptions:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchLeft:'<polygon points="11.4,12 19.5,20 12.6,20 4.5,12 12.6,4 19.5,4 "/>',searchRight:'<polygon points="12.6,12 4.5,4 11.4,4 19.5,12 11.4,20 4.5,20 "/>',showZoomBar:'<path d="M22.8,20.7l-4.4-4.4c1.1-1.6,1.8-3.5,1.8-5.6c0-5.2-4.3-9.5-9.5-9.5s-9.5,4.3-9.5,9.5s4.3,9.5,9.5,9.5 c2.1,0,4-0.7,5.6-1.8l4.4,4.4L22.8,20.7z M4.2,10.7c0-3.6,2.9-6.5,6.5-6.5s6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S4.2,14.3,4.2,10.7z"/><polygon points="7.2,9.2 7.2,7.2 9.2,7.2 9.2,6.2 6.2,6.2 6.2,9.2 "/><polygon points="12.2,7.2 14.2,7.2 14.2,9.2 15.2,9.2 15.2,6.2 12.2,6.2 "/><polygon points="9.2,14.2 7.2,14.2 7.2,12.2 6.2,12.2 6.2,15.2 9.2,15.2 "/><polygon points="14.2,12.2 14.2,14.2 12.2,14.2 12.2,15.2 15.2,15.2 15.2,12.2 "/>',rubberbandTool:"\n        <g>\n\t        <polygon points=\"11.5,2 4,2 2,2 2,4 2,11.5 4,11.5 4,4 11.5,4 \t\"/>\n\t        <path d=\"M16,10V8h-2h-4H8v2v4v2h2h4h2v-2V10z M14,14h-4v-4h4V14z\"/>\n\t        <polygon points=\"20,12 20,19 19,19 19,20 12,20 12,22 20,22 22,22 22,20 22,12 \t\"/>\n\t        <rect x=\"16\" y=\"16\" class=\"st0\" width=\"1\" height=\"1\"/>\n\t        <rect x=\"17\" y=\"17\" class=\"st0\" width=\"1\" height=\"1\"/>\n\t        <rect x=\"18\" y=\"18\" class=\"st0\" width=\"1\" height=\"1\"/>\n        </g>",magnifierTool:"\n        <circle fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\" cx=\"9.5\" cy=\"9.5\" r=\"7.5\"/>\n        <rect x=\"17\" y=\"13.7\" transform=\"matrix(0.7193 -0.6947 0.6947 0.7193 -7.4537 17.9238)\" class=\"st1\" width=\"3\" height=\"9\"/>\n        <polygon points=\"14,8.5 10.5,8.5 10.5,5 8.5,5 8.5,8.5 5,8.5 5,10.5 8.5,10.5 8.5,14 10.5,14 10.5,10.5 14,10.5 \"/>\n        ",rotateDocument:"\n        <g>\n\t        <path d=\"M18,0H5H3v4v18v2h2h13h2v-2V4V0H18z M18,22H5V4h13V22z\"/>\n\t        <polygon points=\"9,12 13,12 13,14 15,11.5 13,9 13,11 9,11 8,11 8,12 8,17 9,17 \t\"/>\n        </g>",rotatePage:"\n        <g>\n\t        <rect x=\"16\" y=\"1\" width=\"1\" height=\"1\"/>\n\t        <rect x=\"17\" y=\"2\" width=\"1\" height=\"1\"/>\n\t        <rect x=\"18\" y=\"3\" width=\"1\" height=\"1\"/>\n\t        <path class=\"st0\" d=\"M19,4v1h-0.6H18h-3V2V1.3V1h1V0h-1H5H4H3v24h2h13h1.1H20V5V4H19z M18,22.1H5V2h8v5h1h1h3V22.1z\"/>\n\t        <polygon points=\"13,11 9,11 8,11 8,12 8,17 9,17 9,12 13,12 13,14 15,11.5 13,9 \t\"/>\n        </g>"};t._hiddenCss='hidden';t._commandTagAttr='command-tag';t._pointMove=l;e=function(){function n(){this._actions=[];this._isStarted=!1}return n.prototype._any=function(){return this._actions.length>0},n.prototype.queue=function(n){var t=this,i=this._any();(this._actions.push(function(){n();t._continue()}),this.isStarted&&!i)&&this._continue()},n.prototype._continue=function(){var n=this._actions.shift();n&&n()},n.prototype.start=function(){this._isStarted||(this._isStarted=!0,this._continue())},Object.defineProperty(n.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),n}();t._ActionQueue=e;t._createSvgBtn=a;t._setLandscape=v;t._clonePageSettings=y;t._enumToArray=p;t._removeChildren=w;t._toDOMs=o;t._toDOM=s;t._addEvent=b;t._removeEvent=k;r='wj-state-active';u='wj-state-disabled';t._checkImageButton=d;t._disableImageButton=g;t._showImageButton=nt;t._isDisabledImageButton=tt;t._isCheckedImageButton=it;f='__wjEvents';t._addWjHandler=rt;t._removeAllWjHandlers=ut;t._getErrorMessage=ft;t._checkSeparatorShown=et;t._twipToPixel=i;t._pixelToTwip=ot;t._hasScrollbar=st;t._transformSvg=ht;t._getTransformedPosition=ct;t._getRotatedSize=lt;t._getPositionByHitTestInfo=at})(t=n.viewer||(n.viewer={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';function y(t,i){if(n.isString(i)){if(f(t,'DateTime'))return new Date(i);if(t==='width'||t==='height'||f(t,'Margin'))return new u(i)}return i}function p(t,i){return n.isString(i)&&(t==='width'||t==='height'||f(t,'Margin'))?new u(i):i}function f(n,t){return n.slice(-t.length)===t}function w(n,t){var i,r,u;t=t||{};i=[];for(r in t)i.push(r+'='+t[r]);return i.length&&(u=n.indexOf('?')<0?'?':'&',n+=u+i.join('&')),n}function b(){for(var n,r,f,t,u=[],i=0;i<arguments.length;i++)u[i]=arguments[i];for(n=[],r=0,f=u.length;r<f;r++)t=u[r],t&&(typeof t!='string'?n=n.concat(c(t)):n.push(e(t).join('/')));return n.join('/')}function c(n){var t,i,r;if(n==null)return null;for(t=[],i=0,r=n.length;i<r;i++)t=t.concat(e(n[i]));return t}function e(n){var t=n.split('/');return t.length>0&&!t[t.length-1].length&&t.splice(t.length-1),t}function k(t,i){var u,r;return i&&i.cache||(t=a(t)),i&&(u=(i.method||'GET').toUpperCase(),u!=='GET'&&(i.data&&(r=l(i.data),r!=null&&(i.data=r)),i.requestHeaders?i.requestHeaders['Content-Type']||(i.requestHeaders['Content-Type']='application/x-www-form-urlencoded'):i.requestHeaders={'Content-Type':'application/x-www-form-urlencoded'})),n.httpRequest(t,i)}function l(t){var r=[],i,u;t=t||{};for(i in t)if(t[i]!==null&&t[i]!==undefined)if(n.isArray(t[i]))if(t[i].length>0)for(u=0;u<t[i].length;u++)r.push(i+'='+encodeURIComponent(t[i][u]));else r.push(i+'=');else r.push(i+'='+encodeURIComponent(t[i]));return r.join('&')}function a(n){return n+(n.indexOf('?')==-1?'?':'&')+'_='+(new Date).getTime()}var r=function(){function i(t){this._hasOutlines=!1;this._pageCount=0;this._supportedExportDescriptions=[];this._isLoadCompleted=!1;this._isDisposed=!1;this._errors=[];this.pageCountChanged=new n.Event;this.disposed=new n.Event;this.pageSettingsChanged=new n.Event;this.loading=new n.Event;this.loadCompleted=new n.Event;this.queryLoadingData=new n.Event;this._service=this._createDocumentService(t);this._paginated=t.paginated}return i.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},i.prototype._updateIsLoadCompleted=function(n){this._isLoadCompleted!==n&&(this._isLoadCompleted=n,n&&this.onLoadCompleted())},i.prototype._updateIsDisposed=function(n){this._isDisposed!==n&&(this._isDisposed=n,this.onDisposed())},i.prototype._getIsDisposed=function(){return this._isDisposed},i.prototype._checkHasOutlines=function(n){return n.hasOutlines},i.prototype._checkIsLoadCompleted=function(n){return n.status===t._ExecutionStatus.completed||n.status===t._ExecutionStatus.stopped||n.status===t._ExecutionStatus.loaded},i._isMobile=function(){return i._isMobileEnvironment==null&&(i._isMobileEnvironment=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))||this._isIOS()),i._isMobileEnvironment},i._isIOS=function(){return i._isIOSEnvironment==null&&(i._isIOSEnvironment=!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))),i._isIOSEnvironment},Object.defineProperty(i.prototype,"executionDateTime",{get:function(){return this._executionDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expiredDateTime",{get:function(){return this._expiredDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLoadCompleted",{get:function(){return this._isLoadCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisposed",{get:function(){return this._getIsDisposed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageSettings",{get:function(){return this._pageSettings},enumerable:!0,configurable:!0}),i.prototype.onPageSettingsChanged=function(t){this.pageSettingsChanged.raise(this,t||new n.EventArgs)},i.prototype.onLoadCompleted=function(t){this.loadCompleted.raise(this,t||new n.EventArgs)},i.prototype.onLoading=function(t){this.loading.raise(this,t||new n.EventArgs)},i.prototype.onDisposed=function(t){this.disposed.raise(this,t||new n.EventArgs)},i.prototype.setPageSettings=function(n){var t=this;return this._innerService.setPageSettings(n).then(function(n){return t._updatePageSettings(n)})},i.prototype._updatePageSettings=function(n){this._pageSettings=n;this.onPageSettingsChanged()},Object.defineProperty(i.prototype,"_innerService",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paginated",{get:function(){return this.pageSettings?this.pageSettings.paginated:this._paginated},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasOutlines",{get:function(){return this._hasOutlines},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"initialPosition",{get:function(){return this._initialPosition},set:function(n){this._initialPosition=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),i.prototype.getSupportedExportDescriptions=function(){return this._innerService.getSupportedExportDescriptions()},i.prototype.getBookmark=function(n){return this._innerService.getBookmark(n)},i.prototype.executeCustomAction=function(n){return this._innerService.executeCustomAction(n)},i.prototype.getOutlines=function(){return this._innerService.getOutlines()},i.prototype.getFeatures=function(){var n=this;return this._innerService.getFeatures().then(function(t){n._features=t})},i.prototype.dispose=function(){var n=this;return this._innerService.dispose().then(function(){return n._updateIsDisposed(!0)})},i.prototype.load=function(){var i=this,n,t;this.onLoading();n={};this._paginated!=null&&(n["pageSettings.paginated"]=this.paginated);t=new s(n);this.onQueryLoadingData(t);return this._innerService.load(t.data).then(function(n){i._updateExecutionInfo(n);i._updateIsLoadCompleted(!0)})},i.prototype._updateExecutionInfo=function(n){n!=null&&(this._executionDateTime=this._getExecutionDateTime(n),this._expiredDateTime=this._getExpiredDateTime(n),this._updatePageSettings(n.pageSettings),this._features=n.features,this._updateDocumentStatus(n.status))},i.prototype._updateDocumentStatus=function(n){n&&(this._errors=n.errorList,this._initialPosition=n.initialPosition,this._updatePageCount(this._getPageCount(n)),this._expiredDateTime=this._getExpiredDateTime(n),this._hasOutlines=this._checkHasOutlines(n),this._updateIsLoadCompleted(this._checkIsLoadCompleted(n)))},i.prototype._getExecutionDateTime=function(n){return n.loadedDateTime},i.prototype._getExpiredDateTime=function(n){return n.expiredDateTime},i.prototype._getPageCount=function(n){return n.pageCount},i.prototype._updatePageCount=function(n){this._pageCount!==n&&(this._pageCount=n,this.onPageCountChanged())},i.prototype.getStatus=function(){var n=this;return this._innerService.getStatus().then(function(t){n._updateDocumentStatus(t)})},i.prototype._createDocumentService=function(){throw i._abstractMethodException;},i.prototype.onPageCountChanged=function(t){this.pageCountChanged.raise(this,t||new n.EventArgs)},i.prototype.print=function(t){var u=this,f,r;if(i._isMobile()){f=this.getRenderToFilterUrl({format:'pdf'});window.open(f);return}r=new n.PrintDocument({title:'Document'});this.renderToFilter({format:'html'}).then(function(n){r.append(n.responseText);var i=r._getDocument();i.close();window.setTimeout(function(){u._removeScript(r);u._rotate(r,t);r.print()},100)})},i.prototype._removeScript=function(n){for(var i,r=n._getDocument().querySelectorAll('script'),t=0;t<r.length;t++)i=r.item(t),i.parentElement.removeChild(i)},i.prototype._rotate=function(n,i){var e,f,o,r,h;if(i&&i.length)for(e=n._getDocument().querySelectorAll('svg'),f=0;f<e.length;f++)if(o=i[f],o){for(r=e[f],h=document.createElementNS('http://www.w3.org/2000/svg','g');r.hasChildNodes();)h.appendChild(r.firstChild);r.appendChild(h);var c={width:new u(r.width.baseVal.value),height:new u(r.height.baseVal.value)},s=t._getRotatedSize(c,o),l=r.parentNode;l.style.width=s.width.valueInPixel+'px';l.style.height=s.height.valueInPixel+'px';r.setAttribute('width',s.width.valueInPixel.toString()+'px');r.setAttribute('height',s.height.valueInPixel.toString()+'px');t._transformSvg(e[f],c.width.valueInPixel,c.height.valueInPixel,1,o)}},i.prototype.renderToFilter=function(n){return this._innerService.renderToFilter(n)},i.prototype.getRenderToFilterUrl=function(n){return this._innerService.getRenderToFilterUrl(n)},i.prototype.search=function(n){return this._innerService.search(n)},i}(),h,i,u,o,v,d,s;r._abstractMethodException='It is an abstract method, please implement it.';r._isMobileEnvironment=null;r._isIOSEnvironment=null;t._DocumentSource=r;t._statusJsonReviver=y;h=function(){function n(n){this._url='';this._url=n.serviceUrl||'';this._documentPath=n.filePath}return Object.defineProperty(n.prototype,"serviceUrl",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filePath",{get:function(){return this._documentPath},enumerable:!0,configurable:!0}),n.prototype.getStatus=function(){throw r._abstractMethodException;},n.prototype.setPageSettings=function(){throw r._abstractMethodException;},n.prototype.getBookmark=function(){throw r._abstractMethodException;},n.prototype.executeCustomAction=function(){throw r._abstractMethodException;},n.prototype.load=function(){throw r._abstractMethodException;},n.prototype.dispose=function(){throw r._abstractMethodException;},n.prototype.getOutlines=function(){throw r._abstractMethodException;},n.prototype.renderToFilter=function(){throw r._abstractMethodException;},n.prototype.search=function(){throw r._abstractMethodException;},n.prototype.getRenderToFilterUrl=function(){throw r._abstractMethodException;},n.prototype.getSupportedExportDescriptions=function(){throw r._abstractMethodException;},n.prototype.getFeatures=function(){throw r._abstractMethodException;},n}();t._DocumentService=h;t._pageSettingsJsonReviver=p;t._strEndsWith=f;t._appendQueryString=w;t._joinUrl=b;t._joinStringUrl=c;t._prepareStringUrl=e;t._httpRequest=k;t._objToParams=l;t._disableCache=a,function(n){n[n.Document=0]="Document";n[n.Inch=1]="Inch";n[n.Mm=2]="Mm";n[n.Pica=3]="Pica";n[n.Point=4]="Point";n[n.Twip=5]="Twip";n[n.InHs=6]="InHs";n[n.Display=7]="Display";n[n.Cm=8]="Cm";n[n.Dip=9]="Dip"}(i=t._UnitType||(t._UnitType={}));u=function(){function t(r,u){var e,f;u===void 0&&(u=i.Dip);t._initUnitTypeDic();n.isObject(r)?(e=r,r=e.value,u=e.units):n.isString(r)&&(f=parseFloat(r),isNaN(f)||(u=t._unitTypeDic[r.substr(f.toString().length)],r=f));this._value=r;this._units=u;this._valueInPixel=t.convertValue(r,u,i.Dip)}return t._initUnitTypeDic=function(){if(!t._unitTypeDic){t._unitTypeDic={};for(var n in t._unitTypes)t._unitTypeDic[t._unitTypeDic[n]=t._unitTypes[n]]=n}},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"units",{get:function(){return this._units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueInPixel",{get:function(){return this._valueInPixel},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return t.toString(this)},t.toString=function(n){return n.value==null?'':n.value+t._unitTypeDic[n.units]},t.convertValue=function(n,r,u){if(r===u)return n;var f;switch(r){case i.Document:f=n/t._DocumentUnitsPerInch;break;case i.Inch:f=n;break;case i.Mm:f=n/t._MmPerInch;break;case i.Pica:f=n/t._PicaPerInch;break;case i.Point:f=n/t._PointsPerInch;break;case i.Twip:f=n/t._TwipsPerInch;break;case i.InHs:f=n/100;break;case i.Display:f=n/t._DisplayPerInch;break;case i.Cm:f=n/t._CmPerInch;break;case i.Dip:f=n/t._DipPerInch;break;default:throw'Invalid from _UnitType: '+r;}switch(u){case i.Document:return f*t._DocumentUnitsPerInch;case i.Inch:return f;case i.Mm:return f*t._MmPerInch;case i.Pica:return f*t._PicaPerInch;case i.Point:return f*t._PointsPerInch;case i.Twip:return f*t._TwipsPerInch;case i.InHs:return f*100;case i.Display:return f*t._DisplayPerInch;case i.Cm:return f*t._CmPerInch;case i.Dip:return f*t._DipPerInch;default:throw'Invalid to _UnitType: '+u;}},t}();u._MmPerInch=25.4;u._DocumentUnitsPerInch=300;u._PointsPerInch=72;u._TwipsPerInch=1440;u._PicaPerInch=6;u._CmPerInch=u._MmPerInch/10;u._DisplayPerInch=75;u._DipPerInch=96;u._unitTypes={doc:i.Document,in:i.Inch,mm:i.Mm,pc:i.Pica,pt:i.Point,tw:i.Twip,inhs:i.InHs,dsp:i.Display,cm:i.Cm,dip:i.Dip,px:i.Dip};t._Unit=u;o=function(){function n(){this._callbacks=[]}return n.prototype.then=function(n,t){return this._callbacks.push({onFulfilled:n,onRejected:t}),this},n.prototype.catch=function(n){return this.then(null,n)},n.prototype.resolve=function(n){var t=this;setTimeout(function(){try{t.onFulfilled(n)}catch(i){t.onRejected(i)}},0)},n.prototype.reject=function(n){var t=this;setTimeout(function(){t.onRejected(n)},0)},n.prototype.onFulfilled=function(n){for(var t,i;t=this._callbacks.shift();)t.onFulfilled&&(i=t.onFulfilled(n),i!==undefined&&(n=i))},n.prototype.onRejected=function(n){for(var t,i;t=this._callbacks.shift();)if(t.onRejected){i=t.onRejected(n);this.onFulfilled(i);return}throw n;},n}();t._Promise=o;v=function(n){function t(t){var i=n.call(this)||this;return i._promises=t,i._init(),i}return __extends(t,n),t.prototype._init=function(){var t=this;if(!this._promises||!this._promises.length){this.reject('No promises in current composited promise.');return}var r=this._promises.length,u=0,i=[],n=!1;this._promises.some(function(f){return f.then(function(f){n||(i.push(f),++u>=r&&t.resolve(i))}).catch(function(i){n=!0;t.reject(i)}),n})},t}(o);t._CompositedPromise=v,function(n){n[n.Custom=0]="Custom";n[n.Letter=1]="Letter";n[n.LetterSmall=2]="LetterSmall";n[n.Tabloid=3]="Tabloid";n[n.Ledger=4]="Ledger";n[n.Legal=5]="Legal";n[n.Statement=6]="Statement";n[n.Executive=7]="Executive";n[n.A3=8]="A3";n[n.A4=9]="A4";n[n.A4Small=10]="A4Small";n[n.A5=11]="A5";n[n.B4=12]="B4";n[n.B5=13]="B5";n[n.Folio=14]="Folio";n[n.Quarto=15]="Quarto";n[n.Standard10x14=16]="Standard10x14";n[n.Standard11x17=17]="Standard11x17";n[n.Note=18]="Note";n[n.Number9Envelope=19]="Number9Envelope";n[n.Number10Envelope=20]="Number10Envelope";n[n.Number11Envelope=21]="Number11Envelope";n[n.Number12Envelope=22]="Number12Envelope";n[n.Number14Envelope=23]="Number14Envelope";n[n.CSheet=24]="CSheet";n[n.DSheet=25]="DSheet";n[n.ESheet=26]="ESheet";n[n.DLEnvelope=27]="DLEnvelope";n[n.C5Envelope=28]="C5Envelope";n[n.C3Envelope=29]="C3Envelope";n[n.C4Envelope=30]="C4Envelope";n[n.C6Envelope=31]="C6Envelope";n[n.C65Envelope=32]="C65Envelope";n[n.B4Envelope=33]="B4Envelope";n[n.B5Envelope=34]="B5Envelope";n[n.B6Envelope=35]="B6Envelope";n[n.ItalyEnvelope=36]="ItalyEnvelope";n[n.MonarchEnvelope=37]="MonarchEnvelope";n[n.PersonalEnvelope=38]="PersonalEnvelope";n[n.USStandardFanfold=39]="USStandardFanfold";n[n.GermanStandardFanfold=40]="GermanStandardFanfold";n[n.GermanLegalFanfold=41]="GermanLegalFanfold";n[n.IsoB4=42]="IsoB4";n[n.JapanesePostcard=43]="JapanesePostcard";n[n.Standard9x11=44]="Standard9x11";n[n.Standard10x11=45]="Standard10x11";n[n.Standard15x11=46]="Standard15x11";n[n.InviteEnvelope=47]="InviteEnvelope";n[n.LetterExtra=50]="LetterExtra";n[n.LegalExtra=51]="LegalExtra";n[n.TabloidExtra=52]="TabloidExtra";n[n.A4Extra=53]="A4Extra";n[n.LetterTransverse=54]="LetterTransverse";n[n.A4Transverse=55]="A4Transverse";n[n.LetterExtraTransverse=56]="LetterExtraTransverse";n[n.APlus=57]="APlus";n[n.BPlus=58]="BPlus";n[n.LetterPlus=59]="LetterPlus";n[n.A4Plus=60]="A4Plus";n[n.A5Transverse=61]="A5Transverse";n[n.B5Transverse=62]="B5Transverse";n[n.A3Extra=63]="A3Extra";n[n.A5Extra=64]="A5Extra";n[n.B5Extra=65]="B5Extra";n[n.A2=66]="A2";n[n.A3Transverse=67]="A3Transverse";n[n.A3ExtraTransverse=68]="A3ExtraTransverse";n[n.JapaneseDoublePostcard=69]="JapaneseDoublePostcard";n[n.A6=70]="A6";n[n.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2";n[n.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3";n[n.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3";n[n.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4";n[n.LetterRotated=75]="LetterRotated";n[n.A3Rotated=76]="A3Rotated";n[n.A4Rotated=77]="A4Rotated";n[n.A5Rotated=78]="A5Rotated";n[n.B4JisRotated=79]="B4JisRotated";n[n.B5JisRotated=80]="B5JisRotated";n[n.JapanesePostcardRotated=81]="JapanesePostcardRotated";n[n.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated";n[n.A6Rotated=83]="A6Rotated";n[n.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated";n[n.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated";n[n.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated";n[n.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated";n[n.B6Jis=88]="B6Jis";n[n.B6JisRotated=89]="B6JisRotated";n[n.Standard12x11=90]="Standard12x11";n[n.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4";n[n.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated";n[n.Prc16K=93]="Prc16K";n[n.Prc32K=94]="Prc32K";n[n.Prc32KBig=95]="Prc32KBig";n[n.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1";n[n.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2";n[n.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3";n[n.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4";n[n.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5";n[n.PrcEnvelopeNumber6=101]="PrcEnvelopeNumber6";n[n.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7";n[n.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8";n[n.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9";n[n.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10";n[n.Prc16KRotated=106]="Prc16KRotated";n[n.Prc32KRotated=107]="Prc32KRotated";n[n.Prc32KBigRotated=108]="Prc32KBigRotated";n[n.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated";n[n.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated";n[n.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated";n[n.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated";n[n.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated";n[n.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated";n[n.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated";n[n.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated";n[n.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated";n[n.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"}(d=t._PaperKind||(t._PaperKind={}));s=function(n){function t(t){var i=n.call(this)||this;return i._data=t||{},i}return __extends(t,n),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t}(n.EventArgs);t.QueryLoadingDataEventArgs=s})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';function u(n){return JSON.parse(n,t._statusJsonReviver)}var e=function(u){function f(t){var i=u.call(this,t)||this;return i._hasParameters=!1,i._status=r.notFound,i.statusChanged=new n.Event,i}return __extends(f,u),f.getReportNames=function(n,t){return i.getReportNames(n,t)},f.getReports=function(t,r,u){return n.isBoolean(u)&&(u={recursive:u}),i.getReports(t,r,u)},Object.defineProperty(f.prototype,"reportName",{get:function(){return this._innerService?this._innerService.reportName:null},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hasParameters",{get:function(){return this._hasParameters},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),f.prototype.load=function(){return u.prototype.load.call(this)},f.prototype._updateStatus=function(n){this._status!==n&&(this._status=n,this.onStatusChanged())},f.prototype.cancel=function(){var n=this;return this._innerService.cancel().then(function(t){return n._updateDocumentStatus(t)})},f.prototype.onStatusChanged=function(t){this.statusChanged.raise(this,t||new n.EventArgs)},f.prototype.dispose=function(){return u.prototype.dispose.call(this)},f.prototype.setParameters=function(n){var t=this;return this._innerService.setParameters(n).then(function(n){return void(t._parameters=n)})},f.prototype.getParameters=function(){var i=this,n;return this._parameters&&this._parameters.length?(n=new t._Promise,n.resolve(this._parameters),n):this._innerService.getParameters().then(function(n){return void(i._parameters=n)})},f.prototype._getIsDisposed=function(){return u.prototype._getIsDisposed.call(this)||this._innerService.isCleared},f.prototype._updateExecutionInfo=function(n){n==null||this.isDisposed||(this._hasParameters=!!n.hasParameters,u.prototype._updateExecutionInfo.call(this,n))},f.prototype._updateDocumentStatus=function(n){this._updateStatus(n.status);u.prototype._updateDocumentStatus.call(this,n)},f.prototype._checkIsLoadCompleted=function(n){return n.status===r.completed||n.status===r.stopped},f.prototype._createDocumentService=function(n){return new i(n)},Object.defineProperty(f.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),f.prototype.render=function(){var n=this;return this._innerService.render().then(function(t){return n._updateDocumentStatus(t)})},f.prototype.executeCustomAction=function(n){var t=this;return this._innerService.executeCustomAction(n).then(function(n){return t._updateDocumentStatus(n)})},f}(t._DocumentSource),i,r,o,f;t._Report=e;i=function(n){function i(t){var i=n.call(this,t)||this;return i._reportName=t.reportName,i}return __extends(i,n),Object.defineProperty(i.prototype,"isCleared",{get:function(){return!this._instanceId&&this._status==r.cleared},enumerable:!0,configurable:!0}),i.getReportNames=function(n,t){return i.getReports(n,t).then(function(n){if(!n)return null;var t=[];return n.items.forEach(function(n){n.type===f.Report&&t.push(n.name)}),t})},i.getReports=function(n,i,r){var u=new t._Promise,f=t._joinUrl(n,i);return t._httpRequest(f,{data:r,success:function(n){u.resolve(JSON.parse(n.responseText))},error:function(n){return u.reject(n)}}),u},Object.defineProperty(i.prototype,"reportName",{get:function(){return this._reportName},enumerable:!0,configurable:!0}),i.prototype.getBookmark=function(n){var r=new t._Promise;return this._checkReportInstanceController(r)?(t._httpRequest(this._getReportInstancesUrl(i._bookmarkAction,n),{success:function(n){r.resolve(JSON.parse(n.responseText))}}),r):r},i.prototype.executeCustomAction=function(n){var t={};return t[i._customActionParam]=n,this.render(t)},i.prototype.getStatus=function(){var n=new t._Promise;return t._httpRequest(this._statusLocation,{success:function(i){n.resolve(JSON.parse(i.responseText,t._statusJsonReviver))}}),n},i.prototype.getDocumentStatus=function(){return this._getReportCache()},i.prototype._getReportCache=function(){var n=new t._Promise;return this._checkReportInstanceController(n)?(t._httpRequest(this._getReportInstancesUrl(),{success:function(t){n.resolve(u(t.responseText))}}),n):n},i.prototype.getParameters=function(){var n=new t._Promise;return this._checkReportInstanceController(n)?(t._httpRequest(this._getReportInstancesUrl(i._parametersAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},i.prototype._getUrlMainPart=function(){return t._joinUrl(this.serviceUrl,this.filePath,this.reportName)},i.prototype._getReportUrl=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t._joinUrl(this._getUrlMainPart(),i._reportCommand,r)},i.prototype._getReportInstancesUrl=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t._joinUrl(this._getUrlMainPart(),i._instancesCommand,this._instanceId,r)},i.prototype._checkReportController=function(n){if(this.serviceUrl!=null&&this.filePath){var t=this.filePath.slice(-5).toLowerCase()==='.flxr'||this.filePath.slice(-4).toLowerCase()==='.xml';if(!t||this.reportName)return!0}return n&&n.reject(i._invalidReportControllerError),!1},i.prototype._checkReportInstanceController=function(n){return this._checkReportController(n)&&this._instanceId?!0:(n&&n.reject(i._invalidReportCacheControllerError),!1)},i.prototype._getError=function(n){var t=n.responseText;try{t&&(t=JSON.parse(t))}finally{return t}},i.prototype.render=function(n){var e=this,f=new t._Promise;return this._checkReportInstanceController(f)?(t._httpRequest(this._getReportInstancesUrl(i._renderAction),{method:'POST',data:n,success:function(n){n.status===202?f.resolve({status:r.rendering}):f.resolve(u(n.responseText))},error:function(n){f.reject(e._getError(n))}}),f.then(function(n){e._status=n.status})):f},i.prototype.load=function(n){var i=this,f=new t._Promise;return this._checkReportController(f)?(t._httpRequest(this._getReportInstancesUrl(),{method:'POST',data:n,success:function(n){f.resolve(u(n.responseText))},error:function(n){f.reject(i._getError(n))}}),f.then(function(n){i._instanceId=n.id;i._status=r.loaded;i._outlinesLocation=n.outlinesLocation;i._statusLocation=n.statusLocation;i._pageSettingsLocation=n.pageSettingsLocation;i._featuresLocation=n.featuresLocation;i._parametersLocation=n.parametersLocation})):f},i.prototype.cancel=function(){var f=this,n=new t._Promise;return this._checkReportInstanceController(n)?this._status!==r.rendering?(n.reject('Cannot execute cancel when the report is not rendering.'),n):(t._httpRequest(this._getReportInstancesUrl(i._cancelAction),{method:'POST',success:function(t){n.resolve(u(t.responseText))}}),n.then(function(n){return void(f._status=n.status)}),n):n},i.prototype.dispose=function(){var i=this,n=new t._Promise;return this._checkReportInstanceController()?(t._httpRequest(this._getReportInstancesUrl(),{method:'DELETE',success:function(){i._status=r.cleared;i._instanceId='';n.resolve()}}),n):n},i.prototype.getOutlines=function(){var n=new t._Promise;return this._checkReportInstanceController(n)?(t._httpRequest(this._getReportInstancesUrl(i._outlinesAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},i.prototype.renderToFilter=function(n){var r=this,i=new t._Promise;return this._checkReportInstanceController(i)?(t._httpRequest(this.getRenderToFilterUrl(n),{cache:!0,success:function(n){i.resolve(n)},error:function(n){i.reject(r._getError(n))}}),i):i},i.prototype.getRenderToFilterUrl=function(n){if(!this._checkReportInstanceController())return null;var r=this._getReportInstancesUrl(i._exportAction);return r=t._disableCache(r),t._appendQueryString(r,n)},i.prototype.search=function(n){var r=new t._Promise;return this._checkReportInstanceController(r)?(t._httpRequest(this._getReportInstancesUrl(i._searchAction),{success:function(n){r.resolve(JSON.parse(n.responseText))},data:n}),r):r},i.prototype.setPageSettings=function(n){var f=this,r=new t._Promise,u;return this._checkReportInstanceController(r)?(u=this._getReportInstancesUrl(i._pageSettingsAction),t._httpRequest(u,{method:'PUT',data:n,success:function(n){r.resolve(JSON.parse(n.responseText,t._pageSettingsJsonReviver))},error:function(n){r.reject(f._getError(n))}}),r):r},i.prototype.setParameters=function(n){var f=this,r=new t._Promise,u;return this._checkReportInstanceController(r)?(u=this._getReportInstancesUrl(i._parametersAction),t._httpRequest(u,{method:'PATCH',data:n,success:function(n){r.resolve(JSON.parse(n.responseText))},error:function(n){r.reject(f._getError(n))}}),r):r},i.prototype.getSupportedExportDescriptions=function(){var n=new t._Promise;return this._checkReportInstanceController(n)?(t._httpRequest(this._getReportInstancesUrl(i._supportedFormatsAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},i.prototype.getFeatures=function(){var n=new t._Promise;return this._checkReportInstanceController(n)?(t._httpRequest(this._featuresLocation,{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},i}(t._DocumentService);i._reportCommand='$report';i._instancesCommand='$instances';i._customActionParam='actionString';i._renderAction='render';i._searchAction='search';i._cancelAction='stop';i._outlinesAction='outlines';i._exportAction='export';i._parametersAction='parameters';i._bookmarkAction='bookmarks';i._pageSettingsAction='pagesettings';i._supportedFormatsAction='supportedformats';i._invalidReportControllerError='Cannot call the service without service url, document path or report name.';i._invalidReportCacheControllerError='Cannot call the service when service url is not set or the report is not loaded.';t._ReportService=i;t._parseReportExecutionInfo=u;r=function(){function n(){}return n}();r.loaded='Loaded';r.rendering='Rendering';r.completed='Completed';r.stopped='Stopped';r.cleared='Cleared';r.notFound='NotFound';t._ExecutionStatus=r,function(n){n[n.Boolean=0]="Boolean";n[n.DateTime=1]="DateTime";n[n.Time=2]="Time";n[n.Date=3]="Date";n[n.Integer=4]="Integer";n[n.Float=5]="Float";n[n.String=6]="String"}(o=t._ParameterType||(t._ParameterType={})),function(n){n[n.Folder=0]="Folder";n[n.File=1]="File";n[n.Report=2]="Report"}(f=t.CatalogItemType||(t.CatalogItemType={}))})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){'use strict';function i(t){return JSON.parse(t,n._statusJsonReviver)}var r=function(i){function r(t){var r=i.call(this,t)||this;return r._status=n._ExecutionStatus.notFound,r}return __extends(r,i),Object.defineProperty(r.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),r.prototype._createDocumentService=function(n){return new t(n)},r.prototype.load=function(){return i.prototype.load.call(this)},r.prototype._updateStatus=function(n){this._status!==n&&(this._status=n)},r.prototype.getStatus=function(){var i=this,t=new n.QueryLoadingDataEventArgs;this.onQueryLoadingData(t);return this._innerService.getStatus(t.data).then(function(n){return i._updateDocumentStatus(n)})},r.prototype.renderToFilter=function(t){var i=new n.QueryLoadingDataEventArgs;this.onQueryLoadingData(i);return this._innerService.renderToFilter(t,i.data)},r.prototype._updateDocumentStatus=function(n){n!=null&&(this._updateStatus(n.status),i.prototype._updateDocumentStatus.call(this,n))},r}(n._DocumentSource),t;n._PdfDocumentSource=r;t=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype._getPdfUrl=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n._joinUrl(this.serviceUrl,this.filePath,r._pdfCommand,i)},r.prototype._getPdfStatus=function(t){var u=this,r=new n._Promise;return this._checkPdfController(r)?(n._httpRequest(this._getPdfUrl(),{data:t,success:function(n){r.resolve(i(n.responseText))}}),r.then(function(t){u._status=n._ExecutionStatus.loaded;u._statusLocation=t.statusLocation;u._featuresLocation=t.featuresLocation})):r},r.prototype._checkPdfController=function(n){return this.serviceUrl!=null&&this.filePath?!0:(n&&n.reject(r._invalidPdfControllerError),!1)},r.prototype.dispose=function(){var t=new n._Promise;return t.resolve(),t},r.prototype.load=function(n){return this._getPdfStatus(n)},r.prototype.getStatus=function(t){var i=new n._Promise;return n._httpRequest(this._statusLocation,{data:t,success:function(n){i.resolve(JSON.parse(n.responseText))}}),i},r.prototype.renderToFilter=function(t,i){var r=new n._Promise;return this._checkPdfController(r)?(n._httpRequest(this.getRenderToFilterUrl(t),{data:i,cache:!0,success:function(n){r.resolve(n)}}),r):r},r.prototype.getRenderToFilterUrl=function(t){if(!this._checkPdfController())return null;var i=this._getPdfUrl(r._exportAction);return i=n._disableCache(i),n._appendQueryString(i,t)},r.prototype.getSupportedExportDescriptions=function(){var t=new n._Promise;return this._checkPdfController(t)?(n._httpRequest(this._getPdfUrl(r._supportedFormatsAction),{success:function(n){t.resolve(JSON.parse(n.responseText))}}),t):t},r.prototype.getFeatures=function(){var t=new n._Promise;return this._checkPdfController(t)?(n._httpRequest(this._featuresLocation,{success:function(n){t.resolve(JSON.parse(n.responseText))}}),t):t},r.prototype.search=function(t){var i=new n._Promise;return this._checkPdfController(i)?(n._httpRequest(this._getPdfUrl(r._searchAction),{success:function(n){i.resolve(JSON.parse(n.responseText))},data:t}),i):i},r}(n._DocumentService);t._pdfCommand='$pdf';t._exportAction='export';t._supportedFormatsAction='supportedformats';t._searchAction='search';t._invalidPdfControllerError='Cannot call the service when service url is not set or the pdf is not loaded.';n._PdfDocumentService=t;n._parseExecutionInfo=i})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));wijmo.culture.Viewer=window.wijmo.culture.Viewer||{cancel:'Cancel',ok:'OK',bottom:'Bottom:',top:'Top:',right:'Right:',left:'Left:',margins:'Margins(inches)',orientation:'Orientation:',paperKind:'Paper Kind:',pageSetup:'Page Setup',landscape:'Landscape',portrait:'Portrait',pageNumber:'Page Number',zoomFactor:'Zoom Factor',paginated:'Print Layout',print:'Print',search:'Search',matchCase:'Match case',wholeWord:'Match whole word only',searchResults:'Search Results',previousPage:'Previous Page',nextPage:'Next Page',firstPage:'First Page',lastPage:'Last Page',backwardHistory:'Backward',forwardHistory:'Forward',pageCount:'Page Count',selectTool:'Select Tool',moveTool:'Move Tool',continuousMode:'Continuous Page View',singleMode:'Single Page View',wholePage:'Fit Whole Page',pageWidth:'Fit Page Width',zoomOut:'Zoom Out',zoomIn:'Zoom In',rubberbandTool:'Zoom by Selection',magnifierTool:'Magnifier',rotatePage:'Rotate Page',rotateDocument:'Rotate Document',exports:'Export',fullScreen:'Full Screen',exitFullScreen:'Exit Full Screen',hamburgerMenu:'Tools',showSearchBar:'Show Search Bar',viewMenu:'Layout Options',searchOptions:'Search Options',matchCaseMenuItem:'Match Case',wholeWordMenuItem:'Match Whole Word',thumbnails:'Page Thumbnails',outlines:'Document Map',loading:'Loading...',pdfExportName:'Adobe PDF',docxExportName:'Open XML Word',xlsxExportName:'Open XML Excel',docExportName:'Microsoft Word',xlsExportName:'Microsoft Excel',mhtmlExportName:'Web archive (MHTML)',htmlExportName:'HTML document',rtfExportName:'RTF document',metafileExportName:'Compressed metafiles',csvExportName:'CSV',tiffExportName:'Tiff images',bmpExportName:'BMP images',emfExportName:'Enhanced metafile',gifExportName:'GIF images',jpgExportName:'JPEG images',jpegExportName:'JPEG images',pngExportName:'PNG images',abstractMethodException:'It is an abstract method, please implement it.',cannotRenderPageNoViewPage:'Cannot render page without document source and view page.',cannotRenderPageNoDoc:'Cannot render page without document source and view page.',exportFormat:'Export format:',exportOptionTitle:'Export options',documentRestrictionsGroup:'Document restrictions',passwordSecurityGroup:'Password security',outputRangeGroup:'Output range',documentInfoGroup:'Document info',generalGroup:'General',docInfoTitle:'Title',docInfoAuthor:'Author',docInfoManager:'Manager',docInfoOperator:'Operator',docInfoCompany:'Company',docInfoSubject:'Subject',docInfoComment:'Comment',docInfoCreator:'Creator',docInfoProducer:'Producer',docInfoCreationTime:'Creation time',docInfoRevisionTime:'Revision time',docInfoKeywords:'Keywords',embedFonts:'Embed TrueType fonts',pdfACompatible:'PDF/A compatible (level 2B)',useCompression:'Use compression',useOutlines:'Generate outlines',allowCopyContent:'Allow content copying or extraction',allowEditAnnotations:'Allow annotations editing',allowEditContent:'Allow content editing',allowPrint:'Allow printing',ownerPassword:'Permissions (owner) password:',userPassword:'Document open (user) password:',encryptionType:'Encryption level:',paged:'Paged',showNavigator:'Show Navigator',navigatorPosition:'Navigator Position',singleFile:'Single File',tolerance:'Tolerance when detecting text bounds (points):',pictureLayer:'Use separate picture layer',metafileType:'Metafile Type:',monochrome:'Monochrome',resolution:'Resolution:',outputRange:'Page range:',outputRangeInverted:'Inverted',showZoomBar:'Zoom Bar',searchPrev:'Search Previous',searchNext:'Search Next',checkMark:'\u2713',exportOk:'Export...',cannotSearch:'Search requires a document source to be specified.',parameters:'Parameters',requiringParameters:'Please input parameters.',nullParameterError:'Value cannot be null.',invalidParameterError:'Invalid input.',parameterNoneItemsSelected:'(none)',parameterAllItemsSelected:'(all)',parameterSelectAllItemText:'(Select All)',selectParameterValue:'(select value)',apply:'Apply',errorOccured:'An error has occured.'},function(n){var t;(function(t){'use strict';var i=function(){function i(){this._currentIndex=-1;this.currentChanged=new n.Event;this.searchCompleted=new n.Event}return i.prototype._onCurrentChanged=function(){this.currentChanged.raise(this,new n.EventArgs)},i.prototype._onSearchCompleted=function(){this.searchCompleted.raise(this,new n.EventArgs)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(n){this._text!==n&&(this._text=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"matchCase",{get:function(){return this._matchCase},set:function(n){this._matchCase!==n&&(this._matchCase=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wholeWord",{get:function(){return this._wholeWord},set:function(n){this._wholeWord!==n&&(this._wholeWord=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"searchResults",{get:function(){return this._searchResults},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(n){var t=this;n!==this._currentIndex&&this._getSearchResults().then(function(){t._currentIndex=n;t._onCurrentChanged()})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"current",{get:function(){return this._currentIndex<0?null:this._searchResults[this._currentIndex]},enumerable:!0,configurable:!0}),i.prototype._clearResults=function(){this._searchResults=null},i.prototype._getSearchResults=function(){var r=this,i=new t._Promise;return this._searchResults?(i.resolve(this._searchResults),i):this.documentSource?this._text==null||this._text.length===0?i:(this._needUpdate=!1,this.documentSource.search({text:encodeURIComponent(this.text),matchCase:this.matchCase,wholeWord:this.wholeWord}).then(function(n){r._searchResults=n;r._onSearchCompleted()})):(i.reject(n.culture.Viewer.cannotSearch),i)},Object.defineProperty(i.prototype,"documentSource",{get:function(){return this._documentSource},set:function(n){this._documentSource=n;this._clearResults();this._text=null;this._matchCase=!1;this._wholeWord=!1;this._currentIndex=-1},enumerable:!0,configurable:!0}),i.prototype.search=function(n){var t=this;this._needUpdate&&this._clearResults();this._getSearchResults().then(function(){var i=t._searchResults.length;n?(t._currentIndex--,t._currentIndex<0&&(t._currentIndex=i-1)):(t._currentIndex++,t._currentIndex>=i&&(t._currentIndex=0));t._currentIndex=Math.max(Math.min(t._currentIndex,i-1),0);t._onCurrentChanged()})},i}();t._SearchManager=i})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){function o(){return'ontouchstart'in window?f:e}var i,u;window.TouchEvent=window.TouchEvent||function(){};window.PointerEvent=window.PointerEvent||function(){};window.Touch=window.Touch||function(){};var r=',',f={startName:'touchstart',moveName:'touchmove',endName:['touchend','touchcancel','touchleave'].join(r)},e={startName:['pointerdown','pointerenter'].join(r),moveName:'pointermove',endName:['pointerup','pointercancel','pointerleave'].join(r)};t._getTouchEventMap=o,function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Up=2]="Up";n[n.Right=3]="Right";n[n.Down=4]="Down"}(i=t._TouchDirection||(t._TouchDirection={}));u=function(){function t(n){this._systemTouchInfo=n;this._id=n instanceof Touch?n.identifier:n.pointerId;this._target=n.target;this._screenX=n.screenX;this._screenY=n.screenY;this._clientX=n.clientX;this._clientY=n.clientY}return t.getCenter=function(t,i){return new n.Point(t.x+(i.x-t.x)/2,t.y+(i.y-t.y)/2)},t.getCenterClient=function(i,r){return t.getCenter(new n.Point(i.clientX,i.clientY),new n.Point(r.clientX,r.clientY))},t.getCenterScreen=function(i,r){return t.getCenter(new n.Point(i.screenX,i.screenY),new n.Point(r.screenX,r.screenY))},t.getDistance=function(n,t){var i=Math.abs(n.clientX-t.clientX),r=Math.abs(n.clientY-t.clientY);return Math.sqrt(i*i+r*r)},t._getDirection=function(n,t){var r=t.clientX-n.clientX,u=t.clientY-n.clientY,f=Math.abs(r)>=Math.abs(u);return f?r>0?i.Right:r<0?i.Left:i.None:u>0?i.Down:u<0?i.Up:i.None},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"systemTouchInfo",{get:function(){return this._systemTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this._screenX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this._screenY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientX",{get:function(){return this._clientX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this._clientY},enumerable:!0,configurable:!0}),t}();t._TouchInfo=u})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={})),function(n){var t;(function(n){var t=function(){function n(){this._timeInterval=50;this._speedInterval=5}return Object.defineProperty(n.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(n){this._timeInterval=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"speedInterval",{get:function(){return this._speedInterval},set:function(n){this._speedInterval=n},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this._timer!=null&&(clearInterval(this._timer),this._timer=null)},n.prototype.start=function(n,t,i){var e=this;if(this.stop(),i){var o=n>=0?1:-1,s=t>=0?1:-1,r=Math.abs(n*this._timeInterval),u=Math.abs(t*this._timeInterval),h=Math.max(r,u),f=Math.floor(h/this.speedInterval),c=Math.floor(r/f),l=Math.floor(u/f);this._timer=setInterval(function(){if(r-=c,u-=l,r=Math.max(0,r),u=Math.max(0,u),!r||!u){e.stop();return}i(r*o,u*s)},this._timeInterval)}},n}();n._SpeedReducer=t})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i,u,r,f;(function(n){n[n.Start=0]="Start";n[n.Move=1]="Move";n[n.End=2]="End"})(i=t._TouchEventType||(t._TouchEventType={}));u=function(n){function r(u){var f=n.call(this)||this;return u instanceof r?(f._systemEvent=u.systemEvent,f._type=u.type,f._touchInfos=u.touchInfos,f):(f._systemEvent=u,t._TouchManager._registerTouchInfo(u),f._type=t._TouchManager._isTouchStart(u.type)?i.Start:t._TouchManager._isTouchEnd(u.type)?i.End:i.Move,f._touchInfos=t._TouchManager._allTouchInfos?t._TouchManager._allTouchInfos.slice():[],f)}return __extends(r,n),Object.defineProperty(r.prototype,"timeStamp",{get:function(){return this.systemEvent.timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"touchInfos",{get:function(){return this._touchInfos},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"systemEvent",{get:function(){return this._systemEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"target",{get:function(){return this.systemEvent.target},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentTarget",{get:function(){return this.systemEvent.currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pointersCount",{get:function(){return this.touchInfos.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cancelBubble",{get:function(){return this._systemEvent.cancelBubble},set:function(n){this._systemEvent.cancelBubble=n},enumerable:!0,configurable:!0}),r.prototype.preventDefault=function(){this._systemEvent.preventDefault()},r}(n.EventArgs);t._TouchEventArgs=u;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(n.Event);t._TouchEvent=r;f=function(){function f(i){var c=this,u,e,o,s,h;if(this.touchMove=new r,this.touchStart=new r,this.touchEnd=new r,u=n.getElement(i),this._element=u,e=f.getTrigger(u),e){o=this._onTouchEvent.bind(this);e.touchMove.addHandler(o);e.touchStart.addHandler(o);e.touchEnd.addHandler(o);this._disposeAction=function(){e.touchMove.removeHandler(o);e.touchStart.removeHandler(o);e.touchEnd.removeHandler(o);c._disposeAction=null};return}s=t._getTouchEventMap();h=this._onSystemTouchEvent.bind(this);t._addEvent(u,s.startName,h);t._addEvent(u,s.moveName,h);t._addEvent(u,s.endName,h);f.bindElement(u,this);this._disposeAction=function(){t._removeEvent(u,s.startName,h);t._removeEvent(u,s.moveName,h);t._removeEvent(u,s.endName,h);f.unbindElement(u);c._disposeAction=null}}return f.bindElement=function(n,t){if(n[f._elementDataName])throw'Cannot bind multi _TouchTrigger on the same element.';n[f._elementDataName]=t},f.unbindElement=function(n){n[f._elementDataName]=null},f.getTrigger=function(n){return n[f._elementDataName]},f.prototype._onSystemTouchEvent=function(n){var t=this._createTouchEventArgs(n);t&&this._onTouchEvent(this,t)},f.prototype._createTouchEventArgs=function(n){return t._TouchManager._isTouchEvent(n)?new u(n):null},f.prototype.dispose=function(){this._disposeAction&&this._disposeAction()},Object.defineProperty(f.prototype,"hostElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),f.prototype._onTouchEvent=function(n,t){switch(t.type){case i.Start:this.onTouchStart(t);return;case i.Move:this.onTouchMove(t);return;case i.End:this.onTouchEnd(t)}},f.prototype.onTouchEnd=function(n){this.touchEnd.raise(this,n)},f.prototype.onTouchStart=function(n){this.touchStart.raise(this,n)},f.prototype.onTouchMove=function(n){this.touchMove.raise(this,n)},f}();f._elementDataName='__wjTouchTrigger';t._TouchTrigger=f})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var r=function(i){function r(t,r,u){var f=i.call(this,t)||this;return f._panType=u==null?t.type:u,f._client=new n.Point(f.touchInfo.clientX,f.touchInfo.clientY),f._screen=new n.Point(f.touchInfo.screenX,f.touchInfo.screenY),r&&(f._clientDelta=new n.Point(f.client.x-r.client.x,f.client.y-r.client.y),f._screenDelta=new n.Point(f.screen.x-r.screen.x,f.screen.y-r.screen.y)),f}return __extends(r,i),Object.defineProperty(r.prototype,"type",{get:function(){return this._panType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"clientDelta",{get:function(){return this._clientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"screenDelta",{get:function(){return this._screenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pointersCount",{get:function(){return this.type==t._TouchEventType.End?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"touchInfo",{get:function(){return this.touchInfos[0]||{}},enumerable:!0,configurable:!0}),r}(t._TouchEventArgs),i,u;t._PanEventArgs=r;i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(t._TouchEvent);t._PanEvent=i;u=function(n){function u(){var t=n!==null&&n.apply(this,arguments)||this;return t.panMove=new i,t.panStart=new i,t.panEnd=new i,t}return __extends(u,n),u.prototype.onPanEnd=function(n){this.panEnd.raise(this,n)},u.prototype.onPanStart=function(n){this.panStart.raise(this,n)},u.prototype.onPanMove=function(n){this.panMove.raise(this,n)},u.prototype._prepareMove=function(n){var t=this;this._prePanEventArgs=n;this._panEvents.queue(function(){t.onPanMove(n)})},u.prototype._prepareStart=function(n){var t=this;this._prePanEventArgs=n;this._panEvents.queue(function(){t.onPanStart(n)});this._clearPanStartTimer();this._panStartTimer=setTimeout(function(){t._panEvents&&t._panEvents.start();t._clearPanStartTimer()},u._threhold)},u.prototype._prepareEnd=function(n){var i=this;this._prePanEventArgs=null;this._panEvents.queue(function(){var u=n instanceof r?n:new r(n,null,t._TouchEventType.End);i.onPanEnd(u);i._stopPan()})},u.prototype._clearPanStartTimer=function(){this._panStartTimer!=null&&(clearTimeout(this._panStartTimer),this._panStartTimer=null)},u.prototype._tryStopPan=function(n){if(!this._panEvents||!this._panEvents.isStarted){this._stopPan();return}this._prepareEnd(n)},u.prototype._stopPan=function(){this._clearPanStartTimer();this._panEvents=null;this._prePanEventArgs=null},u.prototype._processPan=function(n){var i=this._createPanEventArgs(n);if(!i){this._tryStopPan(n);return}switch(i.type){case t._TouchEventType.Start:this._prepareStart(i);return;case t._TouchEventType.Move:this._prepareMove(i);return;case t._TouchEventType.End:this._prepareEnd(i);return}},u.prototype.onTouchStart=function(t){n.prototype.onTouchStart.call(this,t);this._processPan(t)},u.prototype.onTouchMove=function(t){n.prototype.onTouchMove.call(this,t);this._processPan(t)},u.prototype.onTouchEnd=function(t){n.prototype.onTouchEnd.call(this,t);var i=this._createPanEventArgs(t);if(i){this._prepareEnd(i);return}this._tryStopPan(t)},u.prototype._createPanEventArgs=function(n){if(n.type==t._TouchEventType.End&&n.pointersCount!=0||n.type!=t._TouchEventType.End&&n.pointersCount!=1)return null;var i=new r(n,this._prePanEventArgs);if(i.type!=t._TouchEventType.Start){if(!this._panEvents)return null}else this._panEvents=new t._ActionQueue;return i},u}(t._TouchTrigger);u._threhold=10;t._PanTrigger=u})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var u=function(r){function u(u,f,e,o){var s=r.call(this,e)||this,h;return s._duration=o,s._startTouchInfo=u,s._endTouchInfo=f,h=t._pointMove(!1,new n.Point(s.endTouchInfo.clientX,s.endTouchInfo.clientY),new n.Point(s.startTouchInfo.clientX,s.startTouchInfo.clientY)),s._speed=new n.Point(i.getSpeed(h.x,s.duration),i.getSpeed(h.y,s.duration)),s._direction=t._TouchInfo._getDirection(s.startTouchInfo,s.endTouchInfo),s}return __extends(u,r),Object.defineProperty(u.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"startTouchInfo",{get:function(){return this._startTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"endTouchInfo",{get:function(){return this._endTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"pointersCount",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),u}(t._PanEventArgs),r,i;t._SwipeEventArgs=u;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(t._PanEvent);t._SwipeEvent=r;i=function(n){function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.swipe=new r,t}return __extends(i,n),i.getSpeed=function(n,t){return n/t},i.prototype.onPanStart=function(t){n.prototype.onPanStart.call(this,t);this._panStartEventArgs=t},i.prototype.onPanMove=function(t){n.prototype.onPanMove.call(this,t);this._prePanMoveEventArgs=t},i.prototype.onPanEnd=function(t){n.prototype.onPanEnd.call(this,t);var i=this._createSwipeEventArgs(t);if(i)this.onSwipe(i);this._panStartEventArgs=null;this._prePanMoveEventArgs=null},i.prototype.onSwipe=function(n){this.swipe.raise(this,n)},i.prototype._createSwipeEventArgs=function(n){var r,f;return!this._panStartEventArgs||!this._prePanMoveEventArgs?null:(r=n.timeStamp-this._panStartEventArgs.timeStamp,r>i.maxDuration)?null:(f=t._TouchInfo.getDistance(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo),f<i.minDistance)?null:new u(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo,n,r)},i}(t._PanTrigger);i.minDistance=50;i.maxDuration=300;t._SwipeTrigger=i})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(i){function r(r,u,f){var e=i.call(this,r)||this;return(e._zoom=1,e._pinchType=u,e._pre=f||{},e.type==t._TouchEventType.End)?e:(e._pinchDistance=t._TouchInfo.getDistance(e.touchInfos[0],e.touchInfos[1]),e._centerClient=t._TouchInfo.getCenterClient(e.touchInfos[0],e.touchInfos[1]),e._centerScreen=t._TouchInfo.getCenterScreen(e.touchInfos[0],e.touchInfos[1]),e.type==t._TouchEventType.Start)?e:(e._zoom=e.pinchDistance/e.prePinchDistance,e._centerClientDelta=new n.Point(e.centerClient.x-e.preCenterClient.x,e.centerClient.y-e.preCenterClient.y),e._centerScreenDelta=new n.Point(e.centerScreen.x-e.preCenterScreen.x,e.centerScreen.y-e.preCenterScreen.y),e)}return __extends(r,i),Object.defineProperty(r.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pointersCount",{get:function(){return this.type==t._TouchEventType.End?0:2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"prePinchDistance",{get:function(){return this._pre.pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pinchDistance",{get:function(){return this._pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"centerScreenDelta",{get:function(){return this._centerScreenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"centerClientDelta",{get:function(){return this._centerClientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"centerClient",{get:function(){return this._centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"preCenterClient",{get:function(){return this._pre.centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"centerScreen",{get:function(){return this._centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"preCenterScreen",{get:function(){return this._pre.centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._pinchType},enumerable:!0,configurable:!0}),r}(t._TouchEventArgs),r,u;t._PinchEventArgs=i;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(t._TouchEvent);t._PinchEvent=r;u=function(n){function u(){var t=n!==null&&n.apply(this,arguments)||this;return t.pinch=new r,t}return __extends(u,n),u.prototype.onPinch=function(n){this.pinch.raise(this,n)},u.prototype.onTouchStart=function(n){this._process(n)},u.prototype.onTouchend=function(n){this._process(n)},u.prototype.onTouchMove=function(n){this._process(n)},u.prototype._onPinching=function(n){var r=new i(n,this._preEventArgs?t._TouchEventType.Move:t._TouchEventType.Start,this._preEventArgs);this.onPinch(r);this._preEventArgs=r},u.prototype._onPinchEnd=function(n){if(this._preEventArgs){var r=new i(n,t._TouchEventType.End,this._preEventArgs);this.onPinch(r);this._preEventArgs=null}},u.prototype._process=function(n){if(n.pointersCount!=2){this._onPinchEnd(n);return}switch(n.type){case t._TouchEventType.Start:case t._TouchEventType.Move:this._onPinching(n);return;case t._TouchEventType.End:this._onPinchEnd(n);return}},u}(t._TouchTrigger);t._PinchTrigger=u})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={})),function(n){var t;(function(n){var t=function(){function t(t,i){i===void 0&&(i=!0);var r=this;this.touchMove=new n._TouchEvent;this.touchStart=new n._TouchEvent;this.touchEnd=new n._TouchEvent;this.panMove=new n._PanEvent;this.panStart=new n._PanEvent;this.panEnd=new n._PanEvent;this.swipe=new n._SwipeEvent;this.pinch=new n._PinchEvent;this._trigger=new n._SwipeTrigger(t);this._trigger.touchStart.addHandler(function(n,t){return r.onTouchStart(t)});this._trigger.touchMove.addHandler(function(n,t){return r.onTouchMove(t)});this._trigger.touchEnd.addHandler(function(n,t){return r.onTouchEnd(t)});this._trigger.panStart.addHandler(function(n,t){return r.onPanStart(t)});this._trigger.panMove.addHandler(function(n,t){return r.onPanMove(t)});this._trigger.panEnd.addHandler(function(n,t){return r.onPanEnd(t)});this._trigger.swipe.addHandler(function(n,t){return r.onSwipe(t)});this._pinchTrigger=new n._PinchTrigger(t);this._pinchTrigger.pinch.addHandler(function(n,t){return r.onPinch(t)});this.removeDefaultTouch=i}return t._isTouchEvent=function(n){return n instanceof TouchEvent||(n.pointerType||'').toLowerCase()===t._touchPointerName},t._isTouchStart=function(i){return t._eventTypeContains(i,n._getTouchEventMap().startName)},t._isTouchEnd=function(i){return t._eventTypeContains(i,n._getTouchEventMap().endName)},t._isTouchMove=function(i){return t._eventTypeContains(i,n._getTouchEventMap().moveName)},t._eventTypeContains=function(n,t){var r=t.split(','),i,u,f;for(n=n.toLowerCase(),i=0,u=r.length;i<u;i++)if(f=r[i].trim().toLowerCase(),n.indexOf(f)>-1)return!0;return!1},t._registerTouchInfo=function(i){var f,r,u;if(t._isTouchEvent(i)){if(i instanceof TouchEvent){for(t._allTouchInfos=[],f=0,u=i.touches.length;f<u;f++)t._allTouchInfos.push(new n._TouchInfo(i.touches.item(f)));return}if(i instanceof PointerEvent){if(t._allTouchInfos=t._allTouchInfos||[],t._isTouchEnd(i.type)){for(r=0,u=t._allTouchInfos.length;r<u;r++)if(t._allTouchInfos[r].id==i.pointerId){t._allTouchInfos.splice(r,1);return}return}for(r=0,u=t._allTouchInfos.length;r<u;r++)if(t._allTouchInfos[r].id==i.pointerId){t._allTouchInfos[r]=new n._TouchInfo(i);return}t._allTouchInfos.push(new n._TouchInfo(i))}}},t.prototype.onPinch=function(n){this.pinch.raise(this,n)},t.prototype.onSwipe=function(n){this.swipe.raise(this,n)},t.prototype.onTouchEnd=function(n){this.touchEnd.raise(this,n)},t.prototype.onTouchStart=function(n){this.touchStart.raise(this,n)},t.prototype.onTouchMove=function(n){this.touchMove.raise(this,n)},t.prototype.onPanEnd=function(n){this.panEnd.raise(this,n)},t.prototype.onPanStart=function(n){this.panStart.raise(this,n)},t.prototype.onPanMove=function(n){this.panMove.raise(this,n)},Object.defineProperty(t.prototype,"removeDefaultTouch",{get:function(){return this._removeDefaultTouch},set:function(n){this._removeDefaultTouch=n;var t=this.hostElement.style;n?(t.touchAction='none',t.msTouchAction='none'):(t.touchAction=this._defaultTouchAction,t.msTouchAction=this._defaultMsTouchAction)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._pinchTrigger.hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentElement",{get:function(){return this.hostElement.children.length?this.hostElement.children[0]:null},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._pinchTrigger&&this._pinchTrigger.dispose();this._trigger&&this._trigger.dispose();this.removeDefaultTouch&&(this.removeDefaultTouch=!1)},t}();t._touchPointerName='touch';t._allTouchInfos=[];n._TouchManager=t})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var r=function(i){function r(r){var u=i.call(this,r)||this,f,e;return u._uiUpdating=!1,f='Missing dependency: _PageSetupEditor requires ',n.assert(n.input.ComboBox!=null,f+'wijmo.input.'),e=u.getTemplate(),u.applyTemplate('wj-control wj-content',e,{_divPaperKind:'div-paper-kind',_divOrientation:'div-page-orientation',_divMarginsLeft:'div-margins-left',_divMarginsRight:'div-margins-right',_divMarginsTop:'div-margins-top',_divMarginsBottom:'div-margins-bottom',_gPaperKind:'g-paperkind',_gOrientation:'g-orientation',_gMargins:'g-margins',_gLeft:'g-left',_gRight:'g-right',_gTop:'g-top',_gBottom:'g-bottom'}),u._numMarginsLeft=new n.input.InputNumber(u._divMarginsLeft),u._numMarginsLeft.valueChanged.addHandler(u._updateValue,u),u._numMarginsRight=new n.input.InputNumber(u._divMarginsRight),u._numMarginsRight.valueChanged.addHandler(u._updateValue,u),u._numMarginsTop=new n.input.InputNumber(u._divMarginsTop),u._numMarginsTop.valueChanged.addHandler(u._updateValue,u),u._numMarginsBottom=new n.input.InputNumber(u._divMarginsBottom),u._numMarginsBottom.valueChanged.addHandler(u._updateValue,u),u._cmbPaperKind=new n.input.ComboBox(u._divPaperKind,{itemsSource:t._enumToArray(t._PaperKind),displayMemberPath:'text',selectedValuePath:'value',isEditable:!1}),u._cmbPaperKind.selectedIndexChanged.addHandler(u._updateValue,u),u._cmbOrientation=new n.input.ComboBox(u._divOrientation,{itemsSource:[n.culture.Viewer.portrait,n.culture.Viewer.landscape],isEditable:!1}),u._cmbOrientation.selectedIndexChanged.addHandler(u._updateValue,u),u._globalize(),u}return __extends(r,i),Object.defineProperty(r.prototype,"pageSettings",{get:function(){return this._pageSettings},set:function(n){var i=t._clonePageSettings(n);this._pageSettings=i;this._updateUI();this._cmbPaperKind.focus()},enumerable:!0,configurable:!0}),r.prototype._globalize=function(){var t=n.culture.Viewer,i;this._gPaperKind.textContent=t.paperKind;this._gOrientation.textContent=t.orientation;this._gMargins.textContent=t.margins;this._gLeft.textContent=t.left;this._gRight.textContent=t.right;this._gTop.textContent=t.top;this._gBottom.textContent=t.bottom;i=this._cmbOrientation.selectedIndex;this._cmbOrientation.itemsSource=[n.culture.Viewer.portrait,n.culture.Viewer.landscape];this._cmbOrientation.selectedIndex=i},r.prototype._updateValue=function(){if(!this._uiUpdating){var i=this.pageSettings;i&&(i.bottomMargin=new t._Unit(this._numMarginsBottom.value,t._UnitType.Inch),i.leftMargin=new t._Unit(this._numMarginsLeft.value,t._UnitType.Inch),i.rightMargin=new t._Unit(this._numMarginsRight.value,t._UnitType.Inch),i.topMargin=new t._Unit(this._numMarginsTop.value,t._UnitType.Inch),i.paperSize=this._cmbPaperKind.selectedValue,t._setLandscape(i,this._cmbOrientation.text===n.culture.Viewer.landscape),this._updateUI())}},r.prototype._updateUI=function(){this._uiUpdating=!0;var i=this.pageSettings,r=function(n,i){n.value=t._Unit.convertValue(i.value,i.units,t._UnitType.Inch)};i&&(this._cmbPaperKind.selectedValue=i.paperSize,this._cmbOrientation.text=i.landscape?n.culture.Viewer.landscape:n.culture.Viewer.portrait,r(this._numMarginsLeft,i.leftMargin),r(this._numMarginsRight,i.rightMargin),r(this._numMarginsTop,i.topMargin),r(this._numMarginsBottom,i.bottomMargin));this._uiUpdating=!1},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&this._globalize()},r}(n.Control),i;r.controlTemplate='<div><div style="padding:12px;"><table style="table-layout:fixed"><tr><td wj-part="g-paperkind"><\/td><td><div wj-part="div-paper-kind"><\/div><\/td><\/tr><tr><td wj-part="g-orientation"><\/td><td><div wj-part="div-page-orientation"><\/div><\/td><\/tr><\/table><fieldset style="margin-top: 12px"><legend wj-part="g-margins"><\/legend><table style="table-layout:fixed"><tr><td wj-part="g-left"><\/td><td><div wj-part="div-margins-left"><\/div><\/td><\/tr><tr><td wj-part="g-right"><\/td><td><div wj-part="div-margins-right"><\/div><\/td><\/tr><tr><td wj-part="g-top"><\/td><td><div wj-part="div-margins-top"><\/div><\/td><\/tr><tr><td wj-part="g-bottom"><\/td><td><div wj-part="div-margins-bottom"><\/div><\/td><\/tr><\/table><\/fieldset><\/div><\/div>';t._PageSetupEditor=r;i=function(i){function r(t){var r=i.call(this,t)||this;return r._options={},r._optionLabels=null,r._groupTitleField=null,n.addClass(t,'wj-export-editor'),r}return __extends(r,i),Object.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"exportDescription",{get:function(){return this._exportDescription},set:function(n){(this._exportDescription=n,this._options={},n)&&(this._options.format=this.exportDescription.format,this._render())},enumerable:!0,configurable:!0}),r.prototype._skipOption=function(n){return r._skippedOptions.indexOf(n)>=0},r.prototype._render=function(){var u,n,e;if(t._removeChildren(this.hostElement),this.exportDescription){var o=document.createElement('table'),f=this.exportDescription.optionDescriptions,i={};for(u=0;u<f.length;u++)if(n=f[u],!this._skipOption(n.name)){if(n.group){i[n.group]||(i[n.group]=[]);i[n.group].push(n);continue}i[r._generalGroupName]||(i[r._generalGroupName]=[]);n.group=r._generalGroupName;i[r._generalGroupName].push(n)}for(e in i)this.hostElement.appendChild(this._generateGroup(i[e]));this._updateEditors()}},r.prototype._generateEditor=function(i){var u;if(n.isArray(i.allowedValues))u=this._generateComboEditor(i);else switch(i.type){case'bool':u=this._generateBoolEditor(i);break;case'int':case'float':u=this._generateNumberEditor(i);break;case'unit':i.defaultValue=new t._Unit(i.defaultValue);case'string':default:u=this._generateStringEditor(i)}return u.setAttribute(r._optionIdAttr,i.name),u},r.prototype._generateComboEditor=function(t){for(var e=this,i,u=[],f=document.createElement('div'),r=0;r<t.allowedValues.length;r++)u.push(t.allowedValues[r]);return i=new n.input.ComboBox(f),i.isEditable=!1,i.itemsSource=u,i.selectedValue=t.defaultValue,i.selectedIndexChanged.addHandler(function(n){e._setOptionValue(t.name,n.selectedValue.toString())}),f},r.prototype._generateBoolEditor=function(i){var e=this,r,u,f,o;return i.nullable?(r=document.createElement('div'),u=new n.input.ComboBox(r),f=[],u.isEditable=!1,u.displayMemberPath='name',u.selectedValuePath='value',f.push({name:'None',value:null}),f.push({name:'True',value:!0}),f.push({name:'False',value:!1}),u.itemsSource=f,u.selectedValue=i.defaultValue,u.selectedIndexChanged.addHandler(function(n){e._setOptionValue(i.name,n.selectedValue);e._updateEditors(i.name)})):(r=document.createElement('input'),r.type='checkbox',o=n.changeType(i.defaultValue,n.DataType.Boolean,null),r.checked=o,t._addEvent(r,'click',function(){e._setOptionValue(i.name,r.checked);e._updateEditors(i.name)})),r},r.prototype._generateNumberEditor=function(t){var u=this,r,i,f=t.type==='int';return r=document.createElement('div'),i=new n.input.InputNumber(r),i.format=f?'n0':'n2',i.isRequired=!t.nullable,i.value=t.defaultValue,i.valueChanged.addHandler(function(n){u._setOptionValue(t.name,n.value)}),r},r.prototype._generateStringEditor=function(n){var r=this,i;return i=document.createElement('input'),i.type=n.name.match(/password/i)?'password':'text',i.value=n.defaultValue,t._addEvent(i,'change,keyup,paste,input',function(){r._setOptionValue(n.name,i.value)}),i},r.prototype._generateGroup=function(t){var i=document.createElement('fieldset'),f=document.createElement('legend'),c=t[0].group,e,u;for(n.addClass(i,'wj-exportformats-group'),f.innerHTML=this._groupTitle[c],f.setAttribute(r._optionNameAttr,c),i.appendChild(f),e=document.createElement('table'),u=0;u<t.length;u++){var o=t[u],s=document.createElement('tr'),h=document.createElement('td'),l=document.createElement('td');h.innerHTML=this._getOptionLabel(o.name);h.setAttribute(r._optionNameAttr,o.name);l.appendChild(this._generateEditor(o));s.appendChild(h);s.appendChild(l);e.appendChild(s)}return i.appendChild(e),i},r.prototype._updateEditors=function(t){var i,f,u,e;if(t==='pdfACompatible'||!t){i=this.hostElement.querySelector('['+r._optionIdAttr+'="embedFonts"]');i&&(f=n.changeType(this._getOptionValue('pdfACompatible'),n.DataType.Boolean,null),f?(this._previousEmbedFonts=i.checked,i.checked=!0,this._setOptionValue('embedFonts',!0)):(i.checked=this._previousEmbedFonts,this._setOptionValue('embedFonts',this._previousEmbedFonts)),i.disabled=f);return}t!=='paged'&&t||(u=this.hostElement.querySelector('['+r._optionIdAttr+'="showNavigator"]'),u&&(e=n.changeType(this._getOptionValue('paged'),n.DataType.Boolean,null),e?(u.checked=this._previousShowNavigator,this._setOptionValue('showNavigator',this._previousShowNavigator)):(this._previousShowNavigator=u.checked,u.checked=!1,this._setOptionValue('showNavigator',!1)),u.disabled=!e))},r.prototype._getOptionLabel=function(n){var t=this._optionLabelsText[n];return t?t:n[0].toUpperCase()+n.substring(1)},r.prototype._getOptionDescByName=function(n){var t=null;return this._exportDescription.optionDescriptions.some(function(i){return i.name===n?(t=i,!0):!1}),t},r.prototype._getOptionValue=function(n){return this._options[n]!==undefined?this._options[n]:this._getOptionDescByName(n).defaultValue},r.prototype._setOptionValue=function(n,t){var i=this._getOptionDescByName(n),r=i.defaultValue;if(i.type==='unit'&&(r=i.defaultValue.toString()),t===r){this._options[n]!==undefined&&delete this._options[n];return}this._options[n]=t},Object.defineProperty(r.prototype,"_optionLabelsText",{get:function(){return this._optionLabels||(this._optionLabels={title:n.culture.Viewer.docInfoTitle,author:n.culture.Viewer.docInfoAuthor,manager:n.culture.Viewer.docInfoManager,operator:n.culture.Viewer.docInfoOperator,company:n.culture.Viewer.docInfoCompany,subject:n.culture.Viewer.docInfoSubject,comment:n.culture.Viewer.docInfoComment,creator:n.culture.Viewer.docInfoCreator,producer:n.culture.Viewer.docInfoProducer,creationTime:n.culture.Viewer.docInfoCreationTime,revisionTime:n.culture.Viewer.docInfoRevisionTime,keywords:n.culture.Viewer.docInfoKeywords,embedFonts:n.culture.Viewer.embedFonts,pdfACompatible:n.culture.Viewer.pdfACompatible,useCompression:n.culture.Viewer.useCompression,useOutlines:n.culture.Viewer.useOutlines,allowCopyContent:n.culture.Viewer.allowCopyContent,allowEditAnnotations:n.culture.Viewer.allowEditAnnotations,allowEditContent:n.culture.Viewer.allowEditContent,allowPrint:n.culture.Viewer.allowPrint,ownerPassword:n.culture.Viewer.ownerPassword,userPassword:n.culture.Viewer.userPassword,encryptionType:n.culture.Viewer.encryptionType,paged:n.culture.Viewer.paged,showNavigator:n.culture.Viewer.showNavigator,navigatorPosition:n.culture.Viewer.navigatorPosition,singleFile:n.culture.Viewer.singleFile,tolerance:n.culture.Viewer.tolerance,pictureLayer:n.culture.Viewer.pictureLayer,metafileType:n.culture.Viewer.metafileType,monochrome:n.culture.Viewer.monochrome,resolution:n.culture.Viewer.resolution,outputRange:n.culture.Viewer.outputRange,outputRangeInverted:n.culture.Viewer.outputRangeInverted}),this._optionLabels},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_groupTitle",{get:function(){return this._groupTitleField||(this._groupTitleField={documentRestrictions:n.culture.Viewer.documentRestrictionsGroup,passwordSecurity:n.culture.Viewer.passwordSecurityGroup,outputRange:n.culture.Viewer.outputRangeGroup,documentInfo:n.culture.Viewer.documentInfoGroup,general:n.culture.Viewer.generalGroup}),this._groupTitleField},enumerable:!0,configurable:!0}),r.prototype._globalize=function(){for(var n,i=this.hostElement.querySelectorAll('['+r._optionNameAttr+']'),t=0;t<i.length;t++){if(n=i[t],n instanceof HTMLLegendElement){n.innerHTML=this._groupTitle[n.getAttribute(r._optionNameAttr)];continue}n.innerHTML=this._getOptionLabel(n.getAttribute(r._optionNameAttr))}},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&(this._optionLabels=null,this._groupTitleField=null,this._globalize())},r}(n.Control);i._optionIdAttr='option-id';i._optionNameAttr='option-name';i._skippedOptions=['shapesWord2007Compatible','sheetName','navigatorPositions'];i._generalGroupName='general';t._ExportOptionEditor=i})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var r=function(i){function r(r){var u=i.call(this,r)||this,f;return u.svgButtonClicked=new n.Event,f=u.getTemplate(),u.applyTemplate('wj-toolbar',f,{_toolbarWrapper:'toolbar-wrapper',_toolbarContainer:'toolbar-container',_toolbarLeft:'toolbar-left',_toolbarRight:'toolbar-right'}),t._addEvent(u._toolbarLeft,'mouseover',function(){u._scrollLeft()}),t._addEvent(u._toolbarLeft,'mouseout',function(){u._clearToolbarMoveTimer()}),t._addEvent(u._toolbarRight,'mouseover',function(){u._scrollRight()}),t._addEvent(u._toolbarRight,'mouseout',function(){u._clearToolbarMoveTimer()}),u}return __extends(r,i),r.prototype.applyTemplate=function(i,r,u){var e=this.hostElement,f,o;if(n.addClass(e,i),e.appendChild(t._toDOMs(r)),u)for(f in u)if(o=u[f],this[f]=e.querySelector('[wj-part="'+o+'"]'),this[f]==null&&e.getAttribute('wj-part')==o&&(this[f]=r),this[f]==null)throw'Missing template part: "'+o+'"';return e},r.prototype._clearToolbarMoveTimer=function(){this._toolbarMoveTimer!=null&&(clearTimeout(this._toolbarMoveTimer),this._toolbarMoveTimer=null)},r.prototype._scrollRight=function(){var t=this,i=this._toolbarRight.getBoundingClientRect().width,u=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-i-r._moveStep;(this._checkMoveButtonEnabled(),n<u)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return t._scrollRight()},r._moveInterval))},r.prototype._scrollLeft=function(){var t=this,i=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-i+r._moveStep;(this._checkMoveButtonEnabled(),n>0)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return t._scrollLeft()},r._moveInterval))},r.prototype._checkMoveButtonEnabled=function(){var f=this._toolbarLeft.getBoundingClientRect().width,t=this._toolbarWrapper.offsetLeft-f+r._moveStep,e=t<=0,i=n.hasClass(this._toolbarLeft,r._enabledCss);e?i||n.addClass(this._toolbarLeft,r._enabledCss):i&&n.removeClass(this._toolbarLeft,r._enabledCss);var o=this._toolbarRight.getBoundingClientRect().width,s=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,t=this._toolbarWrapper.offsetLeft-o-r._moveStep,h=t>=s,u=n.hasClass(this._toolbarRight,r._enabledCss);h?u||n.addClass(this._toolbarRight,r._enabledCss):u&&n.removeClass(this._toolbarRight,r._enabledCss)},r.prototype._showToolbarMoveButton=function(n){var t=n?'visible':'hidden';this._toolbarLeft.style.visibility=t;this._toolbarRight.style.visibility=t;this._checkMoveButtonEnabled()},r.prototype._globalize=function(){},r.prototype.resetWidth=function(){var i=this._toolbarLeft.getBoundingClientRect().width,r=this._toolbarRight.getBoundingClientRect().width,u=this.hostElement.getBoundingClientRect().width,n,t;this._toolbarContainer.style.width='1500px';this._toolbarWrapper.style.width='auto';n=this._toolbarWrapper.getBoundingClientRect().width+2;this._toolbarWrapper.style.width=n+'px';this._toolbarContainer.style.width=u-i-r+'px';t=i+r+n>u;this._showToolbarMoveButton(t);t||(this._toolbarWrapper.style.left='0px')},r.prototype.addSeparator=function(){var n=document.createElement('span');return n.className='wj-separator',this._toolbarWrapper.appendChild(n),n},r.prototype.onSvgButtonClicked=function(n){this.svgButtonClicked.raise(this,n)},r.prototype.addCustomItem=function(i,r){n.isString(i)&&(i=t._toDOM(i));r!=null&&i.setAttribute(t._commandTagAttr,r.toString());this._toolbarWrapper.appendChild(i)},r.prototype.addSvgButton=function(i,r,u,f){var o=this,e=t._createSvgBtn(r);return e.title=i,e.setAttribute(t._commandTagAttr,u.toString()),this._toolbarWrapper.appendChild(e),t._addEvent(e,'click,keydown',function(i){var r=i||window.event,s=r.type==='keydown'&&r.keyCode===n.Key.Enter||r.type==='click';if(s&&!t._isDisabledImageButton(e)&&(f||!t._isCheckedImageButton(e)))o.onSvgButtonClicked({commandTag:u})}),e},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&this._globalize()},r}(n.Control),i,f,e,u,o,s,h;r._moveStep=2;r._moveInterval=5;r._enabledCss='enabled';r.controlTemplate='<div class="wj-toolbar-move left" wj-part="toolbar-left"><span class="wj-glyph-left"><\/span><\/div><div class="wj-toolbarcontainer" wj-part="toolbar-container"><div class="wj-toolbarwrapper wj-btn-group" wj-part="toolbar-wrapper"><\/div><\/div><div class="wj-toolbar-move right" wj-part="toolbar-right"><span class="wj-glyph-right"><\/span><\/div>';t._Toolbar=r;i=function(i){function r(n,r){var u=i.call(this,n)||this,f;return u._viewer=r,u._initToolbarItems(),f=function(){return u.isDisabled=!u._viewer._getDocumentSource()},u._viewer._documentSourceChanged.addHandler(f),f(),u._viewer._viewerActionStatusChanged.addHandler(function(n,i){var r=i.action,f=u.hostElement.querySelector('[command-tag="'+r.actionType.toString()+'"]');t._checkImageButton(f,r.checked);t._disableImageButton(f,r.disabled);t._showImageButton(f,r.shown);t._checkSeparatorShown(u._toolbarWrapper)}),u}return __extends(r,i),r.prototype._initToolbarItems=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype.onSvgButtonClicked=function(n){i.prototype.onSvgButtonClicked.call(this,n);this._viewer._executeAction(parseInt(n.commandTag))},Object.defineProperty(r.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),r._initToolbarZoomValue=function(i,r){var c=n.Control.getControl(i),s=document.createElement('div'),u,h,e,o,f=t.ViewerBase._defaultZoomValues;s.className='wj-input-zoom';c.addCustomItem(s,t._ViewerActionType.ZoomValue);u=new n.input.ComboBox(s);u.deferUpdate(function(){for(e=0;e<f.length;e++)for(o=e+1;o<f.length;o++)f[e].value>f[o].value&&(h=f[e],f[e]=f[o],f[o]=h);u.itemsSource=f;u.isEditable=!0;u.displayMemberPath='name';u.selectedValuePath='value';u.selectedValue=1});u.selectedIndexChanged.addHandler(function(){var n,t;u.isDroppedDown&&(n=u.selectedValue,n==null&&(t=u.text.replace(",",""),n=parseFloat(t),isNaN(n)&&(n=100),n=n*.01),r.zoomFactor=n)});t._addEvent(s,'keypress',function(t){var e=t||window.event,i=u.text,f;e.keyCode===n.Key.Enter&&(i.lastIndexOf('%')===i.length-1&&(i=i.substring(0,u.text.length-1)),i=i.replace(",",""),f=parseFloat(i),isNaN(f)?u.text=n.Globalize.format(r.zoomFactor,'p0'):r.zoomFactor=f*.01)});t._addEvent(s.querySelector('.wj-form-control'),'blur',function(){u.text=n.Globalize.format(r.zoomFactor,'p0')});r.zoomFactorChanged.addHandler(function(){u.isDroppedDown=!1;u.text=n.Globalize.format(r.zoomFactor,'p0')})},r._initToolbarPageNumberInput=function(i,r){var e=n.Control.getControl(i),f=document.createElement('div'),o=document.createElement('span'),u,h=function(){var n=r._getDocumentSource();n&&n.pageCount!=null&&(u.value=r.pageIndex+1)},s=function(){var n=r._getDocumentSource();n&&n.pageCount!=null&&(o.innerHTML=n.pageCount.toString(),u.max=n.pageCount,u.min=Math.min(n.pageCount,1),h())},c=function(){var n=r._getDocumentSource();n&&(s(),t._addWjHandler(r._documentEventKey,n.pageCountChanged,s),t._addWjHandler(r._documentEventKey,n.loadCompleted,s))};f.className='wj-pagenumber';e.addCustomItem(f,t._ViewerActionType.PageNumber);u=new n.input.InputNumber(f);u.format='n0';t._addEvent(f,'keyup',function(t){var i=t||window.event;i.keyCode===n.Key.Enter&&r.moveToPage(u.value-1)});t._addEvent(u.inputElement,'blur',function(){r.moveToPage(u.value-1)});e.addCustomItem('<span class="slash">/</span>');o.className='wj-pagecount';e.addCustomItem(o,t._ViewerActionType.PageCountLabel);r.pageIndexChanged.addHandler(h);r._getDocumentSource()&&c();r._documentSourceChanged.addHandler(c)},r}(r);t._ViewerToolbarBase=i;f=function(r){function u(n,t){return r.call(this,n,t)||this}return __extends(u,r),u.prototype._globalize=function(){var t=n.culture.Viewer;this._gPaginated.title=t.paginated;this._gPrint.title=t.print;this._gExports.title=t.exports;this._gPortrait.title=t.portrait;this._gLandscape.title=t.landscape;this._gPageSetup.title=t.pageSetup;this._gFirstPage.title=t.firstPage;this._gPreviousPage.title=t.previousPage;this._gNextPage.title=t.nextPage;this._gLastPage.title=t.lastPage;this._gBackwardHistory.title=t.backwardHistory;this._gForwardHistory.title=t.forwardHistory;this._gSelectTool.title=t.selectTool;this._gMoveTool.title=t.moveTool;this._gContinuousMode.title=t.continuousMode;this._gSingleMode.title=t.singleMode;this._gWholePage.title=t.wholePage;this._gPageWidth.title=t.pageWidth;this._gZoomOut.title=t.zoomOut;this._gZoomIn.title=t.zoomIn;this._gRubberbandTool.title=t.rubberbandTool;this._gMagnifierTool.title=t.magnifierTool;this._gRotateDocument.title=t.rotateDocument;this._gRotatePage.title=t.rotatePage;this._gFullScreen.title=t.fullScreen},u.prototype._initToolbarItems=function(){this._gPaginated=this.addSvgButton(n.culture.Viewer.paginated,t.icons.paginated,t._ViewerActionType.TogglePaginated,!0);this._gPrint=this.addSvgButton(n.culture.Viewer.print,t.icons.print,t._ViewerActionType.Print);this._gExports=this.addSvgButton(n.culture.Viewer.exports,t.icons.exports,t._ViewerActionType.ShowExportsPanel);this.addSeparator();this._gPortrait=this.addSvgButton(n.culture.Viewer.portrait,t.icons.portrait,t._ViewerActionType.Portrait);this._gLandscape=this.addSvgButton(n.culture.Viewer.landscape,t.icons.landscape,t._ViewerActionType.Landscape);this._gPageSetup=this.addSvgButton(n.culture.Viewer.pageSetup,t.icons.pageSetup,t._ViewerActionType.ShowPageSetupDialog);this.addSeparator();this._gFirstPage=this.addSvgButton(n.culture.Viewer.firstPage,t.icons.firstPage,t._ViewerActionType.FirstPage);this._gPreviousPage=this.addSvgButton(n.culture.Viewer.previousPage,t.icons.previousPage,t._ViewerActionType.PrePage);this._gNextPage=this.addSvgButton(n.culture.Viewer.nextPage,t.icons.nextPage,t._ViewerActionType.NextPage);this._gLastPage=this.addSvgButton(n.culture.Viewer.lastPage,t.icons.lastPage,t._ViewerActionType.LastPage);i._initToolbarPageNumberInput(this.hostElement,this.viewer);this.addSeparator();this._gBackwardHistory=this.addSvgButton(n.culture.Viewer.backwardHistory,t.icons.backwardHistory,t._ViewerActionType.Backward);this._gForwardHistory=this.addSvgButton(n.culture.Viewer.forwardHistory,t.icons.forwardHistory,t._ViewerActionType.Forward);this.addSeparator();this._gSelectTool=this.addSvgButton(n.culture.Viewer.selectTool,t.icons.selectTool,t._ViewerActionType.SelectTool);this._gMoveTool=this.addSvgButton(n.culture.Viewer.moveTool,t.icons.moveTool,t._ViewerActionType.MoveTool);this._gContinuousMode=this.addSvgButton(n.culture.Viewer.continuousMode,t.icons.continuousView,t._ViewerActionType.Continuous);this._gSingleMode=this.addSvgButton(n.culture.Viewer.singleMode,t.icons.singleView,t._ViewerActionType.Single);this.addSeparator();this._gWholePage=this.addSvgButton(n.culture.Viewer.wholePage,t.icons.fitWholePage,t._ViewerActionType.FitWholePage);this._gPageWidth=this.addSvgButton(n.culture.Viewer.pageWidth,t.icons.fitPageWidth,t._ViewerActionType.FitPageWidth);this._gZoomOut=this.addSvgButton(n.culture.Viewer.zoomOut,t.icons.zoomOut,t._ViewerActionType.ZoomOut);this._gZoomIn=this.addSvgButton(n.culture.Viewer.zoomIn,t.icons.zoomIn,t._ViewerActionType.ZoomIn);this._gRubberbandTool=this.addSvgButton(n.culture.Viewer.rubberbandTool,t.icons.rubberbandTool,t._ViewerActionType.RubberbandTool);this._gMagnifierTool=this.addSvgButton(n.culture.Viewer.magnifierTool,t.icons.magnifierTool,t._ViewerActionType.MagnifierTool);this._gRotateDocument=this.addSvgButton(n.culture.Viewer.rotateDocument,t.icons.rotateDocument,t._ViewerActionType.RotateDocument);this._gRotatePage=this.addSvgButton(n.culture.Viewer.rotatePage,t.icons.rotatePage,t._ViewerActionType.RotatePage);i._initToolbarZoomValue(this.hostElement,this.viewer);this._gFullScreen=this.addSvgButton(n.culture.Viewer.fullScreen,t.icons.fullScreen,t._ViewerActionType.ToggleFullScreen,!0)},u}(i);t._ViewerToolbar=f;e=function(r){function u(n,t){return r.call(this,n,t)||this}return __extends(u,r),u.prototype._initToolbarItems=function(){this._gPrint=this.addSvgButton(n.culture.Viewer.print,t.icons.print,t._ViewerActionType.Print);this.addSeparator();this._gPreviousPage=this.addSvgButton(n.culture.Viewer.previousPage,t.icons.previousPage,t._ViewerActionType.PrePage);this._gNextPage=this.addSvgButton(n.culture.Viewer.nextPage,t.icons.nextPage,t._ViewerActionType.NextPage);i._initToolbarPageNumberInput(this.hostElement,this.viewer);this.addSeparator();this._gZoomOut=this.addSvgButton(n.culture.Viewer.zoomOut,t.icons.zoomOut,t._ViewerActionType.ZoomOut);this._gZoomIn=this.addSvgButton(n.culture.Viewer.zoomIn,t.icons.zoomIn,t._ViewerActionType.ZoomIn);this._gExitFullScreen=this.addSvgButton(n.culture.Viewer.exitFullScreen,t.icons.exitFullScreen,t._ViewerActionType.ToggleFullScreen,!0)},u.prototype._globalize=function(){var t=n.culture.Viewer;this._gPrint.title=t.print;this._gPreviousPage.title=t.previousPage;this._gNextPage.title=t.nextPage;this._gZoomOut.title=t.zoomOut;this._gZoomIn.title=t.zoomIn;this._gExitFullScreen.title=t.exitFullScreen},u}(i);t._ViewerMiniToolbar=e;u=function(t){function i(i,r){var u=t.call(this,i,r)||this;return n.addClass(u.hostElement,'mobile'),u}return __extends(i,t),i}(i);t._ViewerMobileToolbarBase=u;o=function(r){function u(n,t){return r.call(this,n,t)||this}return __extends(u,r),u.prototype._initToolbarItems=function(){this._gShowHamburgerMenu=this.addSvgButton(n.culture.Viewer.hamburgerMenu,t.icons.hamburgerMenu,t._ViewerActionType.ShowHamburgerMenu);this.viewer._initHamburgerMenu(this._gShowHamburgerMenu);this._gPrevPage=this.addSvgButton(n.culture.Viewer.previousPage,t.icons.previousPage,t._ViewerActionType.PrePage);this._gNextPage=this.addSvgButton(n.culture.Viewer.nextPage,t.icons.nextPage,t._ViewerActionType.NextPage);i._initToolbarPageNumberInput(this.hostElement,this.viewer);this._gShowViewMenu=this.addSvgButton(n.culture.Viewer.viewMenu,t.icons.viewMenu,t._ViewerActionType.ShowViewMenu);this.viewer._initViewMenu(this._gShowViewMenu);this._gShowSearchBar=this.addSvgButton(n.culture.Viewer.showSearchBar,t.icons.search,t._ViewerActionType.ShowSearchBar,!0);this._gFullScreen=this.addSvgButton(n.culture.Viewer.fullScreen,t.icons.fullScreen,t._ViewerActionType.ToggleFullScreen,!0)},u.prototype._globalize=function(){var t=n.culture.Viewer;this._gShowHamburgerMenu.title=t.hamburgerMenu;this._gPrevPage.title=t.previousPage;this._gNextPage.title=t.nextPage;this._gShowViewMenu.title=t.viewMenu;this._gShowSearchBar.title=t.showSearchBar;this._gFullScreen.title=t.fullScreen},u}(u);t._ViewerMobileToolbar=o;s=function(r){function u(t,i){var u=r.call(this,t,i)||this;return n.addClass(u.hostElement,'wj-zoombar'),u}return __extends(u,r),u.prototype._initToolbarItems=function(){this._gZoomOut=this.addSvgButton(n.culture.Viewer.zoomOut,t.icons.zoomOut,t._ViewerActionType.ZoomOut);i._initToolbarZoomValue(this.hostElement,this.viewer);this._gZoomIn=this.addSvgButton(n.culture.Viewer.zoomIn,t.icons.zoomIn,t._ViewerActionType.ZoomIn)},u.prototype._globalize=function(){var t=n.culture.Viewer;this._gZoomOut.title=t.zoomOut;this._gZoomIn.title=t.zoomIn},u}(u);t._ViewerZoomBar=s;h=function(i){function r(n,t){return i.call(this,n,t)||this}return __extends(r,i),r.prototype._initToolbarItems=function(){this._gSearchOptions=this.addSvgButton(n.culture.Viewer.searchOptions,t.icons.searchOptions,t._ViewerActionType.ShowSearchOptions);this.viewer._initSearchOptionsMenu(this._gSearchOptions);this._initSearchInput();this._initSearchBtnGroups()},r.prototype._initSearchInput=function(){var i=this,u='<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-search">'+t._createSvgBtn(t.icons.search).innerHTML+"<\/button><\/div><\/div>",n=t._toDOM(u),r=n.querySelector('input[type="text"]'),f=n.querySelector('.wj-btn-search');t._addEvent(r,'input',function(){i.viewer._searchManager.text=r.value});t._addEvent(f,'click',function(){i.viewer._searchManager.search()});this.addCustomItem(n)},r.prototype._initSearchBtnGroups=function(){var i=t._toDOM('<div class="wj-searchbtn-groups wj-btn-group wj-toolbarwrapper"><\/div>');this._gSearchPrev=this.addSvgButton(n.culture.Viewer.searchPrev,t.icons.searchLeft,t._ViewerActionType.SearchPrev);this._gSearchNext=this.addSvgButton(n.culture.Viewer.searchNext,t.icons.searchRight,t._ViewerActionType.SearchNext);i.appendChild(this._gSearchPrev);i.appendChild(this._gSearchNext);this.addCustomItem(i)},r.prototype._globalize=function(){var t=n.culture.Viewer;this._gSearchOptions.title=t.searchOptions;this._gSearchPrev.title=t.searchPrev;this._gSearchNext.title=t.searchNext},r}(u);t._SearchBar=h})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var f,r,h,i,u,e,o,s;(function(n){n[n.NoRotate=0]="NoRotate";n[n.Rotation90=1]="Rotation90";n[n.Rotation180=2]="Rotation180";n[n.Rotation270=3]="Rotation270"})(f=t._RotateAngle||(t._RotateAngle={}));r=function(){function i(t,i,r){this._content=null;this._rotateAngle=f.NoRotate;this.linkClicked=new n.Event;this._documentSource=t;this._index=i;this._size=r}return Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotateAngle",{get:function(){return this._rotateAngle},set:function(n){this._rotateAngle=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),i.prototype.getContent=function(){var i=this,r=new t._Promise,u=this._documentSource;return u?this._content?(r.resolve(this._content),r):(u.renderToFilter({format:'html',paged:u.paginated,outputRange:(this.index+1).toString()}).then(function(n){var o,f,s,e,h;if(i._documentSource===u){for(o=document.createElement('div'),o.innerHTML=i._addGlobalUniqueId(n.responseText),e=o.querySelector('section'),e&&e.style&&(h={width:new t._Unit(e.style.width),height:new t._Unit(e.style.height)}),f=o.querySelector('svg'),s=document.createElementNS('http://www.w3.org/2000/svg','g');f.hasChildNodes();)s.appendChild(f.firstChild);f.appendChild(s);i._size=h;i._content=f;i._replaceActionLinks(f);r.resolve(i._content)}}),r):(r.reject(n.culture.Viewer.cannotRenderPageNoDoc),r)},i.prototype._onLinkClicked=function(n){this.linkClicked.raise(this,n)},i.prototype._replaceActionLinks=function(n){for(var r,u,f,o=this,s=n.querySelectorAll('a'),e=0;e<s.length;e++)r=s.item(e),u=r.href?r.href.baseVal:'',u.indexOf('navigate')>0?(f=i._bookmarkReg.exec(u),f&&(f[1]&&f[1].length>0?(r.href.baseVal=i._invalidHref,r.setAttribute(i._bookmarkAttr,f[1]),t._addEvent(r,'click',function(){o._onLinkClicked(new t._LinkClickedEventArgs(this))})):r.removeAttribute("xlink:href"))):i._customActionReg.test(u)&&(r.href.baseVal=i._invalidHref,r.setAttribute(i._customActionAttr,u.substr(3)),t._addEvent(r,'click',function(){o._onLinkClicked(new t._LinkClickedEventArgs(this))}))},i.prototype._addGlobalUniqueId=function(n){var t=(new Date).getTime().toString();return n=n.replace(i._idReg,'$1$2'+t+'$3$4'),n.replace(i._idReferReg,'$1$2'+t+'$3$4')},i}();r._bookmarkReg=/javascript\:navigate\(['|"](.*)['|"]\)/;r._bookmarkAttr='bookmark';r._customActionReg=/^CA\:/;r._customActionAttr='customAction';r._idReg=/(\<[^\>]+)(id=['|"])(\w+)(['|"])/g;r._idReferReg=/(\<[^\>]+)(url\(#)(\w+)(\))/g;r._invalidHref='javascript:void(0)';t._Page=r;h=function(i){function r(r){var u=i.call(this,r)||this,f;return u._viewMode=t.ViewMode.Single,u.pageIndexChanged=new n.Event,u.zoomFactorChanged=new n.Event,u.zoomModeChanged=new n.Event,u.positionChanged=new n.Event,u.rotateAngleChanged=new n.Event,f=u.getTemplate(),u.applyTemplate('wj-viewpanel-container',f,{_singlePageView:'single-pageview',_continuousPageView:'continuous-pageview'}),u._initPageView(),u}return __extends(r,i),r.prototype.applyTemplate=function(i,r,u){var e=this.hostElement,f,o;if(n.addClass(e,i),e.appendChild(t._toDOMs(r)),u)for(f in u)if(o=u[f],this[f]=e.querySelector('[wj-part="'+o+'"]'),this[f]==null&&e.getAttribute('wj-part')==o&&(this[f]=r),this[f]==null)throw'Missing template part: "'+o+'"';return e},Object.defineProperty(r.prototype,"pageIndex",{get:function(){return this._activePageView.pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pages",{get:function(){return this._activePageView.pages},set:function(n){this._activePageView.pages=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zoomMode",{get:function(){return this._activePageView.zoomMode},set:function(n){this._activePageView.zoomMode=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zoomFactor",{get:function(){return this._activePageView.zoomFactor},set:function(n){this._activePageView.zoomFactor=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"panMode",{get:function(){return this._activePageView.panMode},set:function(n){this._activePageView.panMode=n},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"viewMode",{get:function(){return this._viewMode},set:function(n){this._viewMode!==n&&(this._viewMode=n,this._updateActivePageView())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollTop",{get:function(){return this._activePageView.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollLeft",{get:function(){return this._activePageView.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_activePageViewElement",{get:function(){return this.viewMode===t.ViewMode.Single?this._singlePageView:this._continuousPageView},enumerable:!0,configurable:!0}),r.prototype.onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},r.prototype.onZoomFactorChanged=function(n,t){this.zoomFactorChanged.raise(this,{oldValue:n,newValue:t})},r.prototype.onZoomModeChanged=function(n,t){this.zoomModeChanged.raise(this,{oldValue:n,newValue:t})},r.prototype.onPositionChanged=function(){this.positionChanged.raise(this)},r.prototype.onRotateAngleChanged=function(){this.rotateAngleChanged.raise(this)},r.prototype._updateActivePageView=function(){var t=this._activePageView.pageIndex,i=this._activePageView.pages,r=this._activePageView.zoomFactor,u=this._activePageView.zoomMode,f=this._activePageView.panMode;this._removePageViewHandlers(this._activePageView);this._activePageView=n.Control.getControl(this._activePageViewElement);this._addPageViewHandlers(this._activePageView);this._activePageView.pages||(this._activePageView.pages=i);this._activePageView.invalidate();this._activePageView.moveToPage(t);this._activePageView.zoomFactor=r;this._activePageView.zoomMode=u;this._activePageView.panMode=f;this._updatePageViewsVisible()},r.prototype._initPageView=function(){this._activePageView=new o(this._singlePageView);this._addPageViewHandlers(this._activePageView);new s(this._continuousPageView);this._updatePageViewsVisible()},r.prototype._addPageViewHandlers=function(){var n=this;this._activePageView.pageIndexChanged.addHandler(function(){n.onPageIndexChanged()});this._activePageView.zoomFactorChanged.addHandler(function(t,i){n.onZoomFactorChanged(i.oldValue,i.newValue)});this._activePageView.zoomModeChanged.addHandler(function(t,i){n.onZoomModeChanged(i.oldValue,i.newValue)});this._activePageView.positionChanged.addHandler(function(){n.onPositionChanged()});this._activePageView.rotateAngleChanged.addHandler(function(){n.onRotateAngleChanged()})},r.prototype._removePageViewHandlers=function(n){n.pageIndexChanged.removeHandler(this.onPageIndexChanged,this);n.zoomFactorChanged.removeHandler(this.onZoomFactorChanged,this);n.zoomModeChanged.removeHandler(this.onZoomModeChanged,this);n.positionChanged.removeHandler(this.onPositionChanged,this);n.rotateAngleChanged.removeHandler(this.onRotateAngleChanged,this)},r.prototype._updatePageViewsVisible=function(){var i=this.viewMode===t.ViewMode.Single;i?(n.removeClass(this._singlePageView,t._hiddenCss),n.hasClass(this._continuousPageView,t._hiddenCss)||n.addClass(this._continuousPageView,t._hiddenCss)):(n.removeClass(this._continuousPageView,t._hiddenCss),n.hasClass(this._singlePageView,t._hiddenCss)||n.addClass(this._singlePageView,t._hiddenCss))},r.prototype.moveToPage=function(n){return this._activePageView.moveToPage(n)},r.prototype.moveToPosition=function(n){return this._activePageView.moveToPosition(n)},r.prototype.rotatePageTo=function(n,t){this._activePageView.rotatePageTo(n,t)},r.prototype.hitTest=function(n,t){return this._activePageView.hitTest(n,t)},r.prototype.resetPages=function(){n.Control.getControl(this._singlePageView).resetPages();n.Control.getControl(this._continuousPageView).resetPages()},r.prototype.refresh=function(t){t===void 0&&(t=!0);i.prototype.refresh.call(this,t);n.Control.getControl(this._activePageViewElement).invalidate();this._activePageView.refresh()},r.prototype.isPageContentLoaded=function(n){return this._activePageView.isPageContentLoaded(n)},r}(n.Control);h.controlTemplate='<div class="wj-pageview" wj-part="single-pageview"><\/div><div class="wj-pageview" wj-part="continuous-pageview"><\/div>';t._CompositePageView=h;i=function(i){function r(r){var u=i.call(this,r)||this,f;return u._autoHeightCalculated=!1,u._startX=null,u._startY=null,u._panMode=!1,u._pageIndex=-1,u._zoomFactor=1,u._zoomMode=t.ZoomMode.Custom,u._zoomModeUpdating=!1,u.pageIndexChanged=new n.Event,u.zoomFactorChanged=new n.Event,u.zoomModeChanged=new n.Event,u.positionChanged=new n.Event,u.rotateAngleChanged=new n.Event,f=u.getTemplate(),u.applyTemplate('wj-pageview',f,u._getTemplateParts()),u._fBorderBoxMode=getComputedStyle(r).boxSizing==='border-box',u._init(),u}return __extends(r,i),r.prototype._getTemplateParts=function(){return{_pagesWrapper:'pages-wrapper'}},r.prototype._getPagesContainer=function(){return this.hostElement},r.prototype._init=function(){this._bindEvents()},r.prototype.dispose=function(){this._touchManager&&this._touchManager.dispose();i.prototype.dispose.call(this)},r.prototype._bindTouchEvents=function(n){var t=this;n.touchStart.addHandler(function(){t.hostElement.focus()});n.panMove.addHandler(function(t,i){n.hostElement.scrollTop-=i.clientDelta.y;n.hostElement.scrollLeft-=i.clientDelta.x});n.pinch.addHandler(this._zoomByPinch,this)},r.prototype._initTouchEvents=function(){var i=this._pagesWrapper.parentElement,n=new t._TouchManager(i);this._touchManager=n;this._bindTouchEvents(n)},Object.defineProperty(r.prototype,"_borderBoxMode",{get:function(){return this._fBorderBoxMode},enumerable:!0,configurable:!0}),r.prototype._zoomByPinch=function(i,r){if(r.preventDefault(),r.type==t._TouchEventType.Move){var u=n.getElementRect(i.contentElement),f=getComputedStyle(i.contentElement),e=parseInt(f.marginTop),o=parseInt(f.marginLeft),s=t._pointMove(!1,r.preCenterClient,u.left-o,u.top-e);this._zoom(i.hostElement,r.zoom,s,r.centerClientDelta)}},r.prototype._getFixedPosition=function(t){return new n.Point(r._pageMargin,r._pageMargin+this._getAbovePageCount(t.y)*r._pageMargin)},r.prototype._getAbovePageCount=function(){return 0},r.prototype._zoom=function(i,r,u,f){var h=t._pointMove(!1,u,i.scrollLeft,i.scrollTop),e=this._getFixedPosition(u),c=this.zoomFactor;this.zoomFactor=this.zoomFactor*r;var o=this.zoomFactor/c,l=new n.Point((u.x-e.x)*o+e.x,(u.y-e.y)*o+e.y),a=t._pointMove(!0,h,f),s=t._pointMove(!1,l,a);i.scrollTop=Math.round(s.y);i.scrollLeft=Math.round(s.x)},Object.defineProperty(r.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pages",{get:function(){return this._pages},set:function(n){this._pages=n;this._reserveViewPage()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollTop",{get:function(){return this.hostElement.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollLeft",{get:function(){return this.hostElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zoomFactor",{get:function(){return this._zoomFactor},set:function(n){if(n=Math.max(.05,Math.min(10,n)),this._zoomFactor!=n){var i=this._zoomFactor;this._zoomFactor=n;this._updatePageViewTransform();this._zoomModeUpdating||(this.zoomMode=t.ZoomMode.Custom);this._onZoomFactorChanged(i,n)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zoomMode",{get:function(){return this._zoomMode},set:function(n){if(this._zoomMode!=n){this._zoomModeUpdating=!0;var t=this._zoomMode;this._calcZoomModeZoom(n);this._zoomMode=n;this._onZoomModeChanged(t,n);this._zoomModeUpdating=!1}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"panMode",{get:function(){return this._panMode},set:function(n){this._panMode!=n&&(this._panMode=n)},enumerable:!0,configurable:!0}),r.prototype._bindEvents=function(){var n=this;t._addEvent(document,'mousemove',function(t){var i=n._startX!==null&&n._startY!==null;i&&n._panning(t)});t._addEvent(document,'mouseup',function(){n._stopPanning()});this._initTouchEvents()},r.prototype._startPanning=function(n){this._startX=n.screenX;this._startY=n.screenY},r.prototype._panning=function(n){var t=this._getPagesContainer();t.scrollLeft+=this._startX-n.screenX;t.scrollTop+=this._startY-n.screenY;this._startX=n.screenX;this._startY=n.screenY},r.prototype._stopPanning=function(){this._startX=null;this._startY=null},r.prototype._onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},r.prototype._onZoomFactorChanged=function(n,t){this.zoomFactorChanged.raise(this,{oldValue:n,newValue:t})},r.prototype._onZoomModeChanged=function(n,t){this.zoomModeChanged.raise(this,{oldValue:n,newValue:t})},r.prototype._onPositionChanged=function(){this.positionChanged.raise(this)},r.prototype._onRotateAngleChanged=function(){this.rotateAngleChanged.raise(this)},r.prototype._onPageLoaded=function(){},r.prototype._renderViewPage=function(i,r){var e=this,u,f=new t._Promise,o;return(r=r<0?0:r,!i)?(f.reject(n.culture.Viewer.cannotRenderPageNoViewPage),f):(t._removeChildren(i),this._pages[r].content)?(o=this._pages[r].content,i.appendChild(o),this._setPageTransform(i,r),f.resolve(r),f):(u=document.createElement('div'),u.className='wj-loading',u.style.height=i.style.height,u.style.lineHeight=i.style.height,u.innerHTML=n.culture.Viewer.loading,i.appendChild(u),this._pages[r].getContent().then(function(n){var u=n;t._removeChildren(i);i.appendChild(u);e._setPageTransform(i,r);e._onPageLoaded(r);f.resolve(r)}).catch(function(n){u.innerHTML=t._getErrorMessage(n)}),f)},r.prototype._reserveViewPage=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._getViewPortHeight=function(){var n=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetHeight-parseFloat(n.marginBottom)-parseFloat(n.marginTop)},r.prototype._getViewPortWidth=function(){var n=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetWidth-parseFloat(n.marginLeft)-parseFloat(n.marginRight)},r.prototype._setPageTransform=function(n,i){var r,u,f;n&&(u=this._getPageSize(i),f=this._pages[i].rotateAngle,n.style.height=u.height.valueInPixel*this._zoomFactor+'px',n.style.width=u.width.valueInPixel*this._zoomFactor+'px',r=n.querySelector('g'),r&&(r.parentNode.setAttribute('height',u.height.valueInPixel*this._zoomFactor+'px'),r.parentNode.setAttribute('width',u.width.valueInPixel*this._zoomFactor+'px'),t._transformSvg(r.parentNode,this._pages[i].size.width.valueInPixel,this._pages[i].size.height.valueInPixel,this._zoomFactor,f)))},r.prototype._addViewPage=function(){var i=this,n=document.createElement('div');return n.className='wj-view-page',t._addEvent(n,'mousedown',function(n){i._panMode&&i._startPanning(n)}),t._addEvent(n,'dragstart',function(n){i._panMode&&n.preventDefault()}),this._pagesWrapper.appendChild(n),n},r.prototype._getPageSize=function(n){if(n<0||n>=this._pages.length)return null;var i=this._pages[n];return t._getRotatedSize(i.size,i.rotateAngle)},r.prototype._render=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._moveToPagePosition=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._updatePageViewTransform=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._updatePageIndex=function(n){this.pages&&(n=this.resolvePageIndex(n),this._pageIndex!==n)&&(this._pageIndex=n,this._onPageIndexChanged())},r.prototype.moveToPage=function(n){return this.moveToPosition({pageIndex:n})},r.prototype.resolvePageIndex=function(n){return Math.min(this.pages.length-1,Math.max(n,0))},r.prototype.moveToPosition=function(n){var u=this,i=n.pageIndex||0,r=new t._Promise;return i=this.resolvePageIndex(i),n.pageIndex=i,i!==this._pageIndex?(this._updatePageIndex(i),r=this._render(i)):r.resolve(i),r.then(function(){u._moveToPagePosition(n)}),r.then(function(){return i}).then(function(){u._calcZoomModeZoom();u._onPositionChanged()})},r.prototype._calcZoomModeZoom=function(n){this._zoomModeUpdating=!0;n=n==null?this.zoomMode:n;switch(n){case t.ZoomMode.PageWidth:this._zoomToViewWidth();break;case t.ZoomMode.WholePage:this._zoomToView()}this._zoomModeUpdating=!1},r.prototype._zoomToView=function(){var t=this._getViewPortHeight(),i=this._getViewPortWidth(),n=this._getPageSize(this.pageIndex);n&&(this.zoomFactor=Math.min(t/n.height.valueInPixel,i/n.width.valueInPixel))},r.prototype._zoomToViewWidth=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._getTransformedPoint=function(t,i,r){var e;i/=this.zoomFactor;r/=this.zoomFactor;var o=this.pages[t],u=o.size,s=o.rotateAngle;switch(s){case f.Rotation90:e=i;i=u.height.valueInPixel-r;r=e;break;case f.Rotation180:i=u.height.valueInPixel-i;r=u.width.valueInPixel-r;break;case f.Rotation270:e=i;i=r;r=u.width.valueInPixel-e}return new n.Point(r,i)},r.prototype._hitTestPagePosition=function(n){var f;if(!n||n.pageIndex<0)return null;var i=n.y,u=n.x,e=n.pageIndex;i-=r._pageMargin+r._pageBorderWidth;u-=r._pageMargin+r._pageBorderWidth;f=this._getTransformedPoint(n.pageIndex,i,u);i=f.y;u=f.x;var s=t._pixelToTwip(i),h=t._pixelToTwip(u),o=this.pages[e].size,c=i>=0&&i<=o.height.valueInPixel&&u>=0&&u<=o.width.valueInPixel;return{pageIndex:e,x:h,y:s,hitWorkingArea:c}},r.prototype.rotatePageTo=function(n,t){var i=this._pages[n];i.rotateAngle=t;this._updatePageViewTransform();this._onRotateAngleChanged()},r.prototype.hitTest=function(n,t){if(this._pointInViewPanelClientArea(n,t)){var i=this._panelViewPntToPageView(n,t);return this._hitTestPagePosition(i)}return null},r.prototype.resetPages=function(){this._pageIndex=-1;this._pages=null;t._removeChildren(this._pagesWrapper);this._addViewPage();this.invalidate()},r.prototype.refresh=function(n){(n===void 0&&(n=!0),i.prototype.refresh.call(this,n),this._autoHeightCalculated=!1,!this.pages||this.pages.length==0||this.pageIndex<0||this.pageIndex>=this.pages.length)||(this._render(this.pageIndex),this._calcZoomModeZoom())},r.prototype.isPageContentLoaded=function(n){var t=this.pages;return!!t&&n>=0&&n<t.length&&!!t[n].content},r.prototype._hitTestPageIndex=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._pointInViewPanelClientArea=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._panelViewPntToPageView=function(){throw n.culture.Viewer.abstractMethodException;},r}(n.Control);i._pageMargin=30;i._pageBorderWidth=1;i.controlTemplate='<div class="wj-pages-wrapper" wj-part="pages-wrapper"></div>';t._PageViewBase=i;u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.getScrollbarWidth=function(n){var i,r;return(!t._scrollbarWidth||n)&&(i=document.createElement('div'),i.style.width='50px',i.style.height='50px',i.style.overflow='auto',document.body.appendChild(i),r=document.createElement('div'),r.style.height='60px',i.appendChild(r),t._scrollbarWidth=i.offsetWidth-i.clientWidth,document.body.removeChild(i)),t._scrollbarWidth},t}(n.Control);u._scrollbarWidth=null;t._Scroller=u;e=function(i){function r(r){var f=i.call(this,r)||this,e;return f._height=100,f._max=100,f._desiredValue=0,f.valueChanged=new n.Event,e=f.getTemplate(),f.applyTemplate(null,e,{_wrapper:'wrapper'}),f.hostElement.style.width=u.getScrollbarWidth()+1+'px',t._addEvent(f.hostElement,"scroll",function(){f.onValueChanged()}),f}return __extends(r,i),r.prototype.onValueChanged=function(){this._desiredValue!=this.value&&this.valueChanged.raise(this)},r.prototype.preventScrollEvent=function(){this._desiredValue=this.hostElement.scrollTop},Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(n){n!==this._height&&(this._height=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this.hostElement.scrollTop},set:function(n){this.hostElement.scrollTop=n;this.preventScrollEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},set:function(n){this._max!==n&&(this._max=n,this.invalidate())},enumerable:!0,configurable:!0}),r.prototype.refresh=function(n){var t,r;n===void 0&&(n=!0);i.prototype.refresh.call(this,n);t=this._height+'px';this.hostElement.style.height!==t&&(this.hostElement.style.height=t);r=this._max+this.hostElement.clientHeight+'px';this._wrapper.style.height!==r&&(this._wrapper.style.height=r);this.preventScrollEvent()},r}(u);e.controlTemplate='<div class="wj-vscroller-wrapper" wj-part="wrapper"></div>';t._VScroller=e;o=function(r){function f(t){var i=r.call(this,t)||this;return i._innerNavigating=!1,i._virtualScrollMode=!0,n.addClass(t,"wj-pageview-single"),i}return __extends(f,r),f.prototype._init=function(){r.prototype._init.call(this);this._initScroller();this._initEvents()},f.prototype._initScroller=function(){var n=this,t=new e(this._vscroller);t.valueChanged.addHandler(function(){setTimeout(function(){return n._doScrollerValueChanged()})})},f.prototype._initEvents=function(){var n=this;t._addEvent(this._pagesContainer,'wheel',function(t){n._doContainerWheel(t)});t._addEvent(this._pagesContainer,'scroll',function(){n._doContainerScroll()});t._addEvent(this._pagesContainer,'keydown',function(){n._doContainerKeyDown()});t._addEvent(this._pagesContainer,'click',function(){n._pagesContainer.focus()})},f.prototype._bindTouchEvents=function(n){var i=this;r.prototype._bindTouchEvents.call(this,n);n.swipe.addHandler(function(n,r){var u,f;switch(r.direction){case t._TouchDirection.Down:u=i.resolvePageIndex(i.pageIndex-1);u!=i.pageIndex&&i.moveToPage(u);break;case t._TouchDirection.Up:f=i.resolvePageIndex(i.pageIndex+1);f!=i.pageIndex&&i.moveToPage(f)}})},f.prototype._getTemplateParts=function(){return{_pagesWrapper:'pages-wrapper',_pagesContainer:'pages-container',_vscroller:'vscroller'}},f.prototype.applyTemplate=function(i,r,u){var e=this.hostElement,f,o;if(n.addClass(e,i),e.appendChild(t._toDOMs(r)),u)for(f in u)if(o=u[f],this[f]=e.querySelector('[wj-part="'+o+'"]'),this[f]==null&&e.getAttribute('wj-part')==o&&(this[f]=r),this[f]==null)throw'Missing template part: "'+o+'"';return e},Object.defineProperty(f.prototype,"virtualScrollMode",{get:function(){return this._virtualScrollMode},set:function(n){this._virtualScrollMode!==n&&(this._virtualScrollMode=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_isScrollerVisible",{get:function(){return this._virtualScrollMode&&this.pages&&this.pages.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_scroller",{get:function(){return n.Control.getControl(this._vscroller)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_hasPageVScrollBar",{get:function(){return t._hasScrollbar(this._pagesContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_hasPageHScrollBar",{get:function(){return t._hasScrollbar(this._pagesContainer,!0)},enumerable:!0,configurable:!0}),f.prototype._getPagesContainer=function(){return this._pagesContainer},f.prototype._getPageHeightWithoutZoom=function(n){var t=this._pagesContainer.clientHeight,r=this._getPageSize(n).height.valueInPixel+i._pageMargin*2;return Math.max(r,t)},f.prototype._updateScroller=function(){var t,i,n;if(this._isScrollerVisible){for(t=this._scroller,t.height=this._pagesContainer.clientHeight,i=0,n=0;n<this.pages.length;n++)i+=this._getPageHeightWithoutZoom(n);t.max=i;this._updateScrollerValue()}},f.prototype._updateScrollerValue=function(){var n,r,i,f;if(this._isScrollerVisible&&(n=this.pageIndex,!(n<0))){r=0;this._pagesContainer.scrollTop>0&&(r=this._pagesContainer.scrollTop/(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight));var u=this._scroller,e=this.pages.length,t=0;for(i=0;i<n;i++)t+=this._getPageHeightWithoutZoom(i);f=this._getPageHeightWithoutZoom(n);t+=f*r;n>=e-1&&!this._hasPageVScrollBar&&(t=u.max);u.value=t}},f.prototype._doScrollerValueChanged=function(){var t;if(this._isScrollerVisible){for(var f=this._scroller,i=this.pages.length,r=f.value,n=0,u=1;n<i;n++)if(t=this._getPageHeightWithoutZoom(n),r>t){r-=t;continue}else{u=r/t;break}n>=i&&(n=i-1);this._innerMoveToPage(n,u)}},f.prototype._doContainerWheel=function(n){if(this._isScrollerVisible&&n.deltaY!=0){var t=n.deltaY<0;if(this._hasPageVScrollBar)if(t){if(this._pagesContainer.scrollTop>0)return}else if(this._pagesContainer.scrollTop<this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)return;t?this._innerMoveToPreviousPageAtBottom(n):this._innerMoveToNextPageAtTop(n)}},f.prototype._doContainerScroll=function(){this._isScrollerVisible&&this._pagesContainer.scrollTop!=this._desiredPageScrollTop&&(this._updateScrollerValue(),this._onPositionChanged())},f.prototype._doContainerKeyDown=function(){if(this._isScrollerVisible){var t=event;if(this._hasPageVScrollBar)switch(t.keyCode){case n.Key.PageDown:this._pagesContainer.scrollTop>=this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight&&this._innerMoveToNextPageAtTop(t);break;case n.Key.PageUp:this._pagesContainer.scrollTop==0&&this._innerMoveToPreviousPageAtBottom(t)}else switch(t.keyCode){case n.Key.Down:case n.Key.PageDown:this._innerMoveToNextPageAtTop(t);break;case n.Key.Up:case n.Key.PageUp:this._innerMoveToPreviousPageAtBottom(t)}}},f.prototype._preventContainerScroll=function(){this._desiredPageScrollTop=this._pagesContainer.scrollTop},f.prototype._innerMoveToPreviousPageAtBottom=function(n){this.pageIndex>0&&(n&&n.preventDefault(),this._innerMoveToPage(this.pageIndex-1,1),this._updateScrollerValue())},f.prototype._innerMoveToNextPageAtTop=function(n){this.pageIndex<this.pages.length-1&&(n&&n.preventDefault(),this._innerMoveToPage(this.pageIndex+1,0),this._updateScrollerValue())},f.prototype._innerMoveToPage=function(n,t){var i=this,r;this._innerNavigating=!0;r={pageIndex:n};this.moveToPosition(r).then(function(){i._innerMoveToPagePosition(t);i._innerNavigating=!1})},f.prototype._innerMoveToPagePosition=function(n){if(this._hasPageVScrollBar){var t=(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)*n;this._pagesContainer.scrollTop=t;this._preventContainerScroll()}},f.prototype.moveToPosition=function(n){var t=r.prototype.moveToPosition.call(this,n);return this._innerNavigating||this._updateScrollerValue(),t},f.prototype._moveToPagePosition=function(n){var e=n.pageBounds||{x:0,y:0,width:0,height:0},r=n.pageBounds?i._pageMargin:0,u=this.pages[this.pageIndex],f=t._getTransformedPosition(e,u.size,u.rotateAngle,this.zoomFactor);this._pagesContainer.scrollTop=f.y+r;this._pagesContainer.scrollLeft=f.x+r},f.prototype._hitTestPageIndex=function(){return this.pageIndex},f.prototype._pointInViewPanelClientArea=function(n,t){return n>=0&&t>=0&&n<this._pagesContainer.clientWidth&&t<this._pagesContainer.clientHeight},f.prototype._panelViewPntToPageView=function(n,t){var u,r,f,e;return this.pageIndex<0?null:(u=this._pagesContainer.scrollTop+t,r=0,this._pagesContainer.scrollLeft>0?r=this._pagesContainer.scrollLeft+n:(f=this._pagesContainer.getBoundingClientRect(),e=this._pagesWrapper.getBoundingClientRect(),r=n-(e.left-f.left)+i._pageMargin),{x:r,y:u,pageIndex:this.pageIndex})},f.prototype._render=function(n){return this._renderViewPage(this._pagesWrapper.querySelector('.wj-view-page'),n)},f.prototype._guessPageIndex=function(){return this.pageIndex},f.prototype._reserveViewPage=function(){t._removeChildren(this._pagesWrapper);this._addViewPage();this.invalidate()},f.prototype._updatePageViewTransform=function(){var n;n=this._pagesWrapper.querySelector('.wj-view-page');this._setPageTransform(n,this.pageIndex)},f.prototype._onPageLoaded=function(n){r.prototype._onPageLoaded.call(this,n);this._updateScroller()},f.prototype._onZoomFactorChanged=function(n,t){r.prototype._onZoomFactorChanged.call(this,n,t);this._updateScroller()},f.prototype._zoomToViewWidth=function(){var r,n,t,f,i;(r=this._getViewPortHeight(),n=this._getViewPortWidth(),t=this._getPageSize(this.pageIndex),t)&&(f=t.height.valueInPixel,i=t.width.valueInPixel,n/i>r/f&&(n-=u.getScrollbarWidth()),this.zoomFactor=n/i)},f.prototype.refresh=function(t){t===void 0&&(t=!0);r.prototype.refresh.call(this,t);this._isScrollerVisible?n.addClass(this.hostElement,"virtual"):n.removeClass(this.hostElement,"virtual");this._updateScroller()},f}(i);o.controlTemplate='<div class="wj-pageview-pagescontainer" wj-part="pages-container" tabindex="0">   <div class="wj-pages-wrapper" wj-part="pages-wrapper"><\/div><\/div><div class="wj-pageview-vscroller" wj-part="vscroller" tabindex="-1"><\/div> ';t._SinglePageView=o;s=function(r){function e(t){var i=r.call(this,t)||this;return n.addClass(t,"wj-pageview-continuous"),i}return __extends(e,r),e.prototype._init=function(){var n=this;r.prototype._init.call(this);t._addEvent(this.hostElement,'click',function(){n.hostElement.focus()});t._addEvent(this.hostElement,'scroll',function(){n._onPositionChanged();clearTimeout(n._scrollingTimer);n._scrollingTimer=setTimeout(function(){n._ensurePageIndexPosition()},200)});this.zoomFactorChanged.addHandler(function(){clearTimeout(n._zoomFactorTimer);n._zoomFactorTimer=setTimeout(function(){n._ensurePageIndexPosition()},200)})},e.prototype.dispose=function(){clearTimeout(this._scrollingTimer);clearTimeout(this._zoomFactorTimer);this._disposeBodyStopSwipe&&this._disposeBodyStopSwipe();r.prototype.dispose.call(this)},e.prototype._stopSwip=function(){this._swipeSpeedReducer&&this._swipeSpeedReducer.stop()},e.prototype._bindTouchEvents=function(n){var i=this,f,u;r.prototype._bindTouchEvents.call(this,n);n.touchStart.addHandler(this._stopSwip,this);n.swipe.addHandler(function(r,u){i._swipeSpeedReducer||(i._swipeSpeedReducer=new t._SpeedReducer);i._swipeSpeedReducer.start(u.speed.x,u.speed.y,function(t,r){var u=n.hostElement.scrollLeft,f=n.hostElement.scrollTop;n.hostElement.scrollLeft-=t;n.hostElement.scrollTop-=r;u==n.hostElement.scrollLeft&&f==n.hostElement.scrollTop&&i._stopSwip()})});f=new t._TouchManager(document.body,!1);u=this._stopSwip.bind(this);t._addEvent(document.body,'mousedown',u,!0);f.touchStart.addHandler(u);this._disposeBodyStopSwipe=function(){i._stopSwip();t._removeEvent(document.body,'mousedown',u);f.touchStart.removeHandler(u);f.dispose();i._disposeBodyStopSwipe=null}},e.prototype._getAbovePageCount=function(n){return this._hitTestPageIndex(n)},e.prototype.refresh=function(n){this._stopSwip();r.prototype.refresh.call(this,n)},e.prototype._hitTestPageIndex=function(n){if(!this.pages)return this.pageIndex;for(var t=0,r=0;t<this.pages.length;t++)if(r+=this._getPageSize(t).height.valueInPixel*this.zoomFactor+i._pageMargin,n<r){if(r-n<1)continue;break}return t},e.prototype._guessPageIndex=function(){return this.pages&&this.hostElement.scrollHeight-this.hostElement.clientHeight<=this.hostElement.scrollTop?this.pages.length-1:this._hitTestPageIndex(this.hostElement.scrollTop)},e.prototype._render=function(n){var f=this.pages.length,r=n-e._preFetchPageCount,u=n+e._preFetchPageCount,o=[],i;for(r=r<0?0:r,u=u>f-1?f-1:u,i=r;i<=u;i++)o.push(this._renderViewPage(this._pagesWrapper.querySelectorAll('.wj-view-page').item(i),i));return new t._CompositedPromise(o)},e.prototype._moveToPagePosition=function(n){var u,o;this._stopSwip();var s,r=0,e=0,h=!n.pageBounds,a=n.pageBounds||{x:0,y:0,width:0,height:0},c=h?0:i._pageMargin,l=this.pages[this.pageIndex];for(u=0;u<n.pageIndex;u++)s=this._getPageSize(u).height.valueInPixel*this.zoomFactor,r+=s+i._pageMargin,this._borderBoxMode||(r+=i._pageBorderWidth*2);o=t._getTransformedPosition(a,l.size,h?f.NoRotate:l.rotateAngle,this.zoomFactor);r+=o.y+c;e+=o.x+c;e+=this._getPageViewOffsetLeft(n.pageIndex);this.hostElement.scrollTop=r;this.hostElement.scrollLeft=e},e.prototype._pointInViewPanelClientArea=function(n,t){return n>=0&&t>=0&&n<this.hostElement.clientWidth&&t<this.hostElement.clientHeight},e.prototype._panelViewPntToPageView=function(n,t){var u=this.hostElement.scrollTop+t,f=0,o,s,r,e;if(this.hostElement.scrollLeft>0?f=this.hostElement.scrollLeft+n:(o=this.hostElement.getBoundingClientRect(),s=this._pagesWrapper.getBoundingClientRect(),f=n-(s.left-o.left)+i._pageMargin),r=this._hitTestPageIndex(u),r<0)return null;for(f-=this._getPageViewOffsetLeft(r),e=0;e<r;e++)u-=this._getPageSize(e).height.valueInPixel*this.zoomFactor+i._pageMargin,this._borderBoxMode||(u-=i._pageBorderWidth*2);return{x:f,y:u,pageIndex:r}},e.prototype._reserveViewPage=function(){var n,i,r;for(t._removeChildren(this._pagesWrapper),n=0;n<this.pages.length;n++)i=this._addViewPage(),r=this._getPageSize(n),i.style.height=r.height.valueInPixel*this.zoomFactor+'px',i.style.width=r.width.valueInPixel*this.zoomFactor+'px'},e.prototype._updatePageViewTransform=function(){for(var t=this._pagesWrapper.querySelectorAll('.wj-view-page'),n=0;n<t.length;n++)this._setPageTransform(t.item(n),n)},e.prototype._zoomToViewWidth=function(){var e,t,n,f,i,r;if(this.pages.length!=0){for(e=this._getViewPortHeight(),t=this._getViewPortWidth(),n=0,f=0,i=0;i<this.pages.length;i++)r=this._getPageSize(i),r.width.valueInPixel>n&&(n=r.width.valueInPixel),f+=r.height.valueInPixel;t/n>e/f&&(t-=u.getScrollbarWidth());this.zoomFactor=t/n}},e.prototype._ensurePageIndexPosition=function(){var n=this._guessPageIndex();this.pageIndex!==n&&(this._render(n),this._updatePageIndex(n))},e.prototype._getPageViewOffsetLeft=function(n){var t=this._pagesWrapper.querySelectorAll('.wj-view-page').item(n);return t?t.offsetLeft-this._pagesWrapper.offsetLeft:0},e}(i);s._preFetchPageCount=3;t._ContinuousPageView=s})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var i=function(i){function u(t){var r=i.call(this,t)||this,u;return r._idCounter=0,r._tabPages=[],r._tabPageDic={},r.tabPageActived=new n.Event,r.tabPageVisibilityChanged=new n.Event,r.expanded=new n.Event,r.collapsed=new n.Event,u=r.getTemplate(),r.applyTemplate('wj-control',u,{_headersContainer:'wj-headers',_contentsContainer:'wj-contents'}),r}return __extends(u,i),u.prototype.applyTemplate=function(i,r,u){var e=this.hostElement,f,o;if(n.addClass(e,i),e.appendChild(t._toDOMs(r)),u)for(f in u)if(o=u[f],this[f]=e.querySelector('[wj-part="'+o+'"]'),this[f]==null&&e.getAttribute('wj-part')==o&&(this[f]=r),this[f]==null)throw'Missing template part: "'+o+'"';return e},Object.defineProperty(u.prototype,"tabPages",{get:function(){return this._tabPages},enumerable:!0,configurable:!0}),u.prototype.getTabPage=function(n){return this._tabPageDic[n]},u.prototype.getFirstShownTabPage=function(n){var t;return this._tabPages.some(function(i){return!i.isHidden&&i!==n?(t=i,!0):!1}),t},Object.defineProperty(u.prototype,"visibleTabPagesCount",{get:function(){var n=0;return this._tabPages.forEach(function(t){t.isHidden||n++}),n},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"activedTabPage",{get:function(){var n;return this._tabPages.some(function(t){return t.isActived?(n=t,!0):!1}),n},enumerable:!0,configurable:!0}),u.prototype.removePage=function(n){var t,u,i,r;(t=typeof n=='string'?this.getTabPage(n):n,t)&&((u=t.id,i=this._tabPages.indexOf(t),i<0)||(this._tabPages.splice(i,1),this._tabPageDic[u]=void 0,!this.isCollapsed&&t.isActived&&(r=this.getFirstShownTabPage(),r?this.active(r):this.collapse()),this._headersContainer.removeChild(t.header),this._contentsContainer.removeChild(t.outContent)))},u.prototype.addPage=function(i,u,f){var h=this,c=this._getNewTabPageId(),o=document.createElement('li'),a='<div class="wj-tabpane"><div class="wj-tabtitle-wrapper"><h3 class="wj-tabtitle">'+i+'<\/h3><span class="wj-close">×<\/span><\/div><div class="wj-tabcontent-wrapper"><div class="wj-tabcontent-inner"><\/div><\/div><\/div>',s=t._toDOM(a),v=t._createSvgBtn(u),e,l;return o.appendChild(v),f=f==null?this._tabPages.length:f,f=Math.min(Math.max(f,0),this._tabPages.length),f>=this._tabPages.length?(this._headersContainer.appendChild(o),this._contentsContainer.appendChild(s)):(this._headersContainer.insertBefore(o,this._tabPages[f].header),this._contentsContainer.insertBefore(s,this._tabPages[f].outContent)),t._addEvent(s.querySelector('.wj-close'),'click',function(){h.collapse()}),t._addEvent(o.querySelector('a'),'click,keydown',function(t){var i=h.getTabPage(c),r;i&&(r=t.type==='keydown'&&t.keyCode===n.Key.Enter||t.type==='click',r)&&h.active(i)}),e=new r(s,o,c),f>=this._tabPages.length?this._tabPages.push(e):this._tabPages.splice(f,0,e),this._tabPageDic[c]=e,this.isCollapsed||(l=this.activedTabPage,l||this.active(e)),e},Object.defineProperty(u.prototype,"isCollapsed",{get:function(){return n.hasClass(this.hostElement,u._collapsedCss)},enumerable:!0,configurable:!0}),u.prototype.hide=function(i){var r=typeof i=='string'?this.getTabPage(i):i;if(r&&!n.hasClass(r.header,t._hiddenCss)){n.addClass(r.header,t._hiddenCss);this.onTabPageVisibilityChanged(r);this.deactive(r)}},u.prototype.show=function(i){var r=typeof i=='string'?this.getTabPage(i):i,u;if(r&&n.hasClass(r.header,t._hiddenCss)){n.removeClass(r.header,t._hiddenCss);this.onTabPageVisibilityChanged(r);this.isCollapsed||(u=this.activedTabPage,u||this.active(r))}},u.prototype.deactive=function(i){var r=typeof i=='string'?this.getTabPage(i):i,f;r&&r.isActived&&(n.removeClass(r.outContent,u._activedCss),t._checkImageButton(r.header.querySelector('a'),!1),f=this.getFirstShownTabPage(r),f?this.active(f):this.collapse())},u.prototype.active=function(i){var r=typeof i=='string'?this.getTabPage(i):i;r&&((this.expand(),r.isActived)||(this._tabPages.forEach(function(i){n.removeClass(i.outContent,u._activedCss);t._checkImageButton(i.header.querySelector('a'),!1)}),this.show(r),n.addClass(r.outContent,u._activedCss),t._checkImageButton(r.header.querySelector('a'),!0),this.onTabPageActived()))},u.prototype.enable=function(n,t){t===void 0&&(t=!0);var i=typeof n=='string'?this.getTabPage(n):n;i&&i.enable(t)},u.prototype.enableAll=function(n){n===void 0&&(n=!0);this._tabPages.forEach(function(t){t.enable(n)})},u.prototype.onTabPageActived=function(){this.tabPageActived.raise(this,new n.EventArgs)},u.prototype.onTabPageVisibilityChanged=function(n){this.tabPageVisibilityChanged.raise(this,{tabPage:n})},u.prototype.onExpanded=function(){this.expanded.raise(this,new n.EventArgs)},u.prototype.onCollapsed=function(){this.collapsed.raise(this,new n.EventArgs)},u.prototype.collapse=function(){this.isCollapsed||(n.addClass(this.hostElement,u._collapsedCss),this.onCollapsed())},u.prototype.expand=function(){if(this.isCollapsed){if(n.removeClass(this.hostElement,u._collapsedCss),!this.activedTabPage){var t=this.getFirstShownTabPage();t&&this.active(t)}this.onExpanded()}},u.prototype.toggle=function(){this.isCollapsed?this.expand():this.collapse()},u.prototype._getNewTabPageId=function(){while(this._tabPageDic[(this._idCounter++).toString()]);return this._idCounter.toString()},u}(n.Control),r;i._activedCss='active';i._collapsedCss='collapsed';i.controlTemplate='<ul class="wj-nav wj-btn-group" wj-part="wj-headers"><\/ul><div class="wj-tabcontent" wj-part="wj-contents"><\/div>';t._SideTabs=i;r=function(){function r(n,t,i){this._header=t;this._outContent=n;this._content=n.querySelector('.wj-tabcontent-inner');this._id=i}return Object.defineProperty(r.prototype,"isActived",{get:function(){return n.hasClass(this.outContent,i._activedCss)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isHidden",{get:function(){return n.hasClass(this.header,t._hiddenCss)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"outContent",{get:function(){return this._outContent},enumerable:!0,configurable:!0}),r.prototype.enable=function(t){t===void 0&&(t=!0);n.enable(this._header,t);n.enable(this._content,t)},r.prototype.format=function(n){n(this)},r}();t._TabPage=r})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var i=function(i){function r(n,r,u){var f=i.call(this,document.createElement('div'),u)||this;return f.owner=r,f.hostElement.style.display='none',f.owner.appendChild(f.hostElement),f.showDropDownButton=!1,f.itemClicked.addHandler(f._onItemClicked,f),f.formatItem.addHandler(f._formatItem,f),f._viewer=n,f.displayMemberPath='title',f.selectedValuePath='commandTag',f._bindMenuItems(),f._viewer._viewerActionStatusChanged.addHandler(function(n,i){var r=f.dropDown.querySelector('['+t._commandTagAttr+'="'+i.action.actionType.toString()+'"]');f._updateActionStatusCore(r,i.action)}),f}return __extends(r,i),Object.defineProperty(r.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),r.prototype._bindMenuItems=function(){this.itemsSource=this._initItems()},r.prototype._initItems=function(){throw n.culture.Viewer.abstractMethodException;},r.prototype._internalFormatItem=function(n,i){if(n&&n.commandTag!==undefined){if(t._removeChildren(i),n.icon){var r=document.createElement('span');r.appendChild(t._createSvgBtn(n.icon));i.insertBefore(r,i.firstChild)}i.setAttribute(t._commandTagAttr,n.commandTag.toString());this._updateActionStatus(i,n.commandTag)}},r.prototype._formatItem=function(n,t){this._internalFormatItem(this.itemsSource[t.index],t.item)},r.prototype._onItemClicked=function(n){this._viewer._executeAction(parseInt(n.selectedItem.commandTag))},r.prototype._updateActionStatus=function(n,t){this._updateActionStatusCore(n,{actionType:t,checked:this._viewer._actionIsChecked(t),disabled:this._viewer._actionIsDisabled(t),shown:this._viewer._actionIsShown(t)})},r.prototype._updateActionStatusCore=function(n,i){t._checkImageButton(n,i.checked);t._disableImageButton(n,i.disabled);t._showImageButton(n,i.shown)},r.prototype._updateItemsStatus=function(){for(var i,r,u=this.dropDown.querySelectorAll('['+t._commandTagAttr+']'),n=0;n<u.length;n++)(i=u[n],r=i.getAttribute(t._commandTagAttr),r!=null)&&this._updateActionStatus(i,parseInt(r));t._checkSeparatorShown(this.dropDown)},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&this._bindMenuItems();this.isDroppedDown&&this.showMenu()},r.prototype.showMenu=function(t){this.selectedIndex=-1;n.showPopup(this.dropDown,this.owner,t,!1,!1);this.dropDown.style.color=this._viewer.hostElement.style.color;n.addClass(this.dropDown,'wj-btn-group-vertical');n.addClass(this.dropDown,'wj-viewer-menu');this._updateItemsStatus();this.dropDown.focus()},r}(n.input.Menu),r,u,f;t._ViewerMenuBase=i;r=function(i){function r(n,t,r){return i.call(this,n,t,r)||this}return __extends(r,i),r.prototype._initItems=function(){var i=[];return i.push({title:n.culture.Viewer.thumbnails,icon:t.icons.thumbnails,commandTag:t._ViewerActionType.ShowThumbnails}),i.push({title:n.culture.Viewer.outlines,icon:t.icons.outlines,commandTag:t._ViewerActionType.ShowOutlines}),i.push({title:n.culture.Viewer.exports,icon:t.icons.exports,commandTag:t._ViewerActionType.ShowExportsPanel}),i.push({title:t.ViewerBase._seperatorHtml}),i.push({title:n.culture.Viewer.portrait,icon:t.icons.portrait,commandTag:t._ViewerActionType.Portrait}),i.push({title:n.culture.Viewer.landscape,icon:t.icons.landscape,commandTag:t._ViewerActionType.Landscape}),i.push({title:n.culture.Viewer.pageSetup,icon:t.icons.pageSetup,commandTag:t._ViewerActionType.ShowPageSetupPanel}),i.push({title:t.ViewerBase._seperatorHtml}),i.push({title:n.culture.Viewer.showZoomBar,icon:t.icons.showZoomBar,commandTag:t._ViewerActionType.ShowZoomBar}),i.push({title:t.ViewerBase._seperatorHtml}),i.push({title:n.culture.Viewer.paginated,icon:t.icons.paginated,commandTag:t._ViewerActionType.TogglePaginated}),i.push({title:n.culture.Viewer.print,icon:t.icons.print,commandTag:t._ViewerActionType.Print}),i.push({title:t.ViewerBase._seperatorHtml}),i.push({title:n.culture.Viewer.backwardHistory,icon:t.icons.backwardHistory,commandTag:t._ViewerActionType.Backward}),i.push({title:n.culture.Viewer.forwardHistory,icon:t.icons.forwardHistory,commandTag:t._ViewerActionType.Forward}),i},r}(i);t._HamburgerMenu=r;u=function(i){function r(n,t,r){return i.call(this,n,t,r)||this}return __extends(r,i),r.prototype._initItems=function(){var i=[];return i.push({title:n.culture.Viewer.singleMode,icon:t.icons.singleView,commandTag:t._ViewerActionType.Single}),i.push({title:n.culture.Viewer.continuousMode,icon:t.icons.continuousView,commandTag:t._ViewerActionType.Continuous}),i.push({title:t.ViewerBase._seperatorHtml}),i.push({title:n.culture.Viewer.wholePage,icon:t.icons.fitWholePage,commandTag:t._ViewerActionType.FitWholePage}),i.push({title:n.culture.Viewer.pageWidth,icon:t.icons.fitPageWidth,commandTag:t._ViewerActionType.FitPageWidth}),i},r}(i);t._ViewMenu=u;f=function(i){function r(n,t,r){return i.call(this,n,t,r)||this}return __extends(r,i),r.prototype._initItems=function(){var i=[];return i.push({title:n.culture.Viewer.wholeWordMenuItem,commandTag:t._ViewerActionType.SearchMatchWholeWord}),i.push({title:n.culture.Viewer.matchCaseMenuItem,commandTag:t._ViewerActionType.SearchMatchCase}),i},r.prototype._internalFormatItem=function(t,r){if(i.prototype._internalFormatItem.call(this,t,r),t&&t.commandTag!==undefined){var u=document.createElement('span');u.innerHTML=n.culture.Viewer.checkMark;n.addClass(u,'checkIcon');r.insertBefore(u,r.firstChild)}},r.prototype._updateActionStatus=function(t,r){i.prototype._updateActionStatus.call(this,t,r);this.viewer._actionIsChecked(r)&&n.addClass(t,'checked')},r}(i);t._SearchOptionsMenu=f})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var r,e,f,v,c,u,o,i,s,l,a,h;(function(n){n[n.SelectTool=0]="SelectTool";n[n.MoveTool=1]="MoveTool";n[n.RubberbandTool=2]="RubberbandTool";n[n.MagnifierTool=3]="MagnifierTool"})(r=t.MouseMode||(t.MouseMode={})),function(n){n[n.Single=0]="Single";n[n.Continuous=1]="Continuous"}(e=t.ViewMode||(t.ViewMode={})),function(n){n[n.Custom=0]="Custom";n[n.PageWidth=1]="PageWidth";n[n.WholePage=2]="WholePage"}(f=t.ZoomMode||(t.ZoomMode={}));v=function(n){function t(t){var i=n.call(this)||this;return i._a=t,i}return __extends(t,n),Object.defineProperty(t.prototype,"element",{get:function(){return this._a},enumerable:!0,configurable:!0}),t}(n.EventArgs);t._LinkClickedEventArgs=v;c=function(){function t(){this._items=[{}];this._position=0;this.statusChanged=new n.Event}return t.prototype._onStatusChanged=function(){this.statusChanged.raise(this,new n.EventArgs)},Object.defineProperty(t.prototype,"current",{get:function(){return this._items[this._position]},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._items=[{}];this._position=0;this._onStatusChanged()},t.prototype.add=function(){this._items.splice(++this._position);this._items.push({});this._onStatusChanged()},t.prototype.forward=function(){if(!this.canForward())return null;var n=this._items[++this._position];return this._onStatusChanged(),n},t.prototype.backward=function(){if(!this.canBackward())return null;var n=this._items[--this._position];return this._onStatusChanged(),n},t.prototype.canForward=function(){return this._position<this._items.length-1},t.prototype.canBackward=function(){return this._position>0},t}();t._HistoryManager=c;u=function(u){function s(i,f){var o=u.call(this,i,f,!0)||this;return o._pages=[],o._pageIndex=0,o._mouseMode=r.SelectTool,o._viewMode=e.Single,o._needBind=!1,o._historyManager=new c,o._fullScreen=!1,o._miniToolbarPinnedTimer=null,o._autoHeightCalculated=!1,o._searchManager=new t._SearchManager,o._thresholdWidth=767,o._historyMoving=!1,o._documentSourceChanged=new n.Event,o.pageIndexChanged=new n.Event,o.viewModeChanged=new n.Event,o.selectMouseModeChanged=new n.Event,o.mouseModeChanged=new n.Event,o.fullScreenChanged=new n.Event,o.zoomFactorChanged=new n.Event,o.queryLoadingData=new n.Event,o._viewerActionStatusChanged=new n.Event,o._documentEventKey=(new Date).getTime().toString(),o._init(f),o}return __extends(s,u),Object.defineProperty(s.prototype,"serviceUrl",{get:function(){return this._serviceUrl},set:function(n){n!=this._serviceUrl&&(this._serviceUrl=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filePath",{get:function(){return this._filePath},set:function(n){n!=this._filePath&&(this._filePath=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"thresholdWidth",{get:function(){return this._thresholdWidth},set:function(n){n!=this._thresholdWidth&&(this._thresholdWidth=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_innerPaginated",{get:function(){return this._documentSource&&!this._needBind?this._documentSource.paginated:this._paginated},set:function(t){this._documentSource&&!this._needBind?this._setPaginated(t):this._paginated=t==null?null:n.asBoolean(t);this._setViewerAction(i.TogglePaginated,!0)},enumerable:!0,configurable:!0}),s.prototype.reload=function(){this._needBindDocumentSource();this.invalidate()},s.prototype.refresh=function(t){var i,r,f,e,o;t===void 0&&(t=!0);u.prototype.refresh.call(this,t);this._needBind&&(this._setDocumentSource(this._getSource()),this._needBind=!1);t&&(i=n.Control.getControl(this._toolbar),i&&i.refresh(),r=n.Control.getControl(this._miniToolbar),r&&r.refresh(),f=n.Control.getControl(this._mobileToolbar),f&&f.refresh(),e=n.Control.getControl(this._zoomBar),e&&e.refresh(),o=n.Control.getControl(this._searchBar),o&&o.refresh(),this._hamburgerMenu&&this._hamburgerMenu.refresh(),this._viewMenu&&this._viewMenu.refresh(),this._searchOptionsMenu&&this._searchOptionsMenu.refresh(),s._exportItems=null,this._updateExportTab(!0),this._globalize(),this._updateLayout());this._resetMiniToolbarPosition();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._autoHeightCalculated=!1},s.prototype._updateLayout=function(){this._switchTemplate(this._isMobileTemplate())},s.prototype._switchTemplate=function(t){var r=this.hostElement.querySelector('.wj-viewer-outer'),u='mobile',i=n.Control.getControl(this._sidePanel),f=i.getTabPage(this._pageSetupPageId);t?(n.addClass(r,u),i.show(f)):(n.removeClass(r,u),i.hide(f))},s.prototype._getSource=function(){return this.filePath?new t._DocumentSource({serviceUrl:this._serviceUrl,filePath:this._filePath}):null},s.prototype._needBindDocumentSource=function(){this._needBind=!0},s.prototype._supportsPageSettingActions=function(){return!1},s.prototype._isMobileTemplate=function(){return this.thresholdWidth>this.hostElement.getBoundingClientRect().width},s.prototype._init=function(n){var t=this;this._createChildren();this._autoCalculateHeight();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._bindEvents();this._initTools();this.deferUpdate(function(){t.initialize(n)})},s.prototype._initTools=function(){var n=this;this._rubberband=new a(document.createElement('div'),this._viewpanelContainer,this._pageView);this._rubberband.applied.addHandler(function(i,r){var u=r.rect,e=n._pageView.hitTest(u.left,u.top),f=n._viewpanelContainer.getBoundingClientRect();n._pageView.zoomFactor*=u.width>u.height?f.width/u.width:f.height/u.height;n._pageView.moveToPosition(t._getPositionByHitTestInfo(e))});this._magnifier=new h(document.createElement('div'),this._viewpanelContainer,this._pageView)},s.prototype._globalize=function(){var t=n.culture.Viewer;this._gSearchTitle.textContent=t.search;this._gMatchCase.innerHTML='&nbsp;&nbsp;&nbsp;'+t.matchCase;this._gWholeWord.innerHTML='&nbsp;&nbsp;&nbsp;'+t.wholeWord;this._gSearchResults.textContent=t.searchResults;this._gThumbnailsTitle.textContent=t.thumbnails;this._gOutlinesTitle.textContent=t.outlines;this._gPageSetupTitle.textContent=t.pageSetup;this._gPageSetupApplyBtn.textContent=t.ok;this._gExportsPageTitle.textContent=t.exports;this._gExportsPageApplyBtn.textContent=t.exportOk;this._gExportFormatTitle.textContent=t.exportFormat},s.prototype._autoCalculateHeight=function(){if(this._shouldAutoHeight()){var n=this._viewpanelContainer.style.height;this._viewpanelContainer.style.height='auto';this._viewerContainer.style.height=Math.max(this._viewpanelContainer.getBoundingClientRect().height,s._viewpanelContainerMinHeight)+'px';this._viewpanelContainer.style.height=n}},s.prototype._bindEvents=function(){var i=this,r;t._addEvent(window,'unload',function(){i._documentSource&&i._documentSource.dispose()});t._addEvent(document,'mousemove',function(n){if(i.fullScreen&&i._miniToolbar){var t=i._checkMiniToolbarVisible(n);i._miniToolbarPinnedTimer!=null&&t?(clearTimeout(i._miniToolbarPinnedTimer),i._miniToolbarPinnedTimer=null,i._showMiniToolbar(t)):i._miniToolbarPinnedTimer==null&&i._showMiniToolbar(t)}});t._addEvent(document,'keydown',function(t){t.keyCode===n.Key.Escape&&(i.fullScreen=!1)});this._historyManager.statusChanged.addHandler(this._onHistoryManagerStatusUpdated,this);this._onHistoryManagerStatusUpdated();this._pageView.pageIndexChanged.addHandler(function(){i._addHistory(!1,!0);i._updatePageIndex(i._pageView.pageIndex)});this._pageView.zoomFactorChanged.addHandler(function(n,t){i.zoomMode===f.Custom&&i._addHistory(!1,!0,{zoomFactor:t.oldValue});i.onZoomFactorChanged()});this._pageView.zoomModeChanged.addHandler(function(n,t){i._addHistory(!1,!0,{zoomMode:t.oldValue});i._updateZoomModeActions()});this._pageView.positionChanged.addHandler(function(){setTimeout(function(){i._historyManager.current.position=i._getCurrentPosition()},s._historyTimeout)});r=!1;this._searchManager.currentChanged.addHandler(function(){if(!r){var n=i._searchManager.current;n&&(r=!0,i._highlightPosition(n.pageIndex,n.boundsList),r=!1)}})},s.prototype._checkMiniToolbarVisible=function(n){var r=n.clientX,u=n.clientY,t=this._miniToolbar.getBoundingClientRect(),i=60,f=t.left-i,e=t.right+i,o=t.top-i,s=t.bottom+i;return r>=f&&r<=e&&u>=o&&u<=s},s.prototype._showMiniToolbar=function(n){var t=parseFloat(getComputedStyle(this._miniToolbar,'').opacity),r=.01,i,u=this._miniToolbar;i=n?setInterval(function(){if(t>=.8){window.clearInterval(i);return}t+=r;u.style.opacity=t.toString()},1):setInterval(function(){if(t<0){window.clearInterval(i);return}t-=r;u.style.opacity=t.toString()},1)},s.prototype._goToBookmark=function(n){var t=this;this._documentSource&&n!==""&&this._documentSource.getBookmark(n).then(function(n){n&&t._scrollToPosition(n,!0)})},s.prototype._executeCustomAction=function(n){var i=this,r;this._documentSource&&n!==""&&(this._initialPosition={pageIndex:this._pageIndex,pageBounds:{x:0,y:0,width:0,height:0}},this._resetDocument(),this._showViewPanelMessage(),this._setDocumentRendering(),r=this._documentSource,this._documentSource.executeCustomAction(n).then(function(n){i._initialPosition=n||i._initialPosition;i._getStatusUtilCompleted(r)}).catch(function(n){i._showViewPanelErrorMessage(t._getErrorMessage(n))}))},s.prototype._getStatusUtilCompleted=function(n){var t=this;!n||n.isLoadCompleted||n.isDisposed||n.getStatus().then(function(){t._documentSource===n&&setTimeout(function(){return t._getStatusUtilCompleted(n)},100)})},s.prototype._initChildren=function(){this._initPageView();this._initToolbar();this._initSidePanel();this._initSplitter();this._initFooter();this._initSearchBar();this._initMiniToolbar()},s.prototype._initSearchBar=function(){new t._SearchBar(this._searchBar,this);this._showSearchBar(!1)},s.prototype._showSearchBar=function(i){var r=this.hostElement.querySelector('.wj-viewer-outer'),u='with-searchbar';i?(n.removeClass(this._searchBar,t._hiddenCss),n.addClass(r,u)):(n.addClass(this._searchBar,t._hiddenCss),n.removeClass(r,u))},s.prototype._initFooter=function(){var n=this;new t._ViewerZoomBar(this._zoomBar,this);t._addEvent(this._footer.querySelector('.wj-close'),'click',function(){n._showFooter(!1)})},s.prototype._showFooter=function(i){var r=this.hostElement.querySelector('.wj-viewer-outer'),u='with-footer';i?(n.removeClass(this._footer,t._hiddenCss),n.addClass(r,u)):(n.addClass(this._footer,t._hiddenCss),n.removeClass(r,u))},s.prototype._createChildren=function(){var n=this.getTemplate();this.applyTemplate('wj-viewer wj-control',n,{_viewpanelContainer:'viewpanel-container',_toolbar:'toolbar',_mobileToolbar:'mobile-toolbar',_miniToolbar:'mini-toolbar',_leftPanel:'viewer-left-panel',_sidePanel:'side-panel',_viewerContainer:'viewer-container',_splitter:'splitter',_footer:'viewer-footer',_zoomBar:'zoom-bar',_searchBar:'search-bar'});this._initChildren()},s.prototype._initPageView=function(){var n=new t._CompositePageView(this._viewpanelContainer);n.viewMode=this.viewMode},Object.defineProperty(s.prototype,"_pageView",{get:function(){return n.Control.getControl(this._viewpanelContainer)},enumerable:!0,configurable:!0}),s.prototype._initSplitter=function(){var n=this;t._addEvent(this._splitter,'click',function(){return n._toggleSplitter()})},s.prototype._toggleSplitter=function(t){var r='wj-glyph-left',f='wj-glyph-right',i=this._splitter.querySelector('span'),u=n.Control.getControl(this._sidePanel);if(t===!0){if(n.hasClass(i,f))return}else if(t===!1){if(n.hasClass(i,r))return}else t=n.hasClass(i,r);if(t)u.collapse(),i.className=f;else{if(u.visibleTabPagesCount===0)return;i.className=r;u.expand()}this._resetViewPanelContainerWidth()},s.prototype._resetMiniToolbarPosition=function(){if(this._miniToolbar){var n=this.hostElement.getBoundingClientRect().width,t=this._miniToolbar.getBoundingClientRect().width;this._miniToolbar.style.left=(n-t)/2+'px'}},s.prototype._resetToolbarWidth=function(){var t=n.Control.getControl(this._toolbar);t.resetWidth()},s.prototype._resetViewPanelContainerWidth=function(){!this._isMobileTemplate()&&this.hostElement.getBoundingClientRect().width<=s._narrowWidthThreshold?n.addClass(this.hostElement,s._narrowCss):n.removeClass(this.hostElement,s._narrowCss);var t=this._splitter?this._splitter.getBoundingClientRect().width:0,i=this._leftPanel?this._leftPanel.getBoundingClientRect().width:0;this._viewpanelContainer.style.width=this._viewerContainer.getBoundingClientRect().width-t-i+'px';this._pageView.invalidate()},s.prototype._shouldAutoHeight=function(){return(this.hostElement.style.height==='100%'||this.hostElement.style.height==='auto')&&!this.fullScreen},s.prototype._initSidePanel=function(){var i=this,r=new t._SideTabs(this._sidePanel);r.collapse();r.collapsed.addHandler(function(){i._toggleSplitter(!0)});r.expanded.addHandler(function(){i._toggleSplitter(!1);var t=i._splitter?i._splitter.getBoundingClientRect().width:0,r=i._sidePanel.getBoundingClientRect().width+t;r>i._viewerContainer.getBoundingClientRect().width&&n.addClass(i._sidePanel,"collapsed")});r.tabPageVisibilityChanged.addHandler(function(n,t){(!t.tabPage.isHidden&&r.visibleTabPagesCount==1||t.tabPage.isHidden&&r.visibleTabPagesCount==0)&&i._resetViewPanelContainerWidth()});this._initSidePanelThumbnails();this._initSidePanelOutlines();this._initSidePanelSearch();this._initSidePanelExports();this._initSidePanelPageSetup()},s.prototype._clearPreHightLights=function(){this._pages.forEach(function(n){var i,t;if(n.content)for(i=n.content.querySelectorAll('.highlight'),t=0;t<i.length;t++)i.item(t).parentNode.removeChild(i.item(t))})},s.prototype._highlightPosition=function(n,i){var r=this,u,e=this._pageIndex,o=this._pageView.scrollTop,s=this._pageView.scrollLeft,f={pageIndex:n,pageBounds:i.length>0?i[0]:null};this._scrollToPosition(f,!0).then(function(){r._clearPreHightLights();r._pages[r.pageIndex].getContent().then(function(n){var r,f;for(u=n.querySelector('g'),r=0;r<i.length;r++)f=document.createElementNS('http://www.w3.org/2000/svg','rect'),f.setAttributeNS(null,'x',t._twipToPixel(i[r].x).toString()),f.setAttributeNS(null,'y',t._twipToPixel(i[r].y).toString()),f.setAttributeNS(null,'height',t._twipToPixel(i[r].height).toString()),f.setAttributeNS(null,'width',t._twipToPixel(i[r].width).toString()),f.setAttributeNS(null,'class','highlight'),u.appendChild(f)})})},s.prototype._scrollToPosition=function(n,t){t===!0&&this._addHistory(!0,!1);n.pageIndex=n.pageIndex||0;return this._pageView.moveToPosition(n)},s.prototype._initSidePanelSearch=function(){var i=this,r=n.Control.getControl(this._sidePanel),u=r.addPage(n.culture.Viewer.search,t.icons.search);this._gSearchTitle=u.outContent.querySelector('.wj-tabtitle');u.format(function(u){var v='<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-searchpre">'+t._createSvgBtn(t.icons.searchPrevious).innerHTML+'<\/button><button class="wj-btn wj-btn-searchnext">'+t._createSvgBtn(t.icons.searchNext).innerHTML+'<\/button><\/div><\/div><div class="wj-searchoption"><label><span wj-part="g-matchCase">&nbsp;&nbsp;&nbsp;'+n.culture.Viewer.matchCase+'<\/span><input type="checkbox" wj-part="match-case" /><\/label><\/div><div class="wj-searchoption"><label><span wj-part="g-wholeWord">&nbsp;&nbsp;&nbsp;'+n.culture.Viewer.wholeWord+'<\/span><input type="checkbox" wj-part="whole-word" /><\/label><\/div><h3 wj-part="g-searchResults" class="wj-searchresult">'+n.culture.Viewer.searchResults+'</h3>',e=t._toDOMs(v),a;i._gMatchCase=e.querySelector('[wj-part="g-matchCase"]');i._gWholeWord=e.querySelector('[wj-part="g-wholeWord"]');i._gSearchResults=e.querySelector('[wj-part="g-searchResults"]');u.outContent.querySelector('.wj-tabtitle-wrapper').appendChild(e);var s=u.outContent.querySelectorAll('input[type="checkbox"]')[0],h=u.outContent.querySelectorAll('input[type="checkbox"]')[1],o=u.outContent.querySelector('input[type="text"]'),y=u.outContent.querySelector('.wj-btn-searchpre'),p=u.outContent.querySelector('.wj-btn-searchnext');n.addClass(u.content.parentElement,'search-wrapper');n.addClass(u.content,'wj-searchresultlist');var f=new n.input.ListBox(u.content),c=!1,l=!1;f.formatItem.addHandler(function(t,i){var r=i.item,e=i.data,u=document.createElement('div'),f=document.createElement('div');r.innerHTML='';f.innerHTML=e.nearText;f.className='wj-search-text';u.innerHTML='Page '+(e.pageIndex+1);u.className='wj-search-page';n.addClass(r,'wj-search-item');r.setAttribute('tabIndex','-1');r.appendChild(f);r.appendChild(u)});f.selectedIndexChanged.addHandler(function(){return i._searchManager.currentIndex=f.selectedIndex});i._searchManager.searchCompleted.addHandler(function(){c=!0;f.itemsSource=i._searchManager.searchResults;c=!1});i._searchManager.currentChanged.addHandler(function(){if(!c&&!l){var n=i._searchManager.current;n&&(l=!0,f.selectedIndex=i._searchManager.currentIndex,l=!1)}});a=function(){if(f.itemsSource=null,s.checked=!1,h.checked=!1,o.value='',!i._documentSource||!i._documentSource.features||i._documentSource.paginated&&!i._documentSource.features.textSearchInPaginatedMode){r.hide(u);return}r.show(u)};i._documentSourceChanged.addHandler(function(){i._documentSource&&t._addWjHandler(i._documentEventKey,i._documentSource.loadCompleted,a);a()});t._addEvent(s,'click',function(){i._searchManager.matchCase=s.checked});t._addEvent(h,'click',function(){i._searchManager.wholeWord=h.checked});t._addEvent(o,'input',function(){i._searchManager.text=o.value});t._addEvent(o,'keyup',function(t){var r=t||window.event;r.keyCode===n.Key.Enter&&i._searchManager.search(r.shiftKey)});t._addEvent(p,'click',function(){return i._searchManager.search()});t._addEvent(y,'click',function(){return i._searchManager.search(!0)});t._addEvent(u.header,'keydown',function(t){var r,u=i._toolbar;t.keyCode===n.Key.Tab&&(r=u.querySelector('[tabIndex=0]')||u.querySelector('input:not([type="hidden"])')||u,r&&r.focus&&(r.focus(),t.preventDefault()))})})},s.prototype._initSidePanelOutlines=function(){var i=this,r=n.Control.getControl(this._sidePanel),u=r.addPage(n.culture.Viewer.outlines,t.icons.outlines);this._gOutlinesTitle=u.outContent.querySelector('.wj-tabtitle');this._outlinesPageId=u.id;u.format(function(u){var f,e;n.addClass(u.content,'wj-outlines-tree');f=new n.grid.FlexGrid(u.content);f.initialize({autoGenerateColumns:!1,columns:[{binding:'caption',width:'*'}],isReadOnly:!0,childItemsPath:'children',allowResizing:n.grid.AllowResizing.None,headersVisibility:n.grid.HeadersVisibility.None});f.itemFormatter=function(n,t,i,r){var u,f;u=r.firstElementChild?r.firstElementChild.outerHTML:'&nbsp;&nbsp;&nbsp;&nbsp;';f=n.rows[t].dataItem;r.innerHTML=u+'<a>'+f.caption+'</a>'};e=!0;f.selectionChanged.addHandler(function(t,u){var o,f;if(!e&&(o=u.panel.rows[u.row],o)){if(f=o.dataItem,f.position)i._scrollToPosition(f.position,!0);else if(f.target){if(!i._documentSource)return;i._documentSource.getBookmark(f.target).then(function(r){f.position=r;t.getSelectedState(u.row,u.col)!=n.grid.SelectedState.None&&i._scrollToPosition(r,!0)},function(){})}i._isMobileTemplate()&&r.collapse()}});var o=!1,s=function(){o||r.isCollapsed||!u.isActived||u.isHidden||(f.refresh(),o=!0)},h=function(){if(!i._documentSource){f.itemsSource=null;r.hide(u);return}var n=function(){if(!i._documentSource.hasOutlines){f.itemsSource=null;r.hide(u);return}i._documentSource.getOutlines().then(function(n){o=!1;f.itemsSource=n;r.show(u);s();e=!1})};t._addWjHandler(i._documentEventKey,i._documentSource.loadCompleted,n);n()};i._documentSourceChanged.addHandler(h);r.expanded.addHandler(s);r.tabPageActived.addHandler(s);h()})},s.prototype._initSidePanelThumbnails=function(){var i=this,r=n.Control.getControl(this._sidePanel),u=r.addPage(n.culture.Viewer.thumbnails,t.icons.thumbnails);this._gThumbnailsTitle=u.outContent.querySelector('.wj-tabtitle');this._thumbnailsPageId=u.id;u.format(function(u){n.addClass(u.content,'wj-thumbnaillist');var f=new n.input.ListBox(u.content),e=null,c=!1,v='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml: space = "preserve" >';f.formatItem.addHandler(function(r,u){var e=u.item,p=u.data;if(e.innerHTML='',i._pageView.pages){var o=document.createElement('div'),h=t._toDOM(v+'</svg>'),y=document.createElementNS('http://www.w3.org/2000/svg','g'),f=document.createElementNS('http://www.w3.org/2000/svg','image'),c=document.createElement('div'),a=i._pageView.pages[u.index],w=a.size.height.valueInPixel*s._thumbnailWidth/a.size.width.valueInPixel;n.addClass(e,'wj-thumbnail-item');f.setAttributeNS('http://www.w3.org/1999/xlink','href',p);f.setAttribute('x','0');f.setAttribute('y','0');f.setAttribute('width',s._thumbnailWidth.toString());f.setAttribute('height',w.toString());n.addClass(o,'wj-pagethumbnail');o.setAttribute('tabIndex','-1');y.appendChild(f);h.appendChild(y);o.appendChild(h);e.appendChild(o);l(h,a);c.className='page-index';c.innerHTML=(u.index+1).toString();e.appendChild(c)}});f.selectedIndexChanged.addHandler(function(){c||f.selectedIndex<0||f.selectedIndex==i._pageIndex||(i.moveToPage(f.selectedIndex),i._isMobileTemplate()&&r.collapse())});i.pageIndexChanged.addHandler(function(){return f.selectedIndex=i._pageIndex});var l=function(n,i){var r=s._thumbnailWidth,u=i.size.height.valueInPixel*r/i.size.width.valueInPixel,f=n.parentNode,e;t._transformSvg(n,r,u,1,i.rotateAngle);switch(i.rotateAngle){case t._RotateAngle.Rotation90:case t._RotateAngle.Rotation270:e=u;u=r;r=e}f.style.width=r+'px';f.style.height=u+'px';n.setAttribute('width',r.toString());n.setAttribute('height',u.toString())},y=function(){var t,n;if(!i._documentSource||!i._documentSource.isLoadCompleted)return null;for(t=[],n=0;n<i._documentSource.pageCount;n++)t.push(i._documentSource.getRenderToFilterUrl({format:'png',resolution:50,outputRange:n+1}));return t},o=function(){!r.isCollapsed&&u.isActived&&(e||(e=y()),u.isActived&&f.itemsSource!==e&&f.deferUpdate(function(){c=!0;f.itemsSource=e;f.selectedIndex=i._pageIndex;c=!1}))},h=function(){if(!i._documentSource||!i._documentSource.paginated){r.hide(u);f.itemsSource=null;return}r.show(u);e=null;o()},a=function(){if(!i._documentSource){r.hide(u);f.itemsSource=null;return}t._addWjHandler(i._documentEventKey,i._documentSource.loadCompleted,h);t._addWjHandler(i._documentEventKey,i._documentSource.pageCountChanged,h);t._addWjHandler(i._documentEventKey,i._documentSource.pageSettingsChanged,h);h()};i._documentSourceChanged.addHandler(a);a();r.expanded.addHandler(o);r.tabPageActived.addHandler(o);o();i._pageView.rotateAngleChanged.addHandler(function(){for(var t=f.hostElement.querySelectorAll('svg'),n=0;n<t.length;n++)l(t.item(n),i._pageView.pages[n])})})},s.prototype._initSidePanelExports=function(){var i=this,u=n.Control.getControl(this._sidePanel),f=u.addPage(n.culture.Viewer.exports,t.icons.exports),r;this._gExportsPageTitle=f.outContent.querySelector('.wj-tabtitle');this._exportsPageId=f.id;f.format(function(r){var l='<div class="wj-exportcontainer"><label wj-part="g-wj-exportformat">'+n.culture.Viewer.exportFormat+'<\/label><div class="wj-exportformats"><\/div><\/div>',a=t._toDOMs(l),o,f,s,h,c,e;r.outContent.querySelector('.wj-tabtitle-wrapper').appendChild(a);i._gExportFormatTitle=r.outContent.querySelector('[wj-part="g-wj-exportformat"]');o=r.outContent.querySelector('.wj-exportformats');new n.input.ComboBox(o);n.addClass(r.content.parentElement,'wj-exportformats-wrapper');f=document.createElement('div');s=new t._ExportOptionEditor(f);r.content.appendChild(f);h='<div class="wj-exportformats-footer"><a wj-part="btn-apply" href="javascript:void(0)" tabindex="-1" draggable="false">'+n.culture.Viewer.exportOk+"<\/a><\/div>";c=t._toDOMs(h);r.content.appendChild(c);e=r.content.querySelector('[wj-part="btn-apply"]');i._gExportsPageApplyBtn=e;t._addEvent(e,'click',function(){i._export(s.options);u.collapse()})});r=!0;this._documentSourceChanged.addHandler(function(){(r=!0,i._documentSource)&&t._addWjHandler(i._documentEventKey,i._documentSource.loadCompleted,function(){r&&i._ensureExportFormatsLoaded().then(function(){i._updateExportTab();r=i._exportFormats==null})})});u.tabPageActived.addHandler(function(){r&&u.activedTabPage.id===i._exportsPageId&&i._ensureExportFormatsLoaded().then(function(){i._updateExportTab();r=i._exportFormats==null})})},s.prototype._ensureExportFormatsLoaded=function(){var r=this,n;return!this._exportFormats&&this._documentSource&&!this._documentSource.isDisposed?this._documentSource.getSupportedExportDescriptions().then(function(n){r._exportFormats=n;r._setViewerAction(i.ShowExportsPanel)}):(n=new t._Promise,n.resolve(),n)},s.prototype._updateExportTab=function(i){var f=this,u;if(this._exportFormats){var s=n.Control.getControl(this._sidePanel),e=s.getTabPage(this._exportsPageId),r=n.Control.getControl(e.outContent.querySelector('.wj-exportformats')),o=n.Control.getControl(e.content.firstElementChild);i?(o.refresh(),r.itemsSource&&r.itemsSource.forEach(function(n){n.name=f._exportItemDescriptions[n.format].name}),r.refresh()):(u=[],this._exportFormats.forEach(function(n){var i=f._exportItemDescriptions[n.format];(!t._DocumentSource._isIOS()||i.supportIOS)&&(n.name=i.name,u.push(n))}),r.selectedIndexChanged.addHandler(function(){o.exportDescription=r.selectedItem}),r.itemsSource=u,r.displayMemberPath='name',r.selectedValuePath='format',r.selectedIndex=-1)}},s.prototype._initSidePanelPageSetup=function(){var i=this,u=n.Control.getControl(this._sidePanel),r=u.addPage(n.culture.Viewer.pageSetup,t.icons.pageSetup);this._gPageSetupTitle=r.outContent.querySelector('.wj-tabtitle');this._pageSetupPageId=r.id;r.format(function(r){var f=document.createElement('div'),h=new t._PageSetupEditor(f),c,l,e,o,s;r.content.appendChild(f);n.addClass(f,'wj-pagesetupcontainer');c='<div class="wj-pagesetup-footer"><a wj-part="btn-apply" href="javascript:void(0)" tabindex="-1" draggable="false">'+n.culture.Viewer.ok+"<\/a><\/div>";l=t._toDOMs(c);r.content.appendChild(l);e=r.content.querySelector('[wj-part="btn-apply"]');i._gPageSetupApplyBtn=e;t._addEvent(e,'click',function(){i._setPageSettings(h.pageSettings);u.collapse()});o=function(){h.pageSettings=i._documentSource.pageSettings};s=function(){i._documentSource&&(t._addWjHandler(i._documentEventKey,i._documentSource.pageSettingsChanged,o),o())};i._documentSourceChanged.addHandler(s);s()})},s.prototype._executeAction=function(u){if(!this._actionIsDisabled(u))switch(u){case i.TogglePaginated:this._innerPaginated=!this._innerPaginated;break;case i.Print:this._documentSource&&this._documentSource.print(this._pages.map(function(n){return n.rotateAngle}));break;case i.ShowExportsPanel:n.Control.getControl(this._sidePanel).active(this._exportsPageId);break;case i.Portrait:this._setPageLandscape(!1);break;case i.Landscape:this._setPageLandscape(!0);break;case i.ShowPageSetupDialog:this.showPageSetupDialog();break;case i.FirstPage:this.moveToPage(0);break;case i.LastPage:this._moveToLastPage();break;case i.PrePage:this.moveToPage(this._pageIndex-1);break;case i.NextPage:this.moveToPage(this._pageIndex+1);break;case i.Backward:this._moveBackwardHistory();break;case i.Forward:this._moveForwardHistory();break;case i.SelectTool:this.mouseMode=r.SelectTool;break;case i.MoveTool:this.mouseMode=r.MoveTool;break;case i.Continuous:this.viewMode=e.Continuous;break;case i.Single:this.viewMode=e.Single;break;case i.FitPageWidth:this.zoomMode=f.PageWidth;break;case i.FitWholePage:this.zoomMode=f.WholePage;break;case i.ZoomOut:this._zoomBtnClicked(!1,s._defaultZoomValues);break;case i.ZoomIn:this._zoomBtnClicked(!0,s._defaultZoomValues);break;case i.ToggleFullScreen:this.fullScreen=!this.fullScreen;break;case i.ShowHamburgerMenu:this._hamburgerMenu.showMenu();break;case i.ShowViewMenu:this._viewMenu.showMenu();break;case i.ShowSearchBar:this._showSearchBar(n.hasClass(this._searchBar,t._hiddenCss));this._setViewerAction(i.ShowSearchBar);break;case i.ShowThumbnails:n.Control.getControl(this._sidePanel).active(this._thumbnailsPageId);break;case i.ShowOutlines:n.Control.getControl(this._sidePanel).active(this._outlinesPageId);break;case i.ShowPageSetupPanel:n.Control.getControl(this._sidePanel).active(this._pageSetupPageId);break;case i.ShowZoomBar:this._showFooter(!0);break;case i.SearchPrev:this._searchManager.search(!0);break;case i.SearchNext:this._searchManager.search();break;case i.ShowSearchOptions:this._searchOptionsMenu.showMenu(!0);break;case i.SearchMatchCase:this._searchManager.matchCase=!this._searchManager.matchCase;break;case i.SearchMatchWholeWord:this._searchManager.wholeWord=!this._searchManager.wholeWord;break;case i.RubberbandTool:this.mouseMode=r.RubberbandTool;break;case i.MagnifierTool:this.mouseMode=r.MagnifierTool;break;case i.RotateDocument:this._rotateDocument();break;case i.RotatePage:this._rotatePage()}},s.prototype._initSearchOptionsMenu=function(n){this._searchOptionsMenu=new t._SearchOptionsMenu(this,n)},s.prototype._initHamburgerMenu=function(n){this._hamburgerMenu=new t._HamburgerMenu(this,n)},s.prototype._initViewMenu=function(n){this._viewMenu=new t._ViewMenu(this,n)},s.prototype._initToolbar=function(){new t._ViewerToolbar(this._toolbar,this);new t._ViewerMobileToolbar(this._mobileToolbar,this)},s.prototype._clearExportFormats=function(){this._exportFormats=null},Object.defineProperty(s.prototype,"_exportItemDescriptions",{get:function(){return s._exportItems||(s._exportItems={pdf:{name:n.culture.Viewer.pdfExportName,supportIOS:!0},doc:{name:n.culture.Viewer.docExportName,supportIOS:!1},docx:{name:n.culture.Viewer.docxExportName,supportIOS:!1},rtf:{name:n.culture.Viewer.rtfExportName,supportIOS:!1},xlsx:{name:n.culture.Viewer.xlsxExportName,supportIOS:!0},xls:{name:n.culture.Viewer.xlsExportName,supportIOS:!0},mhtml:{name:n.culture.Viewer.mhtmlExportName,supportIOS:!0},html:{name:n.culture.Viewer.htmlExportName,supportIOS:!0},zip:{name:n.culture.Viewer.metafileExportName,supportIOS:!1},csv:{name:n.culture.Viewer.csvExportName,supportIOS:!0},tiff:{name:n.culture.Viewer.tiffExportName,supportIOS:!0},bmp:{name:n.culture.Viewer.bmpExportName,supportIOS:!1},emf:{name:n.culture.Viewer.emfExportName,supportIOS:!1},gif:{name:n.culture.Viewer.gifExportName,supportIOS:!1},jpeg:{name:n.culture.Viewer.jpegExportName,suportIOS:!1},jpg:{name:n.culture.Viewer.jpegExportName,supportIOS:!1},png:{name:n.culture.Viewer.pngExportName,supportIOS:!1}}),s._exportItems},enumerable:!0,configurable:!0}),s.prototype._actionIsChecked=function(u){switch(u){case i.TogglePaginated:return this._innerPaginated===!0;case i.Landscape:return this._documentSource&&this._documentSource.pageSettings?this._documentSource.pageSettings.landscape:!1;case i.Portrait:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.pageSettings.landscape:!1;case i.SelectTool:return this.mouseMode===r.SelectTool;case i.MoveTool:return this.mouseMode===r.MoveTool;case i.RubberbandTool:return this.mouseMode===r.RubberbandTool;case i.MagnifierTool:return this.mouseMode===r.MagnifierTool;case i.Continuous:return this.viewMode==e.Continuous;case i.Single:return this.viewMode==e.Single;case i.ToggleFullScreen:return this.fullScreen;case i.FitPageWidth:return this.zoomMode==f.PageWidth;case i.FitWholePage:return this.zoomMode==f.WholePage;case i.SearchMatchCase:return this._searchManager.matchCase;case i.SearchMatchWholeWord:return this._searchManager.wholeWord;case i.ShowSearchBar:return!n.hasClass(this._searchBar,t._hiddenCss)}return!1},s.prototype._isDocumentSourceLoaded=function(){return this._documentSource&&this._documentSource.isLoadCompleted},s.prototype._actionIsDisabled=function(n){if(!this._isDocumentSourceLoaded()||!(this._documentSource.pageCount>0))return!0;switch(n){case i.TogglePaginated:return this._innerPaginated==null;case i.ShowExportsPanel:return!this._exportFormats||this._exportFormats.length===0;case i.Landscape:case i.Portrait:case i.ShowPageSetupDialog:case i.ShowPageSetupPanel:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.paginated:!0;case i.FirstPage:case i.PrePage:return this._pageIndex<=0;case i.LastPage:case i.NextPage:return this._pageIndex>=this._documentSource.pageCount-1;case i.Backward:return!this._historyManager.canBackward();case i.Forward:return!this._historyManager.canForward();case i.Continuous:case i.Single:return!this._documentSource||!this._documentSource.paginated;case i.ZoomOut:return this.zoomFactor<=s._defaultZoomValues[0].value;case i.ZoomIn:var t=s._defaultZoomValues;return this.zoomFactor>=t[t.length-1].value}return!1},s.prototype._actionIsShown=function(n){var r=this._documentSource?this._documentSource.features:null;switch(n){case i.TogglePaginated:return r&&r.paginated&&r.nonPaginated;case i.Landscape:case i.Portrait:case i.ShowPageSetupDialog:case i.ShowPageSetupPanel:return r?r.pageSettings:this._supportsPageSettingActions();case i.SelectTool:case i.MoveTool:return!t._DocumentSource._isMobile();case i.ShowSearchBar:return r&&(!this._documentSource.paginated||r.textSearchInPaginatedMode);case i.ShowOutlines:return this._documentSource&&this._documentSource.hasOutlines}return!0},s.prototype._onViewerActionStatusChanged=function(n){this._viewerActionStatusChanged.raise(this,n)},s.prototype._setViewerAction=function(n,t,i,r){var u={actionType:n,disabled:t?t:this._actionIsDisabled(n),checked:i?i:this._actionIsChecked(n),shown:r?r:this._actionIsShown(n)};this._onViewerActionStatusChanged({action:u})},s.prototype._updateViewerActions=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._updateMouseModeActions();this._setViewerAction(i.ShowExportsPanel)},s.prototype._updateViewModeActions=function(){this._setViewerAction(i.Continuous);this._setViewerAction(i.Single)},s.prototype._updatePageSettingsActions=function(){this._setViewerAction(i.TogglePaginated);this._setViewerAction(i.Landscape);this._setViewerAction(i.Portrait);this._setViewerAction(i.ShowPageSetupDialog)},s.prototype._updateMouseModeActions=function(){this._setViewerAction(i.SelectTool);this._setViewerAction(i.MoveTool);this._setViewerAction(i.MagnifierTool);this._setViewerAction(i.RubberbandTool)},s.prototype._updateZoomModeActions=function(){this._setViewerAction(i.FitPageWidth);this._setViewerAction(i.FitWholePage)},s.prototype._updateZoomFactorActions=function(){this._setViewerAction(i.ZoomOut);this._setViewerAction(i.ZoomIn)},s.prototype._onPageSettingsUpdated=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._resetToolbarWidth()},s.prototype._onPageCountUpdated=function(){this._updatePageNavActions();this._resetToolbarWidth()},s.prototype._updatePageNavActions=function(){this._setViewerAction(i.FirstPage);this._setViewerAction(i.LastPage);this._setViewerAction(i.PrePage);this._setViewerAction(i.NextPage)},s.prototype._onHistoryManagerStatusUpdated=function(){this._setViewerAction(i.Backward);this._setViewerAction(i.Forward)},s.prototype._updateUI=function(){var r=this,t;Object.keys(i).forEach(function(n){isNaN(n)||r._setViewerAction(i[i[n]])});t=n.Control.getControl(this._sidePanel);t&&t.enableAll(this._isDocumentSourceLoaded())},s.prototype._updateViewContainerCursor=function(){var t=this.mouseMode===r.MoveTool;t?n.hasClass(this._viewpanelContainer,'move')||n.addClass(this._viewpanelContainer,'move'):n.hasClass(this._viewpanelContainer,'move')&&n.removeClass(this._viewpanelContainer,'move')},s.prototype._updateFullScreenStyle=function(){var i='full-screen',t=document.body;this.fullScreen?(this._bodyOriginScrollLeft=document.documentElement&&document.documentElement.scrollLeft||t.scrollLeft,this._bodyOriginScrollTop=document.documentElement&&document.documentElement.scrollTop||t.scrollTop,n.addClass(this.hostElement,i),n.addClass(t,i),this._hostOriginWidth=this.hostElement.style.width,this._hostOriginHeight=this.hostElement.style.height,this.hostElement.style.width='100%',this.hostElement.style.height='100%',window.scrollTo(0,0)):(n.removeClass(this.hostElement,i),n.removeClass(t,i),this.hostElement.style.width=this._hostOriginWidth,this.hostElement.style.height=this._hostOriginHeight,n.isNumber(this._bodyOriginScrollLeft)&&(document.documentElement&&(document.documentElement.scrollLeft=this._bodyOriginScrollLeft),t.scrollLeft=this._bodyOriginScrollLeft),n.isNumber(this._bodyOriginScrollTop)&&(document.documentElement&&(document.documentElement.scrollTop=this._bodyOriginScrollTop),t.scrollTop=this._bodyOriginScrollTop));this.refresh()},s.prototype._export=function(n){var r=this._documentSource.getRenderToFilterUrl(n),i;if(t._DocumentSource._isIOS()){window.open(r);return}i=document.querySelector('#viewDownloader');i||(i=document.createElement('iframe'),i.id='viewDownloader',i.style.display='none',document.body.appendChild(i));i.src=r},s.prototype.showPageSetupDialog=function(){this._pageSetupDialog||this._createPageSetupDialog();this._pageSetupDialog.showWithValue(this._documentSource.pageSettings)},s.prototype._createPageSetupDialog=function(){var n=this,t=document.createElement("div");t.style.display='none';n.hostElement.appendChild(t);n._pageSetupDialog=new o(t);n._pageSetupDialog.applied.addHandler(function(){return n._setPageSettings(n._pageSetupDialog.pageSettings)})},s.prototype.zoomToView=function(){n._deprecated('zoomToView','zoomMode');var t=this._documentSource;t&&(this.zoomMode=f.WholePage)},s.prototype.zoomToViewWidth=function(){n._deprecated('zoomToViewWidth','zoomMode');var t=this._documentSource;t&&(this.zoomMode=f.PageWidth)},s.prototype._setPageLandscape=function(n){var r=this,i=this._documentSource.pageSettings;t._setLandscape(i,n);r._setPageSettings(i)},s.prototype._setPaginated=function(n){var i=this._documentSource.features,t=this._documentSource.pageSettings;i&&t&&n!=t.paginated&&(n&&i.paginated?(t.paginated=!0,this._setPageSettings(t)):!n&&i.nonPaginated&&(t.paginated=!1,this._setPageSettings(t)))},s.prototype._setPageSettings=function(n){var i=this;return this._showViewPanelMessage(),this._setDocumentRendering(),this._documentSource.setPageSettings(n).then(function(){i._resetDocument();i._reRenderDocument()}).catch(function(n){i._showViewPanelErrorMessage(t._getErrorMessage(n))})},s.prototype._showViewPanelErrorMessage=function(n){this._showViewPanelMessage(n,'errormessage')},s.prototype._showViewPanelMessage=function(t,i){var r=this._viewpanelContainer.querySelector('.wj-viewer-loading'),u;r||(r=document.createElement('div'),r.innerHTML='<span class="verticalalign"></span><span class="textspan"></span>',this._viewpanelContainer.appendChild(r));r.className='wj-viewer-loading';i&&n.addClass(r,i);u=r.querySelector('.textspan');u&&(u.innerHTML=t||n.culture.Viewer.loading)},s.prototype._removeViewPanelMessage=function(){var n=this._viewpanelContainer.querySelector('.wj-viewer-loading');n&&this._viewpanelContainer.removeChild(n)},s.prototype._reRenderDocument=function(){this._documentSource&&(this._showViewPanelMessage(),this._documentSource.load())},s.prototype._zoomBtnClicked=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].value>this.zoomFactor){i=r-.5;break}else if(t[r].value===this.zoomFactor){i=r;break}(i==null&&(i=t.length-.5),i<=0&&!n)||i>=t.length-1&&n||(i=n?Math.floor(i)+1:Math.ceil(i)-1,this.zoomFactor=t[i].value)},s.prototype._getDocumentSource=function(){return this._documentSource},s.prototype._setDocumentSource=function(n){var t=this;this._loadDocument(n).then(function(){t._documentSource==n&&t._ensureExportFormatsLoaded()})},s.prototype._loadDocument=function(n){var i=this,r=new t._Promise;return this._documentSource===n?r:(this._disposeDocument(),this._documentSource=n,n&&(t._addWjHandler(this._documentEventKey,n.loading,function(){i._updateUI()},this),t._addWjHandler(this._documentEventKey,n.loadCompleted,this._onDocumentSourceLoadCompleted,this),t._addWjHandler(this._documentEventKey,n.queryLoadingData,function(n,t){i.onQueryLoadingData(t)},this),n.isLoadCompleted?(this._onDocumentSourceLoadCompleted(),this._keepServiceConnection(),r.resolve()):(this._showViewPanelMessage(),n.load().then(function(n){i._keepServiceConnection();r.resolve(n)}).catch(function(n){i._showViewPanelErrorMessage(t._getErrorMessage(n))}))),this._onDocumentSourceChanged(),r)},s.prototype._hyperlinkClicked=function(n){var r=n.getAttribute(t._Page._bookmarkAttr),i;if(r){this._goToBookmark(r);return}i=n.getAttribute(t._Page._customActionAttr);i&&this._executeCustomAction(i)},s.prototype._onDocumentSourceLoadCompleted=function(){var s=this,r=this._documentSource.errors,f,u,i,o,n;if(this._documentSource.isLoadCompleted){if(this._removeViewPanelMessage(),this._pages.length=0,this._documentSource.pageCount<=0){this._updateUI();return}for(f={width:this._documentSource.pageSettings.width,height:this._documentSource.pageSettings.height},n=0;n<this._documentSource.pageCount;n++)u=new t._Page(this._documentSource,n,f),u.linkClicked.addHandler(function(n,t){s._hyperlinkClicked(t.element)}),this._pages.push(u);if(this._pageView.pages=this._pages,this._documentSource.paginated||(this.viewMode=e.Single),this._autoHeightCalculated||(this._autoCalculateHeight(),this._autoHeightCalculated=!0),i=this._documentSource.initialPosition||this._initialPosition,this._documentSource.initialPosition=null,this._initialPosition=null,i&&i.pageIndex!=0||(this._pageIndex=0,i={pageIndex:0}),this._scrollToPosition(i),this._updateHistoryCurrent(),r&&r.length>0)for(o="",n=0;n<r.length;n++)o+=r[n]+"\r\n";this._updateUI()}},s.prototype._clearKeepSerConnTimer=function(){this._keepSerConnTimer!=null&&clearTimeout(this._keepSerConnTimer)},s.prototype._keepServiceConnection=function(){var n=this,t;(this._clearKeepSerConnTimer(),t=this._documentSource,t)&&(this._keepSerConnTimer=setTimeout(function(){n._documentSource===t&&n._documentSource.getStatus().then(function(){return n._keepServiceConnection()})},this._getExpiredTime()))},s.prototype._getExpiredTime=function(){if(this._expiredTime)return this._expiredTime;var n=this._documentSource;return!n||!n.expiredDateTime||!n.executionDateTime?6e3:(this._expiredTime=n.expiredDateTime.getTime()-n.executionDateTime.getTime(),this._expiredTime=Math.max(this._expiredTime-12e4,0),this._expiredTime)},s.prototype._disposeDocument=function(){this._documentSource&&(t._removeAllWjHandlers(this._documentEventKey,this._documentSource.disposed),t._removeAllWjHandlers(this._documentEventKey,this._documentSource.pageCountChanged),t._removeAllWjHandlers(this._documentEventKey,this._documentSource.pageSettingsChanged),t._removeAllWjHandlers(this._documentEventKey,this._documentSource.loadCompleted),t._removeAllWjHandlers(this._documentEventKey,this._documentSource.queryLoadingData),this._documentSource.dispose());this._resetDocument()},s.prototype._resetDocument=function(){this._pages.length=0;this._pageView.resetPages();this._pageIndex=0;clearTimeout(this._historyTimer);this._historyManager.clear();this._rubberband&&this._rubberband.reset();this._magnifier&&this._magnifier.reset()},s.prototype._setDocumentRendering=function(){this._documentSource._updateIsLoadCompleted(!1)},s.prototype.moveToPage=function(n){return this._innerMoveToPage(n)},s.prototype._getCurrentPosition=function(){return t._getPositionByHitTestInfo(this._pageView.hitTest(0,0))},s.prototype._resolvePageIndex=function(n){return Math.min(this._documentSource.pageCount-1,Math.max(n,0))},s.prototype._innerMoveToPage=function(n){var t=this._resolvePageIndex(n);return t!=this.pageIndex&&this._addHistory(!1,!0),this._updatePageIndex(n),this._pageView.moveToPage(n)},s.prototype._moveToLastPage=function(){var n=new t._Promise;return this._ensureDocumentLoadCompleted(n)?this._innerMoveToPage(this._documentSource.pageCount-1):n},s.prototype._moveBackwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canBackward()){var n=this._historyManager.backward();this._moveToHistory(n)}},s.prototype._moveForwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canForward()){var n=this._historyManager.forward();this._moveToHistory(n)}},s.prototype._moveToHistory=function(n){var i=this,t;if(n)for(this._historyMoving=!0,this.viewMode=n.viewMode,n.zoomMode===f.Custom?this.zoomFactor=n.zoomFactor:this.zoomMode=n.zoomMode,this._scrollToPosition(n.position).then(function(){i._historyMoving=!1}),t=0;t<n.pageAngles.length;t++)this._pageView.rotatePageTo(t,n.pageAngles[t])},s.prototype._isPositionEquals=function(n,t,i){return n.pageIndex!==t.pageIndex?!1:i?n.pageBounds==t.pageBounds?!0:n.pageBounds==null||t.pageBounds==null?!1:n.pageBounds.x===t.pageBounds.x&&n.pageBounds.y===t.pageBounds.y:!0},s.prototype._isPageAnglesChanged=function(n){var i,t;if(n.length!=this._pageView.pages.length)return!0;for(i=n.length,t=0;t<i;t++)if(n[t]!==this._pageView.pages[t].rotateAngle)return!0;return!1},s.prototype._updateHistoryCurrent=function(){this._historyManager.current.position=this._getCurrentPosition();this._historyManager.current.zoomMode=this.zoomMode;this._historyManager.current.zoomFactor=this.zoomFactor;this._historyManager.current.viewMode=this.viewMode;this._updateCurrentPageAngles(this._historyManager.current)},s.prototype._innerAddHistory=function(n){var i=this._getCurrentPosition(),t=this._historyManager.current;(!this._isPositionEquals(i,t.position,n)||this.viewMode!==t.viewMode||this.zoomMode!==t.zoomMode||this.zoomFactor!==t.zoomFactor||this._isPageAnglesChanged(t.pageAngles))&&(t.position=t.position||this._getCurrentPosition(),t.viewMode=t.viewMode==null?this.viewMode:t.viewMode,t.zoomMode=t.zoomMode==null?this.zoomMode:t.zoomMode,t.zoomFactor=t.zoomFactor==null?this.zoomFactor:t.zoomFactor,t.pageAngles||this._updateCurrentPageAngles(t),this._historyManager.add(),this._updateHistoryCurrent())},s.prototype._addHistory=function(n,t,i){var r=this;if(!this.isUpdating&&!this._historyMoving){if(!t){this._innerAddHistory(n);return}this._mergeHistory(i);this._historyTimer!=null&&clearTimeout(this._historyTimer);this._historyTimer=setTimeout(function(){r._historyTimer=null;r._innerAddHistory(n)},s._historyTimeout)}},s.prototype._updateCurrentPageAngles=function(n){var i,t;for(n.pageAngles||(n.pageAngles=[]),i=this._pageView.pages.length,t=0;t<i;t++)n.pageAngles[t]=this._pageView.pages[t].rotateAngle},s.prototype._mergeHistory=function(n){var t=this._historyManager.current,r,i;if(!n){t.viewMode=this.viewMode;t.zoomMode=this.zoomMode;t.zoomFactor=this.zoomFactor;this._updateCurrentPageAngles(t);return}if(n.viewMode!=null&&(t.viewMode=n.viewMode),n.zoomMode!=null&&(t.zoomMode=n.zoomMode),n.zoomFactor!=null&&(t.zoomFactor=n.zoomFactor),n.pageAngles)for(t.pageAngles=[],r=this._pageView.pages.length,i=0;i<r;i++)t.pageAngles[i]=n.pageAngles[i]},s.prototype._ensureDocumentLoadCompleted=function(n){return this._documentSource?this._documentSource.isLoadCompleted?!0:(n&&n.reject('Cannot set page index when document source is not loaded completely.'),!1):(n&&n.reject('Cannot set page index without document source.'),!1)},s.prototype._updatePageIndex=function(n){this._documentSource&&(n=Math.min(this._documentSource.pageCount-1,Math.max(n,0)),this._pageIndex!==n)&&(this._pageIndex=n,this.onPageIndexChanged())},s.prototype._getRotatedAngle=function(n){switch(n){case t._RotateAngle.NoRotate:return t._RotateAngle.Rotation90;case t._RotateAngle.Rotation90:return t._RotateAngle.Rotation180;case t._RotateAngle.Rotation180:return t._RotateAngle.Rotation270;case t._RotateAngle.Rotation270:return t._RotateAngle.NoRotate}return t._RotateAngle.NoRotate},s.prototype._rotateDocument=function(){var t,n;for(this._addHistory(!1,!0),t=this._pageView.pages.length,n=0;n<t;n++)this._pageView.rotatePageTo(n,this._getRotatedAngle(this._pageView.pages[n].rotateAngle))},s.prototype._rotatePage=function(){this._addHistory(!1,!0);var n=this._pageView.pages[this._pageIndex];this._pageView.rotatePageTo(this._pageIndex,this._getRotatedAngle(n.rotateAngle))},Object.defineProperty(s.prototype,"zoomMode",{get:function(){return this._pageView.zoomMode},set:function(n){this._pageView.zoomMode=n;this._updateZoomModeActions()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zoomFactor",{get:function(){return this._pageView.zoomFactor},set:function(n){this._pageView.zoomFactor=n},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"viewMode",{get:function(){return this._viewMode},set:function(n){this._viewMode!==n&&(this._addHistory(!1,!0),this._viewMode=n,this.onViewModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectMouseMode",{get:function(){return this._mouseMode===r.SelectTool},set:function(t){(n._deprecated('selectMouseMode','mouseMode'),(!t||this._mouseMode!==r.SelectTool)&&(t||this._mouseMode===r.SelectTool))&&(this.mouseMode=t?r.SelectTool:r.MoveTool)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mouseMode",{get:function(){return this._mouseMode},set:function(t){if(this._mouseMode!==(t=n.asEnum(t,r))){var i=this.selectMouseMode;this._mouseMode=t;switch(this._mouseMode){case r.RubberbandTool:this._rubberband.activate();this._magnifier.deactivate();break;case r.MagnifierTool:this._magnifier.activate();this._rubberband.deactivate();break;default:this._magnifier.deactivate();this._rubberband.deactivate()}this.onMouseModeChanged();i!=this.selectMouseMode&&this.onSelectMouseModeChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fullScreen",{get:function(){return this._fullScreen},set:function(n){this._fullScreen!==n&&(this._fullScreen=n,this.onFullScreenChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),s.prototype._initMiniToolbar=function(){var i=n.Control.getControl(this._miniToolbar);i||(new t._ViewerMiniToolbar(this._miniToolbar,this),n.addClass(this._miniToolbar,"wj-mini-toolbar"))},s.prototype._pinMiniToolbar=function(){var n=this;this._showMiniToolbar(!0);this._miniToolbarPinnedTimer=setTimeout(function(){n._showMiniToolbar(!1);n._miniToolbarPinnedTimer=null},s._miniToolbarPinnedTime)},s.prototype._onDocumentSourceChanged=function(i){this._clearExportFormats();this._documentSourceChanged.raise(this,i||new n.EventArgs);this._updateViewerActions();this._onPageSettingsUpdated();this._onPageCountUpdated();this._updateViewModeActions();this._searchManager.documentSource=this._documentSource;this._documentSource&&(t._addWjHandler(this._documentEventKey,this._documentSource.pageSettingsChanged,this._onPageSettingsUpdated,this),t._addWjHandler(this._documentEventKey,this._documentSource.pageCountChanged,this._onPageCountUpdated,this),t._addWjHandler(this._documentEventKey,this._documentSource.loadCompleted,this._onPageCountUpdated,this))},s.prototype.onPageIndexChanged=function(t){this.pageIndexChanged.raise(this,t||new n.EventArgs);this._updatePageNavActions()},s.prototype.onViewModeChanged=function(t){this.viewModeChanged.raise(this,t||new n.EventArgs);this._updateViewModeActions();this._pageView.viewMode=this.viewMode},s.prototype.onSelectMouseModeChanged=function(t){this.selectMouseModeChanged.hasHandlers&&n._deprecated('selectMouseModeChanged','mouseModeChanged');this.selectMouseModeChanged.raise(this,t)},s.prototype.onMouseModeChanged=function(i){(this.mouseModeChanged.raise(this,i||new n.EventArgs),(this.mouseMode===r.MoveTool||this.mouseMode===r.SelectTool)&&t._DocumentSource._isMobile())||(this._updateMouseModeActions(),this._updateViewContainerCursor(),this._pageView.panMode=this.mouseMode===r.MoveTool)},s.prototype.onFullScreenChanged=function(t){this.fullScreenChanged.raise(this,t||new n.EventArgs);this._setViewerAction(i.ToggleFullScreen);this._updateFullScreenStyle();this.fullScreen&&this._pinMiniToolbar()},s.prototype.onZoomFactorChanged=function(t){this.zoomFactorChanged.raise(this,t||new n.EventArgs);this._updateZoomFactorActions();this._updateZoomModeActions()},s.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},s}(n.Control);u._seperatorHtml="<div class='wj-separator' style='width:100%;height: 1px;margin: 3px 0;background-color:rgba(0,0,0,.2)'/>";u._viewpanelContainerMinHeight=300;u._miniToolbarPinnedTime=3e3;u._narrowCss='narrow';u._narrowWidthThreshold=400;u._thumbnailWidth=100;u._historyTimeout=300;u._defaultZoomValues=[{name:n.Globalize.format(.05,'p0'),value:.05},{name:n.Globalize.format(.25,'p0'),value:.25},{name:n.Globalize.format(.5,'p0'),value:.5},{name:n.Globalize.format(.75,'p0'),value:.75},{name:n.Globalize.format(1,'p0'),value:1},{name:n.Globalize.format(2,'p0'),value:2},{name:n.Globalize.format(3,'p0'),value:3},{name:n.Globalize.format(4,'p0'),value:4},{name:n.Globalize.format(8,'p0'),value:8},{name:n.Globalize.format(10,'p0'),value:10}];u.controlTemplate='<div class="wj-viewer-outer wj-content with-footer"><div wj-part="toolbar"><\/div><div wj-part="mobile-toolbar"><\/div><div class="wj-viewer-container" wj-part="viewer-container"><div class="wj-viewer-leftpanel" wj-part="viewer-left-panel"><div class="wj-viewer-tabsleft" wj-part="side-panel"><\/div><\/div><div class="wj-viewer-splitter" wj-part="splitter"><button class="wj-btn wj-btn-default" type="button"><span class="wj-glyph-right"><\/span><\/button><\/div><div class="wj-viewpanel-container" wj-part="viewpanel-container"><\/div><\/div><div wj-part="mini-toolbar"><\/div><div class="wj-searchbar mobile" wj-part="search-bar"><\/div><div class="wj-viewer-footer mobile" class="wj-viewer-footer" wj-part="viewer-footer"><div wj-part="zoom-bar"><\/div><span class="wj-close">×<\/span><\/div><\/div>';t.ViewerBase=u;o=function(i){function r(r){var u=i.call(this,r)||this,f;return u.applied=new n.Event,u.modal=!0,u.hideTrigger=n.input.PopupTrigger.None,f=u.getTemplate(),u.applyTemplate('wj-control wj-content',f,{_gHeader:'g-header',_pageSetupEditorElement:'pagesetup-editor',_btnApply:'btn-apply',_btnCancel:'btn-cancel',_btnClose:'a-close'}),u._pageSetupEditor=new t._PageSetupEditor(u._pageSetupEditorElement),u._globalize(),u._addEvents(),u}return __extends(r,i),Object.defineProperty(r.prototype,"pageSettings",{get:function(){return this._pageSetupEditor.pageSettings},enumerable:!0,configurable:!0}),r.prototype._globalize=function(){var t=n.culture.Viewer;this._gHeader.textContent=t.pageSetup;this._btnApply.textContent=t.ok;this._btnCancel.textContent=t.cancel},r.prototype._addEvents=function(){var n=this;t._addEvent(n._btnClose,'click',function(){n.hide()});t._addEvent(n._btnCancel,'click',function(){n.hide()});t._addEvent(n._btnApply,'click',function(){n._apply();n.hide()})},r.prototype._apply=function(){this.onApplied()},r.prototype.onApplied=function(){this.applied.raise(this,new n.EventArgs)},r.prototype.showWithValue=function(n){this._pageSetupEditor.pageSettings=n;i.prototype.show.call(this)},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&(this._globalize(),this._pageSetupEditor.refresh())},r}(n.input.Popup);o.controlTemplate='<div><div wj-part="g-header" class="wj-dialog-header"><a class="wj-hide" wj-part="a-close" style="float:right;outline:none;text-decoration:none;padding:0px 6px" href="" tabindex="-1" draggable="false">&times;<\/a><\/div><div style="padding:12px;"><div wj-part="pagesetup-editor"><\/div><div class="wj-dialog-footer"><a class="wj-hide" wj-part="btn-apply" href="" tabindex="-1" draggable="false"><\/a>&nbsp;&nbsp;<a class="wj-hide" wj-part="btn-cancel" href="" tabindex="-1" draggable="false"><\/a><\/div><\/div><\/div>';t._PageSetupDialog=o,function(n){n[n.TogglePaginated=0]="TogglePaginated";n[n.Print=1]="Print";n[n.Portrait=2]="Portrait";n[n.Landscape=3]="Landscape";n[n.ShowPageSetupDialog=4]="ShowPageSetupDialog";n[n.FirstPage=5]="FirstPage";n[n.PrePage=6]="PrePage";n[n.NextPage=7]="NextPage";n[n.LastPage=8]="LastPage";n[n.PageNumber=9]="PageNumber";n[n.PageCountLabel=10]="PageCountLabel";n[n.Backward=11]="Backward";n[n.Forward=12]="Forward";n[n.SelectTool=13]="SelectTool";n[n.MoveTool=14]="MoveTool";n[n.Continuous=15]="Continuous";n[n.Single=16]="Single";n[n.ZoomOut=17]="ZoomOut";n[n.ZoomIn=18]="ZoomIn";n[n.ZoomValue=19]="ZoomValue";n[n.FitWholePage=20]="FitWholePage";n[n.FitPageWidth=21]="FitPageWidth";n[n.ToggleFullScreen=22]="ToggleFullScreen";n[n.ShowHamburgerMenu=23]="ShowHamburgerMenu";n[n.ShowViewMenu=24]="ShowViewMenu";n[n.ShowSearchBar=25]="ShowSearchBar";n[n.ShowThumbnails=26]="ShowThumbnails";n[n.ShowOutlines=27]="ShowOutlines";n[n.ShowExportsPanel=28]="ShowExportsPanel";n[n.ShowPageSetupPanel=29]="ShowPageSetupPanel";n[n.ShowZoomBar=30]="ShowZoomBar";n[n.ShowSearchOptions=31]="ShowSearchOptions";n[n.SearchPrev=32]="SearchPrev";n[n.SearchNext=33]="SearchNext";n[n.SearchMatchCase=34]="SearchMatchCase";n[n.SearchMatchWholeWord=35]="SearchMatchWholeWord";n[n.RubberbandTool=36]="RubberbandTool";n[n.MagnifierTool=37]="MagnifierTool";n[n.RotateDocument=38]="RotateDocument";n[n.RotatePage=39]="RotatePage"}(i=t._ViewerActionType||(t._ViewerActionType={}));s=function(t){function i(n,i,r,u,f,e,o){var s=t.call(this,n)||this;return s._stopOnClientOut=u,s._css=f,s._activeCss=e,s._visibleCss=o,s._pageView=r,s._viewPanelContainer=i,s._initElement(),s._bindEvents(),s}return __extends(i,t),i.prototype.activate=function(){this._isActive||(this._isActive=!0,n.addClass(this._viewPanelContainer,this._activeCss))},i.prototype.deactivate=function(){this._isActive&&(this._isActive=!1,n.removeClass(this._viewPanelContainer,this._activeCss))},i.prototype.reset=function(){this._innerStop(null)},Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startPnt",{get:function(){return this._startPnt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageView",{get:function(){return this._pageView},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewPanelContainer",{get:function(){return this._viewPanelContainer},enumerable:!0,configurable:!0}),i.prototype._initElement=function(){this.applyTemplate(this._css,this.getTemplate(),this._getTemplateParts());this._viewPanelContainer.appendChild(this.hostElement)},i.prototype._innerStop=function(n){try{this._stop(n)}finally{this._isStarted=!1;this._startPnt=null}},i.prototype._getTemplateParts=function(){return null},i.prototype._onMouseDown=function(n){var i=this._toClientPoint(n),t=this._testPageWorkingAreaHit(i);t&&this.pageView.isPageContentLoaded(t.pageIndex)&&(typeof getSelection!='undefined'&&getSelection().removeAllRanges(),this._isStarted=!0,this._startPnt=i,this._start(t))},i.prototype._onMouseMove=function(n){if(this._isStarted){var t=this._toClientPoint(n),i=this._testPageWorkingAreaHit(t);i&&this.pageView.isPageContentLoaded(i.pageIndex)?this._move(t,i):this._stopOnClientOut&&this._stop(t)}},i.prototype._onMouseUp=function(n){this._isStarted&&this._innerStop(this._toClientPoint(n))},i.prototype._start=function(){n.addClass(this.hostElement,this._visibleCss)},i.prototype._move=function(){},i.prototype._stop=function(){n.removeClass(this.hostElement,this._visibleCss)},i.prototype._bindEvents=function(){var n=this;this.addEventListener(this._viewPanelContainer,'mousedown',function(t){n._isActive&&n._onMouseDown(t)});this.addEventListener(this._viewPanelContainer,'mousemove',function(t){n._isActive&&n._onMouseMove(t)});this.addEventListener(document,'mouseup',function(t){n._isActive&&n._onMouseUp(t)})},i.prototype._toClientPoint=function(t){var i=this._viewPanelContainer.getBoundingClientRect();return new n.Point(t.clientX-i.left,t.clientY-i.top)},i.prototype._testPageWorkingAreaHit=function(n){var t=this._pageView.hitTest(n.x,n.y);return t&&t.hitWorkingArea?t:null},i}(n.Control);t._MouseTool=s;l=function(n){function t(t){var i=n.call(this)||this;return i._rect=t,i}return __extends(t,n),Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t}(n.EventArgs);t._RubberbandOnAppliedEventArgs=l;a=function(t){function i(i,r,u){var f=t.call(this,i,r,u,!1,'wj-rubberband','rubberband-actived','show')||this;return f.applied=new n.Event,f}return __extends(i,t),i.prototype._start=function(n){t.prototype._start.call(this,n);this.hostElement.style.left=this.startPnt.x+'px';this.hostElement.style.top=this.startPnt.y+'px'},i.prototype._move=function(n){if(this.startPnt){var t=this.viewPanelContainer.getBoundingClientRect();this.hostElement.style.width=n.x-this.startPnt.x+'px';this.hostElement.style.height=n.y-this.startPnt.y+'px'}},i.prototype._stop=function(i){if(i){var r=this.hostElement.getBoundingClientRect();r.width>5&&r.height>5&&this._onApplied(new l(new n.Rect(this.startPnt.x,this.startPnt.y,r.width,r.height)))}this.hostElement.style.width='0px';this.hostElement.style.height='0px';t.prototype._stop.call(this,i)},i.prototype._onApplied=function(n){this.applied.raise(this,n)},i}(s);t._Rubberband=a;h=function(n){function i(t,i,r){var u=n.call(this,t,i,r,!0,'wj-magnifier','magnifier-actived','show')||this;return u._Magnification=2,u._currentPageIndex=-1,u}return __extends(i,n),i.prototype.deactivate=function(){n.prototype.deactivate.call(this);this._currentPageIndex=-1},i.prototype.reset=function(){n.prototype.reset.call(this);this._currentPageIndex=-1},i.prototype._getTemplateParts=function(){return{_viewPageDiv:'view-page-div'}},i.prototype._bindEvents=function(){var i=this,r;n.prototype._bindEvents.call(this);r=function(){if(!(i._currentPageIndex<0)){var n=i.pageView.pages[i._currentPageIndex],u=t._getRotatedSize(n.size,n.rotateAngle),r=i._viewPageDiv.querySelector('svg');i._viewPageDiv.style.height=u.height.valueInPixel*i.pageView.zoomFactor*i._Magnification+'px';i._viewPageDiv.style.width=u.width.valueInPixel*i.pageView.zoomFactor*i._Magnification+'px';r.setAttribute('width',i._viewPageDiv.style.width);r.setAttribute('height',i._viewPageDiv.style.height);t._transformSvg(r,n.size.width.valueInPixel,n.size.height.valueInPixel,i._Magnification*i.pageView.zoomFactor,n.rotateAngle)}};this.pageView.zoomFactorChanged.addHandler(function(){r()});this.pageView.rotateAngleChanged.addHandler(function(){r()})},i.prototype._start=function(t){n.prototype._start.call(this,t);this._showMagnifer(this.startPnt,t)},i.prototype._move=function(n,t){this._showMagnifer(n,t)},i.prototype._showMagnifer=function(n,i){var r=this.hostElement.getBoundingClientRect(),u=t._getPositionByHitTestInfo(i);this.hostElement.style.left=n.x-r.width/2+'px';this.hostElement.style.top=n.y-r.height/2+'px';this._fillPage(u);this._showHitPosition(u)},i.prototype._fillPage=function(n){var i=this;n.pageIndex!==this._currentPageIndex&&(this._currentPageIndex=n.pageIndex,this.pageView.pages[this._currentPageIndex].getContent().then(function(n){var r=n.cloneNode(!0),u;i._viewPageDiv.innerHTML='';i._viewPageDiv.appendChild(r);r.setAttribute('width',new t._Unit(r.getAttribute('width')).valueInPixel*i._Magnification+'px');r.setAttribute('height',new t._Unit(r.getAttribute('height')).valueInPixel*i._Magnification+'px');u=i.pageView.pages[i._currentPageIndex].size;t._transformSvg(r,u.width.valueInPixel,u.height.valueInPixel,i._Magnification*i.pageView.zoomFactor,i.pageView.pages[i._currentPageIndex].rotateAngle);i._viewPageDiv.style.width=r.getAttribute('width');i._viewPageDiv.style.height=r.getAttribute('height')}))},i.prototype._showHitPosition=function(n){var i=this.hostElement.getBoundingClientRect(),r=this.pageView.pages[this._currentPageIndex],u=t._getTransformedPosition(n.pageBounds,r.size,r.rotateAngle,this.pageView.zoomFactor);this._viewPageDiv.style.left=-u.x*this._Magnification+i.width/2+'px';this._viewPageDiv.style.top=-u.y*this._Magnification+i.height/2+'px'},i}(s);h.controlTemplate='<div wj-part="view-page-div" class="wj-view-page"></div>';t._Magnifier=h})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){'use strict';var e='<path d="M24,11.9v-2h-4V7h0V5h0h-1h-5V2h0V0h0h-1H1H0h0v2h0v11h0v1h0h1h5v4h0v1h0h1h3v4h0v1h0h1h2.1v-1H11V12h2.1v-2H11h-1h0v2h0v6H7V7h12v2.9h-1v2h5V23h-4.9v1H23h1h0v-1h0L24,11.9L24,11.9z M6,5L6,5l0,2h0v6H1V2h12v3H7H6z"/><path d="M20,20v-3v-1h-1h-1v-1v-1h-1h-3h-1v1v3v1h1h1v2h0h1h3h1h0L20,20L20,20z M14,18v-3h3v1h-1h-1v1v1H14z M17,17v1h-1v-1H17z M16,20v-1h1h1v-1v-1h1v3H16z"/>',r=function(r){function u(n,t){var i=r.call(this,n,t)||this;return i._initSidePanelParameters(),i}return __extends(u,r),Object.defineProperty(u.prototype,"reportName",{get:function(){return this._reportName},set:function(n){n!=this._reportName&&(this._reportName=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"paginated",{get:function(){return this._innerPaginated},set:function(n){this._innerPaginated=n},enumerable:!0,configurable:!0}),u.getReportNames=function(n,i){return t._Report.getReportNames(n,i)},u.getReports=function(n,i,r){return t._Report.getReports(n,i,r)},u.prototype._globalize=function(){r.prototype._globalize.call(this);var t=n.culture.Viewer;this._gParameterTitle.textContent=t.parameters},u.prototype._executeAction=function(t){if(r.prototype._executeAction.call(this,t),!this._actionIsDisabled(t))switch(t){case u._parameterCommandTag:n.Control.getControl(this._sidePanel).active(this._parametersPageId)}},u.prototype._actionIsDisabled=function(n){switch(n){case u._parameterCommandTag:return!this._innerDocumentSource||!this._innerDocumentSource.hasParameters}return r.prototype._actionIsDisabled.call(this,n)},u.prototype._initHamburgerMenu=function(n){this._hamburgerMenu=new f(this,n)},u.prototype._initSidePanelParameters=function(){var r=this,u=n.Control.getControl(this._sidePanel),f=u.addPage(n.culture.Viewer.parameters,e,2);this._parametersPageId=f.id;this._gParameterTitle=f.outContent.querySelector('.wj-tabtitle');f.format(function(f){r._paramsEditor=new i(f.content);r._paramsEditor.commit.addHandler(function(){r._innerDocumentSource&&r._innerDocumentSource.hasParameters&&(r._showViewPanelMessage(),r._innerDocumentSource.setParameters(r._paramsEditor.parameters).then(function(n){var t=n||[],i=t.some(function(n){return!!n.error});r._paramsEditor._reset();i?r._paramsEditor.itemsSource=t:(r._resetDocument(),r._paramsEditor.isDisabled=!0,r._renderDocumentSource())}).catch(function(n){r._showViewPanelErrorMessage(t._getErrorMessage(n))}),r._isMobileTemplate()&&u.collapse())});r._paramsEditor.validate.addHandler(function(){r._innerDocumentSource&&r._innerDocumentSource.hasParameters&&r._innerDocumentSource.setParameters(r._paramsEditor.parameters).then(function(n){r._paramsEditor.itemsSource=n})});var e=function(){var i=r._innerDocumentSource;if(i.status===t._ExecutionStatus.cleared||i.status===t._ExecutionStatus.notFound?t._removeChildren(f.content):i.status===t._ExecutionStatus.rendering?r._paramsEditor.isDisabled=!0:i.status===t._ExecutionStatus.completed&&(r._paramsEditor.isDisabled=!1),i.status===t._ExecutionStatus.loaded){if(!i.hasParameters){u.hide(f);return}i.getParameters().then(function(t){(t.filter(function(n){return!n.hidden}).length?(u.show(f),u.active(f)):u.hide(f),r._innerDocumentSource!=i||i.isDisposed)||(r._paramsEditor.itemsSource=t,t.filter(function(n){return n.value==null&&!n.nullable&&!n.hidden}).length?r._showViewPanelMessage(n.culture.Viewer.requiringParameters):(r._paramsEditor.isDisabled=!0,r._renderDocumentSource()))})}},o=function(){r._innerDocumentSource&&(t._addWjHandler(r._documentEventKey,r._innerDocumentSource.statusChanged,e),e())};r._documentSourceChanged.addHandler(o);o()})},Object.defineProperty(u.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),u.prototype._loadDocument=function(n){var i=this._innerDocumentSource!==n,u=r.prototype._loadDocument.call(this,n);return n&&i&&t._addWjHandler(this._documentEventKey,n.statusChanged,this._onDocumentStatusChanged,this),u},u.prototype._reRenderDocument=function(){this._renderDocumentSource()},u.prototype._onDocumentStatusChanged=function(){this._innerDocumentSource&&this._innerDocumentSource.status===t._ExecutionStatus.loaded&&!this._innerDocumentSource.hasParameters&&this._renderDocumentSource()},u.prototype._renderDocumentSource=function(){var t=this,n;this._innerDocumentSource&&(this._setDocumentRendering(),n=this._innerDocumentSource,n.render().then(function(){return t._getStatusUtilCompleted(n)}))},u.prototype._disposeDocument=function(){this._innerDocumentSource&&t._removeAllWjHandlers(this._documentEventKey,this._innerDocumentSource.statusChanged);r.prototype._disposeDocument.call(this)},u.prototype._setDocumentRendering=function(){this._innerDocumentSource._updateStatus(t._ExecutionStatus.rendering);r.prototype._setDocumentRendering.call(this)},u.prototype._getSource=function(){return this.filePath?new t._Report({serviceUrl:this.serviceUrl,filePath:this.filePath,reportName:this.reportName,paginated:this.paginated}):null},u.prototype._supportsPageSettingActions=function(){return!0},u.prototype.refresh=function(n){n===void 0&&(n=!0);r.prototype.refresh.call(this,n);n&&this._paramsEditor.refresh()},u}(t.ViewerBase),i,u,f;r._parameterCommandTag=99;t.ReportViewer=r;i=function(i){function r(t){var r=i.call(this,t)||this;return r._parameters={},r._errors=[],r._errorsVisible=!1,r.commit=new n.Event,r.validate=new n.Event,n.addClass(r.hostElement,'wj-parameterscontainer'),r._updateErrorsVisible(),r}return __extends(r,i),r.prototype._setErrors=function(n){this._errors=n;this._updateErrorDiv()},Object.defineProperty(r.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsSource",{get:function(){return this._itemSources},set:function(n){this._itemSources=n;this._parameters={};this._render();var t=[];(n||[]).forEach(function(n){n.error&&t.push({key:n.name,value:n.error})});this._setErrors(t)},enumerable:!0,configurable:!0}),r.prototype._reset=function(){this._lastEditedParam=null},r.prototype._setErrorsVisible=function(n){this._errorsVisible=n;this._updateErrorsVisible()},r.prototype._updateErrorsVisible=function(){this._errorsVisible?n.removeClass(this.hostElement,r._errorsHiddenCss):n.addClass(this.hostElement,r._errorsHiddenCss)},r.prototype.onCommit=function(){this.commit.raise(this,new n.EventArgs)},r.prototype.onValidate=function(){this.validate.raise(this,new n.EventArgs);this._setErrorsVisible(!1)},r.prototype._deferValidate=function(n,t,i){var r=this;this._lastEditedParam=n;this._validateTimer!=null&&(clearTimeout(this._validateTimer),this._validateTimer=null);this._validateTimer=setTimeout(function(){t!=null&&t();r.onValidate();i!=null&&i();r._validateTimer=null},500)},r.prototype._updateErrorDiv=function(){for(var t,f,e,i=this._errors||[],u=this.hostElement.querySelectorAll('.error'),n=0;n<u.length;n++)u[n].parentNode.removeChild(u[n]);for(n=0;n<i.length;n++)f=this.hostElement.querySelector('*['+r._paramIdAttr+'="'+i[n].key+'"]'),e=i[n].value,f&&(t=document.createElement('div'),t.innerHTML=e,t.className='error',f.appendChild(t))},r.prototype._render=function(){var i=this,u;this._lastEditedParam||(t._removeChildren(this.hostElement),this._itemSources)&&(this._itemSources.forEach(function(u){if(!u.hidden){var e=document.createElement('div'),o=document.createElement('span'),f=null;if(e.className='wj-parametercontainer',o.className='wj-parameterhead',o.innerHTML=u.prompt||u.name,n.isArray(u.allowedValues))f=i._generateComboEditor(u);else switch(u.dataType){case t._ParameterType.Boolean:f=i._generateBoolEditor(u);break;case t._ParameterType.DateTime:case t._ParameterType.Time:case t._ParameterType.Date:f=i._generateDateTimeEditor(u);break;case t._ParameterType.Integer:case t._ParameterType.Float:f=i._generateNumberEditor(u);break;case t._ParameterType.String:f=i._generateStringEditor(u)}f&&(f.className+=' wj-parametercontrol',e.setAttribute(r._paramIdAttr,u.name),e.appendChild(o),e.appendChild(f),i.hostElement.appendChild(e))}}),u=document.createElement('input'),u.type='button',u.value=n.culture.Viewer.apply,u.className='wj-applybutton',t._addEvent(u,'click',function(){i._validateParameters()&&(i._errors=[],i.onCommit());i._setErrorsVisible(!0)}),this.hostElement.appendChild(u))},r.prototype.refresh=function(n){n===void 0&&(n=!0);i.prototype.refresh.call(this,n);n&&(this._reset(),this._render())},r.prototype._validateParameters=function(){for(var i,s=this.hostElement.querySelectorAll('textarea'),h,e=[],c=this.itemsSource,u=0;u<c.length;u++)i=c[u],h=this.hostElement.querySelector('['+r._paramIdAttr+'="'+i.name+'"]'),i.nullable||this.parameters.hasOwnProperty(i.name)||this.parameters[i.name]||i.value!==null&&i.value!==undefined&&i.value!==""||h&&e.push({key:i.name,value:n.culture.Viewer.nullParameterError});for(u=0;u<s.length;u++){var f=s.item(u),l,o=!0;l=parseInt(f.getAttribute('data-type'));switch(l){case t._ParameterType.Date:case t._ParameterType.DateTime:case t._ParameterType.Time:o=r._checkValueType(f.value,n.isDate);break;case t._ParameterType.Float:o=r._checkValueType(f.value,r._isFloat);break;case t._ParameterType.Integer:o=r._checkValueType(f.value,n.isInt)}o||e.push({key:f.parentElement.id,value:n.culture.Viewer.invalidParameterError})}return this._setErrors(e),e.length<=0},r._isFloat=function(n){return!isNaN(parseFloat(n))},r._checkValueType=function(n,t){for(var r=n.split('\n'),i=0;i<r.length;i++)if(r[i].trim().length<=0||t(r[i].trim()))continue;else return!1;return!0},r.prototype._generateComboEditor=function(t){var e=this,i,h=[],o=document.createElement('div'),r,c,v=[],l=t.allowedValues&&t.allowedValues.length>0,f,s,a;for(t.multiValue?i=new u(o):(i=new n.input.ComboBox(o),t.nullable?h.push({name:n.culture.Viewer.parameterNoneItemsSelected,value:null}):t.value==null&&l&&h.push({name:n.culture.Viewer.selectParameterValue,value:null})),i.isEditable=!1,i.displayMemberPath='name',i.selectedValuePath='value',i.isDisabled=!l,f=0;f<t.allowedValues.length;f++)h.push({name:t.allowedValues[f].key,value:t.allowedValues[f].value});if(i.itemsSource=h,t.multiValue){if(r=i,l){if(t.value){for(f=0;f<t.value.length;f++)for(s=0;s<r.itemsSource.length;s++)if(r.itemsSource[s].value===t.value[f]){v.push(r.itemsSource[s]);break}r.checkedItems=v}}else r.checkedItems=[];r.checkedItemsChanged.addHandler(function(){e._deferValidate(t.name,function(){c=[];for(var n=0;n<r.checkedItems.length;n++)c.push(r.checkedItems[n].value);e._updateParameters(t,c)},function(){c.length>0&&!t.nullable&&e._validateNullValueOfParameter(o)})})}else i.selectedValue=l?t.value:null,a=!1,i.selectedIndexChanged.addHandler(function(i){e._deferValidate(t.name,function(){a||(e._updateParameters(t,i.selectedValue),i.selectedValue&&i.itemsSource[0].name===n.culture.Viewer.selectParameterValue&&setTimeout(function(){a=!0;var n=i.selectedValue,t=i.selectedIndex;i.itemsSource.shift();i.collectionView.refresh();i.selectedValue=n;i.selectedIndex=t-1;a=!1}))},function(){return e._validateNullValueOfParameter(o)})});return o},r.prototype._updateParameters=function(t,i){var u=function(t,i){return i&&!n.isArray(t)?t.split(/[\r\n]+/):t},r;this.itemsSource.some(function(n){return n.name===t.name?(r=n,!0):!1});this._parameters[t.name]=r.value=t.value=u(i,t.multiValue)},r.prototype._generateBoolEditor=function(i){var f=this,u,e=[],r;return i.nullable?(r=document.createElement('div'),u=new n.input.ComboBox(r),u.isEditable=!1,u.displayMemberPath='name',u.selectedValuePath='value',e.push({name:'None',value:null}),e.push({name:'True',value:!0}),e.push({name:'False',value:!1}),u.itemsSource=e,u.selectedValue=i.value,u.selectedIndexChanged.addHandler(function(n){f._deferValidate(i.name,function(){return f._updateParameters(i,n.selectedValue)})})):(r=document.createElement('input'),r.type='checkbox',r.checked=i.value,t._addEvent(r,'click',function(){f._deferValidate(i.name,function(){return f._updateParameters(i,r.checked)})})),r},r.prototype._generateStringEditor=function(n){var i=this,t;return n.multiValue?t=i._createTextarea(n.value,n.dataType):(t=document.createElement('input'),t.type='text',n.value&&(t.value=n.value)),i._bindTextChangedEvent(t,n),t},r.prototype._createTextarea=function(i,u){var f=document.createElement('textarea'),o,s=[],e;if((u===t._ParameterType.DateTime||u===t._ParameterType.Time||u===t._ParameterType.Date)&&(o=r._dateTimeFormat),i&&i.length>0)if(o){for(e=0;e<i.length;e++)s.push(n.Globalize.formatDate(new Date(i[e]),o));f.value=s.join('\n')}else f.value=i.join('\n');return f.wrap='off',f.setAttribute('data-type',u.toString()),f},r.prototype._bindTextChangedEvent=function(n,i){var r=this;t._addEvent(n,'change,keyup,paste,input',function(){r._deferValidate(i.name,function(){return r._updateParameters(i,n.value)},function(){n.value&&!i.nullable&&r._validateNullValueOfParameter(n)})})},r.prototype._generateNumberEditor=function(i){var f=this,r,u;return i.multiValue?(r=this._createTextarea(i.value,i.dataType),this._bindTextChangedEvent(r,i)):(r=document.createElement('div'),u=new n.input.InputNumber(r),u.format=i.dataType===t._ParameterType.Integer?'n0':'n2',u.isRequired=!i.nullable,i.value&&(u.value=i.dataType===t._ParameterType.Integer?parseInt(i.value):parseFloat(i.value)),u.valueChanged.addHandler(function(n){f._deferValidate(i.name,function(){return f._updateParameters(i,n.value)})})),r},r.prototype._generateDateTimeEditor=function(i){var e=this,u,f;return i.multiValue?(u=this._createTextarea(i.value,i.dataType),u.title=r._dateTimeFormat,this._bindTextChangedEvent(u,i)):(u=document.createElement('div'),i.dataType==t._ParameterType.Date||i.dataType===t._ParameterType.DateTime?f=new n.input.InputDate(u):(f=new n.input.InputTime(u),f.step=60),f.isRequired=!i.nullable,i.value&&(f.value=new Date(i.value)),f.valueChanged.addHandler(function(){e._deferValidate(i.name,function(){return e._updateParameters(i,f.value.toJSON())})})),u},r.prototype._validateNullValueOfParameter=function(n){var t=this._errors,i,u;if(t&&t.length)for(i=0;i<t.length;i++)if(t[i].key===n.parentElement.getAttribute(r._paramIdAttr)&&(u=n.parentElement.querySelector('.error'),u)){n.parentElement.removeChild(u);t.splice(i,1);break}},r}(n.Control);i._paramIdAttr='param-id';i._errorsHiddenCss='wj-parametererrors-hidden';i._dateTimeFormat='MM/dd/yyyy HH:mm';t._ParametersEditor=i;u=function(){function t(t){this._selectedAll=!1;this._innerCheckedItemsChanged=!1;this.checkedItemsChanged=new n.Event;var i=this,r=new n.input.MultiSelect(t);i._multiSelect=r;r.checkedItemsChanged.addHandler(i.onCheckedItemsChanged,i);r.isDroppedDownChanged.addHandler(i.onIsDroppedDownChanged,i);r.headerFormatter=function(){return i._updateHeader()}}return t.prototype._updateHeader=function(){var r=this,i=r.checkedItems||[],u=[],f=r.displayMemberPath,t;if(!i.length)return n.culture.Viewer.parameterNoneItemsSelected;if(r._selectedAll)return n.culture.Viewer.parameterAllItemsSelected;if(f){for(t=0;t<i.length;t++)u[t]=i[t][f];return u.join(', ')}return i.join(', ')},t.prototype.onIsDroppedDownChanged=function(){this._multiSelect.isDroppedDown&&this._updateSelectedAll()},t.prototype.onCheckedItemsChanged=function(n,t){var i=this;if(!i._innerCheckedItemsChanged){if(!i._selectAllItem){i.checkedItemsChanged.raise(i,t);return}i._updateSelectedAll();i.checkedItemsChanged.raise(i,t)}},Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._multiSelect.isEditable},set:function(n){this._multiSelect.isEditable=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._multiSelect.isDisabled},set:function(n){this._multiSelect.isDisabled=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._multiSelect.displayMemberPath},set:function(n){this._multiSelect.displayMemberPath=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._multiSelect.selectedValuePath},set:function(n){this._multiSelect.selectedValuePath=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){var i=this,u=i.displayMemberPath||'name',r;i._itemsSource=t;r=[];t&&(t.length>1?(i._selectAllItem={},i._selectAllItem[u]=n.culture.Viewer.parameterSelectAllItemText,r.push(i._selectAllItem)):i._selectAllItem=null,r=r.concat(t));i._multiSelect.itemsSource=r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkedItems",{get:function(){var t=this,n=[],i;return t._multiSelect.checkedItems&&(n=t._multiSelect.checkedItems.slice()),i=n.indexOf(t._selectAllItem),i>-1&&n.splice(i,1),n},set:function(n){var t=this;t._multiSelect.checkedItems=n;t._selectedAll=!1;t._updateSelectedAll()},enumerable:!0,configurable:!0}),t.prototype._updateSelectedAll=function(){var n=this;if(n._selectAllItem){var t=n._multiSelect.checkedItems||[],r=t.indexOf(n._selectAllItem),i=r>-1,u=n._selectedAll!==i;if(u){n._selectedAll=i;n._innerCheckedItemsChanged=!0;n._multiSelect.checkedItems=n._selectedAll?n._multiSelect.itemsSource.slice():[];n._innerCheckedItemsChanged=!1;return}(n._selectedAll=t&&n._itemsSource&&t.length-(i?1:0)===n._itemsSource.length,n._selectedAll!==i)&&(n._innerCheckedItemsChanged=!0,n._selectedAll?n._multiSelect.checkedItems=t.concat(n._selectAllItem):(t=t.slice(),t.splice(r,1),n._multiSelect.checkedItems=t),n._innerCheckedItemsChanged=!1)}},t}();t._MultiSelectEx=u;f=function(t){function i(n,i,r){return t.call(this,n,i,r)||this}return __extends(i,t),i.prototype._initItems=function(){var i=t.prototype._initItems.call(this);return i.splice(2,0,{title:n.culture.Viewer.parameters,icon:e,commandTag:r._parameterCommandTag}),i},i}(t._HamburgerMenu);t._ReportHamburgerMenu=f})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){'use strict';var t=function(t){function i(n,i){return t.call(this,n,i)||this}return __extends(i,t),Object.defineProperty(i.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),i.prototype._getSource=function(){return this.filePath?new n._PdfDocumentSource({serviceUrl:this.serviceUrl,filePath:this.filePath}):null},i}(n.ViewerBase);n.PdfViewer=t})(t=n.viewer||(n.viewer={}))}(wijmo||(wijmo={}))