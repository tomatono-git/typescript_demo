/*
    *
    * Wijmo Library 5.20172.359
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the GrapeCity Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
"use strict";function WjValueAccessorFactory(n){return new WjValueAccessor(n)}var __decorate=this&&this.__decorate||function(n,t,i,r){var f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},core_1,WjOptions,WjComponentResolvedMetadata,WjDirectiveBehavior,Ng2Utils,WjValueAccessor,moduleExports,WjDirectiveBaseModule;Object.defineProperty(exports,"__esModule",{value:!0});core_1=require("@angular/core");WjOptions=function(){function n(){}return n}();WjOptions.asyncBindings=!0;exports.WjOptions=WjOptions;WjComponentResolvedMetadata=function(){function n(n){this.changeEventMap=[];this.allImplEvents=[];this.resolveChangeEventMap(n)}return n.prototype.resolveChangeEventMap=function(n){var r=this.changeEventMap,o=n.outputs,s=n.changeEvents||{},h,l,u,c,t,a,f,e,i;if(r.splice(0,r.length),this.allImplEvents=[],o&&o.length){for(h=o.map(function(n){return n.split(':')}).map(function(n){return{implName:n[0].trim(),exposeName:n[1]&&n[1].trim()}}),this.allImplEvents=h.map(function(n){return n.implName}),l=h.filter(function(n){return n.implName&&n.exposeName}),u=0,c=l;u<c.length;u++)t=c[u],a=Ng2Utils.getWjEventName(t.implName),a&&(i={eventImpl:t.implName,event:t.exposeName},f=s[t.exposeName],f&&f.length&&(i.props=f.map(function(n){return{prop:n,evExposed:Ng2Utils.getChangeEventNameExposed(n),evImpl:Ng2Utils.getChangeEventNameImplemented(n)}})),r.push(i));for(e in s)e.indexOf('.')>-1&&(i={eventImpl:null,event:e,props:s[e].map(function(n){return{prop:n,evExposed:Ng2Utils.getChangeEventNameExposed(n),evImpl:Ng2Utils.getChangeEventNameImplemented(n)}})},r.push(i))}},n}();exports.WjComponentResolvedMetadata=WjComponentResolvedMetadata;WjDirectiveBehavior=function(){function n(t,i,r,u){var f,e;this._pendingEvents=[];this.isInitialized=!1;this.isDestroyed=!1;this.directive=t;this.elementRef=i;this.injector=r;this.injectedParent=u;f=this.typeData=t.constructor[n.directiveTypeDataProp];f.siblingId==null&&(f.siblingId=++n.siblingDirId+'');e=t.constructor[n.directiveResolvedTypeDataProp];e?this.resolvedTypeData=e:t.constructor[n.directiveResolvedTypeDataProp]=e=this.resolvedTypeData=new WjComponentResolvedMetadata(f);t[n.BehaviourRefProp]=this;r[n.BehaviourRefProp]=this;t[n.isInitializedPropAttr]=!1;this._createEvents();this._setupAsChild();this._isHostElement()&&i.nativeElement.setAttribute(n.siblingDirIdAttr,f.siblingId);this.subscribeToEvents(!1)}return n.getHostElement=function(t,i){return n.ngZone||(n.ngZone=i.get(core_1.NgZone)),t.nativeElement},n.attach=function(t,i,r,u){return new n(t,i,r,u)},n.prototype.ngOnInit=function(){this.isInitialized=!0;this._initParent();this.subscribeToEvents(!0)},n.prototype.ngAfterViewInit=function(){this.directive[n.isInitializedPropAttr]=!0;this.directive[n.initializedEventAttr].emit(undefined)},n.prototype.ngOnDestroy=function(){var t,f,e,u,o;if(!this.isDestroyed){if(this.isDestroyed=!0,t=this.directive,this._siblingInsertedEH&&this.elementRef.nativeElement.removeEventListener('DOMNodeInserted',this._siblingInsertedEH),this._isChild()&&this.parentBehavior&&(f=this.parentBehavior.directive,e=this._getParentProp(),!this.parentBehavior.isDestroyed&&f&&e&&t&&(u=f[e],wijmo.isArray(u)&&u&&(o=u.indexOf(t),o>=0&&u.splice(o,1)))),t instanceof wijmo.Control&&t.hostElement){var i=this.elementRef.nativeElement,r=i&&i.parentNode,s=r?Array.prototype.indexOf.call(r.childNodes,i):-1;t.dispose();s>-1&&Array.prototype.indexOf.call(r.childNodes,i)<0&&(i.textContent='',s<r.childNodes.length&&r.replaceChild(i,r.childNodes[s]))}this.injector[n.BehaviourRefProp]=null}},n.instantiateTemplate=function(n,t,i,r,u){var s,e,f,o,h,c;if(u===void 0&&(u=!1),s=t.createEmbeddedView(i,{},t.length),e=s.rootNodes,u&&e.length===1)f=e[0];else for(f=document.createElement('div'),o=0,h=e;o<h.length;o++)c=h[o],f.appendChild(c);return n&&n.appendChild(f),{viewRef:s,rootElement:f}},n.prototype.getPropChangeEvent=function(n){var t=this.typeData.changeEvents,i;if(t)for(i in t)if(t[i].indexOf(n)>-1)return i;return null},n.prototype._createEvents=function(){for(var t,r,u=this.resolvedTypeData.allImplEvents,n=0,i=u;n<i.length;n++)t=i[n],r=t==='initialized',this.directive[t]=new core_1.EventEmitter(r)},n.prototype.subscribeToEvents=function(n){var e=this.resolvedTypeData.changeEventMap,i,u,r,f,t;for(n=!!n,i=0,u=e;i<u.length;i++)t=u[i],n!==t.event.indexOf(".")<0&&this.addHandlers(t);if(n)for(r=0,f=e;r<f.length;r++)t=f[r],this.triggerPropChangeEvents(t,!0)},n.prototype.addHandlers=function(t){var i=this,r=this.directive;n.evaluatePath(r,t.event).addHandler(function(n,u){i._runInsideNgZone(function(){i.isInitialized&&i.triggerPropChangeEvents(t);t.eventImpl&&i._triggerEvent(r[t.eventImpl],u,t.props&&t.props.length>0)})})},n.prototype.triggerPropChangeEvents=function(n,t){var r,i,u,f;if(t===void 0&&(t=!0),r=this.directive,n.props&&n.props.length)for(i=0,u=n.props;i<u.length;i++)f=u[i],this._triggerEvent(r[f.evImpl],r[f.prop],t)},n.prototype._setupAsChild=function(){this._isChild()&&(this._isHostElement()&&(this.elementRef.nativeElement.style.display='none'),this.parentBehavior=n.getBehavior(this.injectedParent))},n.prototype._isAsyncBinding=function(){var t=this.directive[n.asyncBindingUpdatePropAttr];return t==null?WjOptions.asyncBindings:t},n.prototype._isChild=function(){return this._isParentInitializer()||this._isParentReferencer()},n.prototype._isParentInitializer=function(){return this.directive[n.parPropAttr]!=null},n.prototype._isParentReferencer=function(){return!!this.typeData.parentRefProperty},n.prototype._getParentProp=function(){return this.directive[n.parPropAttr]},n.prototype._getParentReferenceProperty=function(){return this.typeData.parentRefProperty},n.prototype._useParentObj=function(){return!1},n.prototype._parentInCtor=function(){return this._isParentReferencer()&&this._getParentReferenceProperty()==''},n.prototype._initParent=function(){var e,n,u,t;if(this.parentBehavior&&!this._useParentObj()){var i=this.parentBehavior.directive,f=this._getParentProp(),r=this.directive;this._isParentInitializer()&&(e=this._getParentProp(),n=i[f],wijmo.isArray(n)?(u=this._isHostElement(),t=u?this._getSiblingIndex():-1,(t<0||t>=n.length)&&(t=n.length),n.splice(t,0,r),u&&(this._siblingInsertedEH=this._siblingInserted.bind(this),this.elementRef.nativeElement.addEventListener('DOMNodeInserted',this._siblingInsertedEH))):i[f]=r);this._isParentReferencer()&&!this._parentInCtor()&&(r[this._getParentReferenceProperty()]=i)}},n.prototype._getSiblingIndex=function(){var r=this.elementRef.nativeElement,u=r.parentElement,t,i;if(!u)return-1;var f=u.childNodes,e=-1,o=this.typeData.siblingId;for(t=0;t<f.length;t++)if(i=f[t],i.nodeType==1&&i.getAttribute(n.siblingDirIdAttr)==o&&(++e,i===r))return e;return-1},n.prototype._siblingInserted=function(n){if(n.target===this.elementRef.nativeElement){var t=this._getSiblingIndex(),i=this.parentBehavior.directive[this._getParentProp()],u=this.directive,r=i.indexOf(u);t>=0&&r>=0&&t!==r&&(i.splice(r,1),t=Math.min(t,i.length),i.splice(t,0,u))}},n.prototype._isHostElement=function(){return this.elementRef.nativeElement.nodeType===Node.ELEMENT_NODE},n.prototype._runInsideNgZone=function(t){var i=n;return i.ngZone&&!i._ngZoneRun&&(i._ngZoneRun=i.ngZone.run.bind(i.ngZone)),(i._ngZoneRun||function(n){return n()})(t)},n.prototype._triggerEvent=function(n,t,i){var f=this,r,u;i&&this._isAsyncBinding()?(r=this._pendingEvents,u={event:n,args:t},r.push(u),this._pendingEventsTO==null&&(this._pendingEventsTO=setTimeout(function(){f._triggerPendingEvents(!1)},0))):n.emit(t)},n.prototype._triggerPendingEvents=function(n){var u,t,i,r;for(this._pendingEventsTO!=null&&(clearTimeout(this._pendingEventsTO),this._pendingEventsTO=null),u=[].concat(this._pendingEvents),this._pendingEvents.splice(0,this._pendingEvents.length),t=0,i=u;t<i.length;t++)r=i[t],r.event.emit(r.args);n&&this._pendingEvents.length&&this._triggerPendingEvents(!0)},n.prototype.flushPendingEvents=function(){this._triggerPendingEvents(!0)},n.evaluatePath=function(n,t){return this._pathBinding.path=t,this._pathBinding.getValue(n)},n.getBehavior=function(t){return t?t[n.BehaviourRefProp]:null},n}();WjDirectiveBehavior.directiveTypeDataProp='meta';WjDirectiveBehavior.directiveResolvedTypeDataProp='_wjResolvedMeta';WjDirectiveBehavior.BehaviourRefProp='_wjBehaviour';WjDirectiveBehavior.parPropAttr='wjProperty';WjDirectiveBehavior.wjModelPropAttr='wjModelProperty';WjDirectiveBehavior.initializedEventAttr='initialized';WjDirectiveBehavior.isInitializedPropAttr='isInitialized';WjDirectiveBehavior.siblingDirIdAttr='wj-directive-id';WjDirectiveBehavior.asyncBindingUpdatePropAttr='asyncBindings';WjDirectiveBehavior.siblingDirId=0;WjDirectiveBehavior.wijmoComponentProviderId='WjComponent';WjDirectiveBehavior.outsideZoneEvents={pointermove:!0,pointerover:!0,mousemove:!0,wheel:!0,touchmove:!0};WjDirectiveBehavior._pathBinding=new wijmo.Binding('');exports.WjDirectiveBehavior=WjDirectiveBehavior;Ng2Utils=function(){function n(){}return n.initEvents=function(n,t){for(var i,r,u,o,s,f=[],e=0,h=t;e<h.length;e++)if(i=h[e],r=i.props,i.event&&i.eventImpl&&f.push(i.eventImpl+':'+i.event),r&&r.length)for(u=0,o=r;u<o.length;u++)s=o[u],f.push(s.evImpl+':'+s.evExposed);return f},n.getChangeEventNameImplemented=function(t){return n.getChangeEventNameExposed(t)+n.changeEventImplementSuffix},n.getChangeEventNameExposed=function(n){return n+'Change'},n.getWjEventNameImplemented=function(t){return t+n.wjEventImplementSuffix},n.getWjEventName=function(t){if(t){var r=n.wjEventImplementSuffix,i=t.length-r.length;if(i>0&&t.substr(i)===r)return t.substr(0,i)}return null},n.getBaseType=function(n){var t;return n&&(t=Object.getPrototypeOf(n.prototype))&&t.constructor},n.getAnnotations=function(n){return Reflect.getMetadata('annotations',n)},n.getAnnotation=function(n,t){var i,r,u;if(t&&n)for(i=0,r=n;i<r.length;i++)if(u=r[i],u instanceof t)return u;return null},n.getTypeAnnotation=function(t,i,r){for(var f,u=t;u;u=r?null:n.getBaseType(u))if(f=n.getAnnotation(n.getAnnotations(u),i),f)return f;return null},n.equals=function(n,t){return n!=n&&t!=t||wijmo.DateTime.equals(n,t)||n===t},n._copy=function(n,t,i,r,u){var f,e,o;if(n&&t)for(f in t)(r||f[0]!=='_')&&(e=t[f],(!u||u(f,e))&&(o=n[f],wijmo.isArray(e)?n[f]=(!wijmo.isArray(o)||i?[]:o).concat(e):e!==undefined&&(n[f]=e)))},n}();Ng2Utils.changeEventImplementSuffix='PC';Ng2Utils.wjEventImplementSuffix='Ng';exports.Ng2Utils=Ng2Utils;WjValueAccessor=function(){function n(n){this._isFirstChange=!0;this._isSubscribed=!1;this._onChange=function(){};this._onTouched=function(){};this._directive=n;this._behavior=WjDirectiveBehavior.getBehavior(n)}return n.prototype.writeValue=function(n){var t=this,i;this._modelValue=n;this._directive.isInitialized?(this._ensureInitEhUnsubscribed(),this._updateDirective(),this._isFirstChange=!1):this._dirInitEh?this._isFirstChange=!1:(i=this._directive.initialized,this._dirInitEh=i.subscribe(function(){t._updateDirective();t._ensureInitEhUnsubscribed()}))},n.prototype.registerOnChange=function(n){this._onChange=n},n.prototype.registerOnTouched=function(n){this._onTouched=n},n.prototype._updateDirective=function(){if(!this._isFirstChange||this._modelValue!=null){if(this._ensureNgModelProp(),this._directive&&this._ngModelProp){var n=this._modelValue;n===''&&(n=null);this._directive[this._ngModelProp]=n}this._ensureSubscribed()}},n.prototype._ensureSubscribed=function(){var n,t,i;this._isSubscribed||(n=this._directive,n&&(this._ensureNgModelProp(),t=this._ngModelProp=n[WjDirectiveBehavior.wjModelPropAttr],t&&(i=this._behavior.getPropChangeEvent(t),i&&n[i].addHandler(this._dirValChgEh,this)),n instanceof wijmo.Control&&n.lostFocus.addHandler(this._dirLostFocusEh,this),this._isSubscribed=!0))},n.prototype._ensureNgModelProp=function(){!this._ngModelProp&&this._directive&&(this._ngModelProp=this._directive[WjDirectiveBehavior.wjModelPropAttr])},n.prototype._ensureInitEhUnsubscribed=function(){this._dirInitEh&&(this._dirInitEh.unsubscribe(),this._dirInitEh=null)},n.prototype._dirValChgEh=function(){if(this._onChange&&this._directive&&this._ngModelProp){var n=this._directive[this._ngModelProp];Ng2Utils.equals(this._modelValue,n)||(this._modelValue=n,this._onChange(n))}},n.prototype._dirLostFocusEh=function(){this._onTouched&&this._onTouched()},n}();exports.WjValueAccessor=WjValueAccessor;exports.WjValueAccessorFactory=WjValueAccessorFactory;moduleExports=[];WjDirectiveBaseModule=function(){function n(){}return n}();WjDirectiveBaseModule=__decorate([core_1.NgModule({})],WjDirectiveBaseModule);exports.WjDirectiveBaseModule=WjDirectiveBaseModule